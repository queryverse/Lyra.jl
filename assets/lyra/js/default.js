(window.__webpackJsonp__=window.__webpackJsonp__||[]).push([[0],{1060:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(28),r=n(84),s=n(50),i=n.n(s),l=n(26);function o(e){r.a.call(this,[],e)}o.Definition=Object(a.extend)({},r.a.Definition);const c=Object(a.inherits)(o,r.a);c.handles=function(e){const t=e.mark.bounds,n=Object(l.coords)(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},c.connectors=function(e){const t=e.mark.bounds;return[Object(l.coords)(t,"connector").midCenter]},c.channels=function(e){const t=e.mark.bounds,n=e.mark.group.bounds,a=e._svg.getAttribute("d"),r=Object(l.coords)(t).midCenter;return[].concat([{x:n.x1,y:e.y},{x:e.x-l.PADDING,y:e.y}].map(i()("x","span"))).concat([{x:e.x,y:n.y1},{x:e.x,y:e.y-l.PADDING}].map(i()("y","span"))).concat([{x:r.x,y:r.y,path:a}].map(i()("fill","border")))},c.altchannels=function(e){const t=e.mark.bounds,n=Object(l.coords)(t).midCenter,a=e.mark.items[0].pathCache;return a=a.map(function(e){return e.join(" ")}).join(" "),[{x:n.x,y:n.y,path:a}].map(i()("stroke","border"))}},1061:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(28),r=n(84),s=n(50),i=n.n(s),l=n(26);function o(e){r.a.call(this,[],e)}o.Definition=Object(a.extend)({},r.a.Definition);const c=Object(a.inherits)(o,r.a);c.handles=function(e){const t=e.mark.bounds,n=Object(l.coords)(t,"handle");return[n.topLeft,n.topRight,n.bottomLeft,n.bottomRight]},c.connectors=function(e){const t=e.mark.bounds;return[Object(l.coords)(t,"connector").midCenter]},c.channels=function(e){const t=e.mark.bounds,n=e.mark.group.bounds,a=e._svg.getAttribute("d"),r=Object(l.coords)(t).midCenter;return[].concat([{x:n.x1,y:e.y},{x:e.x-l.PADDING,y:e.y}].map(i()("x","span"))).concat([{x:e.x,y:n.y1},{x:e.x,y:e.y-l.PADDING}].map(i()("y","span"))).concat([{x:r.x,y:r.y,path:a}].map(i()("stroke","border")))},c.altchannels=c.channels},1062:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(28),r=n(84),s=n(50),i=n.n(s),l=n(26);const o=3.5*l.PADDING;function c(e){r.a.call(this,[],e)}c.Definition=Object(a.extend)({},r.a.Definition);const u=Object(a.inherits)(c,r.a);u.handles=function(e){var t=Object(l.coords)(e.bounds,"handle");return[t.topLeft,t.topRight,t.bottomLeft,t.bottomRight]},u.connectors=function(e){return[Object(l.coords)(e.bounds,"connector").midCenter]},u.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(l.coords)(t).midCenter;return[].concat([{x:n.x1,y:a.y},{x:a.x-o,y:a.y,_voronoi:!1}].map(i()("x","span"))).concat([{x:a.x,y:n.y1},{x:a.x,y:a.y-o,_voronoi:!1}].map(i()("y","span"))).concat([{x:e.x+.01,y:e.y-.01,shape:e.shape,size:e.size}].map(i()("size","border"))).concat([{x:e.x-.01,y:e.y+.01,shape:e.shape,size:l.PADDING*e.size}].map(i()("fill","border")))},u.altchannels=function(e){return[].concat([{x:e.x+.01,y:e.y+.01,shape:e.shape,size:e.size}].map(i()("shape","border"))).concat([{x:e.x-.01,y:e.y,shape:e.shape,size:l.PADDING*e.size}].map(i()("stroke","border")))}},1063:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(28),r=n(84),s=n(50),i=n.n(s),l=n(26);const o=1.5*l.PADDING;function c(e){r.a.call(this,[],e)}c.Definition=Object(a.extend)({},r.a.Definition);const u=Object(a.inherits)(c,r.a);u.handles=function(e){var t=Object(l.coords)(e.bounds,"handle");return[t.topLeft,t.bottomRight]},u.connectors=function(e){return[Object(l.coords)(e.bounds,"connector").midCenter]},u.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,r=Object(l.coords)(t).midCenter;return[].concat([{x:n.x1,y:r.y},{x:r.x-o,y:r.y}].map(i()("x","span"))).concat([{x:r.x,y:n.y1},{x:r.x,y:r.y-o}].map(i()("y","span"))).concat([Object(a.extend)({},e,{bounds:null,_id:null})].map(i()("text","border")))},u.altchannels=function(e){return[Object(a.extend)({},e,{bounds:null,_id:null})].map(i()("fill","border"))}},1064:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(28);n(308);function r(e){a.Transform.call(this,[],e),this._cellID=null,this._start=Object(a.ingest)({}),this._end=Object(a.ingest)({}),this._mouseCache={x:-1,y:-1}}r.Definition={metadata:{source:!0,changes:!0},params:[{name:"lyra_cell",required:!0},{name:"lyra_mouse",required:!0}]},Object(a.inherits)(r,a.Transform).transform=function(e,t){const n=e.lyra_cell,r=e.lyra_mouse,s=this._mouseCache,i=this._cellID,l=this._start,o=this._end,c=this.value||[],u=t.fork(t.NO_FIELDS&t.NO_SOURCE);if(c.length&&i!==Object(a.tupleid)(n)&&(u.rem=c.splice(0)),!Object(a.tupleid)(n))return u.source=this.value=c,u;let d=n.mark.group;const p=n.datum.manipulator,m=function(e){const t=e.mark.group,n=e.datum.manipulator;for(const a of t.items)if(a.role===n){if("group"===a.marktype)for(const t of a.items)if(t.datum&&t.datum.key===e.datum.key)return t.items[0].items;return a.items}return null}(n),g={x:0,y:0};if(!c.length||s.x===r.x&&s.y===r.y){if(!c.length){for(c.push(Object(a.extend)(l,r));d;d=d.mark&&d.mark.group)g.x+=d.x||0,g.y+=d.y||0;if("arrow"===p||"span"===p)c.push.apply(c,m.map(e=>Object(a.ingest)({x:e.x+g.x,y:e.y+g.y})));else{const e=m[0].bounds||m[0].mark.bounds;c.push.apply(c,[{x:e.x1,y:e.y1},{x:e.x2,y:e.y1},{x:e.x2,y:e.y2}].map(a.ingest))}c.push(Object(a.extend)(o,r)),u.add=c,this._cellID=Object(a.tupleid)(n)}}else u.mod.push(Object(a.extend)(l,r)),u.mod.push(Object(a.extend)(o,r));return this._mouseCache=r,u.source=this.value=c,u}},1091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1092),r=n(302),s=n(417),i=n(1145),l=n(1146),o=n(1147),c=n(414),u=n(1156),d=n(1157),p=n(1158),m=n(1159),g=n(1160),h=n(1161),f=n(1162),y=n(1163),v=n(1164),b=a.combineReducers({signals:f.signalsReducer,scene:h.sceneReducer,pipelines:m.pipelinesReducer,datasets:i.datasetsReducer,scales:g.scalesReducer,guides:l.guidesReducer,marks:p.marksReducer,interactions:d.interactionsReducer});t.default=a.combineReducers({vis:r.default(s.hydrator(b),c.default),vega:y.invalidateVegaReducer,inspector:u.inspectorReducer,hints:o.hintsReducer,walkthrough:v.walkthroughReducer})},1100:function(e,t){},1101:function(e,t){},1102:function(e,t){},1103:function(e,t){},1121:function(e,t){},1122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(199),r=n(39).getInVis,s=n(219);t.signalLookup=function(e){return r(a.store.getState(),`signals.${s(e)}.value`)}},1133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Asc="ascending",e.Desc="descending"}(t.SortOrderValues||(t.SortOrderValues={})),e.exports={ASC:"asc",DESC:"desc"}},1134:function(e,t,n){"use strict";function a(){}function r(e){this.cancelled=!1,this.promise=new Promise(e.bind(this))}a.prototype.catch=a.prototype.then=function(){return new a},r.prototype.cancel=function(){this.cancelled=!0},r.prototype.then=function(e,t){if(this.cancelled)return new a;var n=this;return this.promise.then(function(t){return n.cancelled?new a:e(t)}).catch(t)},r.prototype.catch=function(e){return this.promise.catch(e)},e.exports=r},1135:function(e,t,n){"use strict";var a=n(1136),r={};Object.keys(a).forEach(function(e){var t=a[e];Object.keys(t).forEach(function(e){var n=t[e];"string"==typeof n&&(r[e]=n)})}),e.exports=r},1136:function(e,t,n){"use strict";e.exports={vega:n(590),signals:n(262),scene:n(220),pipelines:n(265),datasets:n(154),scales:n(266),guides:n(165),marks:n(76),rules:n(863),inspectors:n(132),hints:n(593),walkthrough:n(867)}},1139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(418),r=n(154),s=n(266),i=n(39).getInVis;t.default=function(e,t){const n=a.getCounts(!0).scales;for(const t in n)0===n[t].markTotal&&e(s.deleteScale(null,+t));const l=a.getCounts(!0).data;for(const n in l)if(0===l[n].total){const a=i(t,`datasets.${n}._parent`);i(t,`pipelines.${a}._source`)!==+n&&e(r.deleteDataset(+n,a))}}},1140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39).getInVis,r=n(154),s=n(265);t.default=function(e,t,n){n.map.data.source_0=n.dsId,n.map.data.data_0=n.dsId;const i=n.output.data;!function(e,t,n,i){const l=i.transform&&i.transform.find(e=>"aggregate"===e.type);if(!l)return;const o=l.groupby.join("|"),c=n.plId;let u=a(t,"pipelines."+c+"._aggregates."+o);u?e(r.summarizeAggregate(l,u)):(e(s.aggregatePipeline(c,l)),u=l._id),n.map.data.source_0=u,n.map.data.data_0=u}(e,t,n,i.find(e=>"data_0"===e.name)||i.find(e=>"source_0"===e.name))}},1141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(264),r=n(165),s=n(309),i=n(39),l=(i.getIn,i.getInVis),o={x:a.GuideType.Axis,y:a.GuideType.Axis,color:a.GuideType.Legend,size:a.GuideType.Legend,shape:a.GuideType.Legend},c={left:"right",right:"left",top:"bottom",bottom:"top"};t.default=function(e,t,n){const i=n.channel,u=n.map,d=o[i],p=u.scales[i],m=n.output;d&&p&&(d===a.GuideType.Axis?function(e,t,n,i,o){const u=n.map,d=n.mark._parent,p=(l(t,`scales.${i}`),l(t,`marks.${d}.axes`));let m,g=!1,h=0;const f=o.filter(e=>u.scales[e.scale]===i);if(p.some(function(e){const n=l(t,`guides.${e}`);return!!n&&(n.scale===i?g=!0:void(n.orient===f[0].orient&&(++h,m=n.orient)))}),!g&&h<2){let t=a.Guide(a.GuideType.Axis,n.channel,i);t=t.mergeDeep({title:f[0].title,grid:f.length>1,orient:1===h&&m?c[m]:f[0].orient||t.orient,encode:f[0].encode});const l=r.addGuide(t);e(l),e(s.addAxisToGroup(l.meta,d))}}(e,t,n,p,m.axes):function(e,t,n,i,o){const c=n.map,u=n.mark,d=n.property,p=u._parent,m=l(t,`marks.${p}.legends`);let g=!1;const h=o.find(e=>c.scales[e[d]]===i);if(m.some(function(e){const n=l(t,`guides.${e}`);if(n)return g=g||n.get(d)===i}),!g){let t=a.Guide(a.GuideType.Legend,d,i);t=(t=t.deleteIn(["encode","symbols",d])).mergeDeep({title:h.title,encode:h.encode});const n=r.addGuide(t);e(n),e(s.addLegendToGroup(n.meta,p))}}(e,t,n,p,m.legends))}},1142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(588),s=n(166),i=n(76),l=n(262),o=(n(367),n(39)),c=o.getInVis;o.getIn;function u(e,t,n,a){const r=t.map,o=t.markId,c=t.markType,u="stroke"===(a=a||t.property)?n.stroke||n.fill:n[a];"scale"in u&&"string"==typeof u.scale&&(u.scale=r.scales[u.scale]),"value"in u&&(u.signal=s.propSg(o,c,a),e(l.setSignal(u.value,u.signal)),delete u.value),e(i.setMarkVisual({property:a,def:u},o)),r.marks[o]=r.marks[o]||{},r[a]=Date.now()}t.default=function(e,t,n){const s=n.markType,l=n.map,o=n.markId,p=n.channel;let m=n.output.marks[0];"group"===m.type&&m.name.indexOf("pathgroup")>=0&&(m=m.marks[0]),"rect"!==s||"x"!==p&&"y"!==p?"text"===s&&"text"===p||u(e,n,m.encode.update):function(e,t,n,s){const l=n.channel,o=n.property,p=n.markId,m=n.map.marks[p],g=l+"2",h=l+"c",f=d[l],y=Object.values(r.default[l]),v=c(t,`marks.${p}.encode.update`);let b=0;if(o!==`${l}+`)return y.map(e=>a.extend({},{ts:m&&m[e.name]||0},e)).sort(a.compare("ts","descending")).forEach(t=>{const n=t.name;n!==o&&(b>=1?e(i.disableMarkVisual(n,p)):v[n]._disabled||++b)}),s[o]=s[l]||s[h]||s[o],u(e,n,s);y.forEach(t=>e(i.disableMarkVisual(t.name,p))),s[g]?(u(e,n,s,l),u(e,n,s,g)):(u(e,n,s,l),s[f]={scale:s[l].scale,band:!0,offset:-1},u(e,n,s,f))}(e,t,n,m.encode.update),m.from&&m.from.data&&e(i.updateMarkProperty({property:"from",value:{data:l.data[m.from.data]}},o))};const d={x:"width",y:"height"}},1143:function(e,t,n){"use strict";var a=this&&this.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),s=n(23),i=n(580),l=n(266),o=n(309),c=n(39),u=(c.getIn,c.getInVis);function d(e,t,n,a){if(n.type!==t.type)return!1;if(JSON.stringify(n.range)!==JSON.stringify(t.range))return!1;if(s.isDataRefDomain(t.domain)&&n._domain){const r=n._domain[0];if(r.field!==t.domain.field)return!1;if(u(e,`datasets.${r.data}._parent`)!==u(e,`datasets.${a[t.domain.data]}._parent`))return!1}return!0}t.default=function(e,t,n){const c=n.map.scales,p=n.map.data,m=n.mark,g=n.channel;let h=u(t,"scales."+c[g]),f=h&&h._id,y=n.output.scales;if(!y)return;if(1!==(y=y.filter(e=>e.name===g)).length)return void console.warn(y.length+" scales found for "+g);const v=function(e){const t=e.range;return"x"===e.name||r.isArray(t)&&t.find(e=>s.isSignalRef(e)&&"width"===e.signal)?e.range="width":("y"===e.name||r.isArray(t)&&t.find(e=>s.isSignalRef(e)&&"height"===e.signal))&&(e.range="height"),e}(y[0]);if(h&&d(t,v,h,p)||u(t,"scales").valueSeq().forEach(function(e){if(d(t,v,e,p))return h=e,f=e._id,!1}),!h||!d(t,v,h,p)){const t=function(e,t,n){const{domain:o}=n,c=a(n,["domain"]),u=s.isDataRefDomain(o)?r.extend({},c,{_domain:[{data:t.map.data[o.data],field:o.field}]}):n,d=l.addScale(i.Scale(u));return e(d),d}(e,n,v);f=t.meta}c[g]=f,e(o.addScaleToGroup(f,m._parent))}},1144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(418),r=n(264),s=n(580),i=n(165),l=n(76),o=n(266),c=n(309),u=n(39),d=u.getInVis,p=u.getIn;e.exports=function(e,t,n){const u=n.map,m=u.data.summary,g=n.markId,h=d(t,"marks."+g),f=a.getCounts(!0),y={};function v(e){return e.get("data")===m}Object.values(u.scales).forEach(function(n){const a=d(t,"scales."+n+".type"),r=d(t,"scales."+n+"._domain"),s=d(t,"scales."+n+"._range"),i=f.scales[n].markTotal;function l(t,r,s){r.get("data")!==m&&(1===i?e(o.updateScaleProperty({property:t+"."+s+".data",value:m},n)):"ordinal"===a?y[n]=!0:e(o.amendDataRef({property:t,ref:r.set("data",m)},n)))}r.size&&!r.filter(v).size&&r.forEach(l.bind(null,"_domain")),s.size&&!s.filter(v).size&&s.forEach(l.bind(null,"_range"))}),Object.keys(y).length>0&&(Object.keys(y).forEach(function(n){const a=d(t,"scales."+n),l=o.addScale(function(e,t){function n(e){return{data:t,field:e.field}}return s.Scale({_origName:e.get("_origName"),type:e.get("type"),nice:e.get("nice"),round:e.get("round"),zero:e.get("zero"),padding:e.get("padding"),domain:e.get("domain"),_domain:e.get("_domain").toJS().map(n),range:e.get("range"),_range:e.get("_range").toJS().map(n)})}(a,m)),u=y[n]=l.meta,p=h.get("_parent");let g,v;for(v in e(l),e(c.addScaleToGroup(u,p)),f.scales[n].guides)(g=d(t,"guides."+v)).get("_gtype")===r.GuideType.Axis?e(i.updateGuideProperty({property:"scale",value:u},v)):e(i.updateGuideProperty({property:g.get("_type"),value:u},v))}),p(h,"encode.update").forEach(function(t,n){const a=y[t.get("scale")];a&&e(l.updateMarkProperty({property:"encode.update."+n+".scale",value:a},g))}))}},1145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(853),i=n(154),l=n(307),o=n(221);t.datasetsReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===r.getType(i.addDataset))return t.meta&&o.init(t.payload,t.meta),e.set(String(t.payload._id),t.payload);if(t.type===r.getType(i.deleteDataset))return e.remove(String(n));if(t.type===r.getType(i.changeFieldMType)){const a=t.payload;return e.setIn([String(n),"_schema",a.field,"mtype"],a.mtype)}if(t.type===r.getType(i.sortDataset))return e.setIn([String(n),"_sort"],t.payload);if(t.type===r.getType(i.addTransform)){const r=t.payload,i=e.getIn([String(n),"transform"])||a.List();return"formula"===r.type&&(e=e.setIn([String(n),"_schema",r.as],l.Column({name:r.as,type:"number",mtype:s.QUANTITATIVE,source:!1}))),e.setIn([String(n),"transform"],i.concat(r))}if(t.type===r.getType(i.updateTransform)){const a=t.payload,r=a.transform;if("formula"===r.type){const t=e.getIn([String(n),"transform",a.index,"as"]),s=e.getIn([String(n),"_schema",t]);e=(e=e.deleteIn([String(n),"_schema",t])).setIn([String(n),"_schema",r.as],s.set("name",r.as))}return e.setIn([String(n),"transform",a.index],a.transform)}if(t.type===r.getType(i.summarizeAggregate)){const a=(e=(e=(e=e.setIn([String(n),"transform","0","fields"],e.getIn([String(n),"transform","0","fields"]).concat(t.payload.fields))).setIn([String(n),"transform","0","ops"],e.getIn([String(n),"transform","0","ops"]).concat(t.payload.ops))).setIn([String(n),"transform","0","as"],e.getIn([String(n),"transform","0","as"]).concat(t.payload.as))).getIn([String(n),"source"]);return e.setIn([String(n),"_schema"],o.aggregateSchema(e.getIn([a,"_schema"]),e.getIn([String(n),"transform","0"])))}return e}},1146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(165),i=n(266),l=n(264),o=n(39).str,c=n(166).convertValuesToSignals;t.guidesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===r.getType(s.addGuide))return e.set(o(n),function(e){const t=e.payload,n=t.encode;return t.merge({encode:Object.keys(n).reduce(function(e,a){return e[a]=c(n[a],"guide",t._id,a),e},{})})}(t));if(t.type===r.getType(s.deleteGuide))return e.remove(o(n));if(t.type===r.getType(s.updateGuideProperty))return e.setIn([o(n),t.payload.property],a.fromJS(t.payload.value));if(t.type===r.getType(i.deleteScale)){const n=t.meta;return e.withMutations(function(t){e.forEach(function(e,a){+(l.isAxis(e)?e.scale:l.isLegend(e)?e[e._type]:null)===n&&t.delete(String(a))})})}return e}},1147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(593),s=n(76),i=n(220),l=n(1148),o=n(1155),c=n(870);t.hintsReducer=function(e,t){if(void 0===e)return c.Hints();if(t.type===a.getType(r.clearHints))return e.set("display",null);if(t.type===a.getType(r.hintsOn))return e.set("on",t.payload);if(t.type===a.getType(i.createScene))return e.set("display",o.SceneHints.CREATE_SCENE);if(t.type===a.getType(s.addMark)){const n=t.payload.props.type;if(l.MarkHints.ADD_MARK[n])return e.set("display",l.MarkHints.ADD_MARK[n])}return e}},1148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(220);t.MarkHints={ADD_MARK:{rect:{title:"I see you have added a RECT...",text:"Maybe you'd like to clear the whole canvas",action_text:"DO IT. CLEAR IT OUT.",action:a.clearScene},line:{title:"I see you have added a LINE...",text:"Drop data on it to create a graph."},symbol:{template:n(1149)}}}},1149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(76),i=n(155).lookup;t.SymbolHints=r.connect(function(e,t){return{selectedId:e.getIn(["inspector","encodings","selectedId"])}},function(e,t){return{updateProperty:(t,n,a)=>{const r=i(t);r&&(r[n]=a),e(s.updateMarkProperty({property:n,value:a},t))}}})(class extends a.Component{render(){return a.createElement("div",null,a.createElement("p",null,"I have a special template!!!"))}})},1155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(593);t.SceneHints={CREATE_SCENE:{title:"Hi, I'm helpy the helper hints box",text:"You can turn me on and off. You can manage this in the settings link in the footer.",action_text:"DISABLE HINTS",action:a.hintsOn,action_props:!1}}},1156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(132),s=n(76),i=n(222),l=n(871);function o(e,t){return t.reduce(function(e,t){return e.setIn(["encodings","expandedLayers",t],!0)},e)}t.inspectorReducer=function(e,t){if(void 0===e)return l.Inspector();if(t.type===a.getType(r.selectPipeline))return e.setIn(["pipelines","selectedId"],t.payload);if(t.type!==a.getType(r.baseSelectMark)&&t.type!==a.getType(r.selectScale)&&t.type!==a.getType(r.selectInteraction)&&t.type!==a.getType(r.selectGuide)||(e=(e=e.setIn(["encodings","selectedId"],t.payload)).setIn(["encodings","selectedType"],t.type)),t.type===a.getType(i.addInteraction)&&(e=(e=e.setIn(["encodings","selectedId"],t.meta)).setIn(["encodings","selectedType"],a.getType(r.selectInteraction))),t.type===a.getType(s.addMark)&&(e=(e=e.setIn(["encodings","selectedId"],t.meta)).setIn(["encodings","selectedType"],a.getType(r.baseSelectMark))),t.type===a.getType(r.baseSelectMark))return o(e,t.meta);if(t.type===a.getType(s.addMark)){const n={};return n[t.payload.props._parent]=!0,"group"===t.payload.props.type&&(n[t.meta]=!0),e.mergeIn(["encodings","expandedLayers"],n)}return t.type===a.getType(r.expandLayers)?o(e,t.payload):t.type===a.getType(r.removeLayers)?t.payload.reduce(function(e,t){return e.deleteIn(["encodings","expandedLayers",t])},e):t.type===a.getType(r.toggleLayers)?t.payload.reduce(function(e,t){const n=["encodings","expandedLayers",t];return e.setIn(n,!e.getIn(n))},e):e}},1157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(222);t.interactionsReducer=function(e,t){const n=t.meta;return void 0===e?a.Map():t.type===r.getType(s.addInteraction)?e.set(String(n),t.payload):t.type===r.getType(s.setSelection)?e.setIn([String(n),"selection"],t.payload):t.type===r.getType(s.setApplication)?e.setIn([String(n),"application"],t.payload):t.type===r.getType(s.deleteInteraction)?e.remove(String(n)):t.type===r.getType(s.updateInteractionName)?e.setIn([String(n),"name"],t.payload):e}},1158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(309),i=n(165),l=n(76),o=n(220),c=n(222),u=n(166),d=function(e,t,n){return e.updateIn(t,e=>(-1===e.indexOf(n)&&e.push(n),e))},p=function(e,t,n){return e.updateIn(t,e=>-1===e.indexOf(n)?[...e,n]:e)},m=function(e,t,n){return e.updateIn(t,e=>e.filter(e=>e!==n))};function g(e){const t=e.payload.props,n=t.encode&&t.encode.update;return t.encode?t.merge({encode:{update:u.convertValuesToSignals(n,t.type,e.meta)}}):t}function h(e,t){const{parentId:n,childId:a}=t;if(void 0===a)return e;const r=e.get(String(a));if(!r)return e;const s=r._parent;if(null==s&&!n)return e;const i=e.get(String(s)),l=n?e.get(String(n)):n;return null===l?m(e.setIn([String(a),"_parent"],null),[String(s),"marks"],a):d(i&&l?m(e.setIn([String(a),"_parent"],n),[String(s),"marks"],a):e.setIn([String(a),"_parent"],n),[String(n),"marks"],a)}t.marksReducer=function(e,t){if(void 0===e)return a.Map();const n=t.meta;if(t.type===r.getType(o.createScene))return e.set(String(n),g(t));if(t.type===r.getType(l.addMark))return h(e.set(String(n),g(t)),{parentId:t.payload.props?t.payload.props._parent:null,childId:n});if(t.type===r.getType(l.baseDeleteMark))return h(e,{childId:n,parentId:null}).remove(String(n));if(t.type===r.getType(l.setParent))return h(e,{parentId:t.payload,childId:n});if(t.type===r.getType(l.updateMarkProperty))return e.setIn([String(n),t.payload.property],t.payload.value);if(t.type===r.getType(l.setMarkVisual))return e.setIn([String(n),"encode","update",t.payload.property],t.payload.def);if(t.type===r.getType(l.disableMarkVisual))return e.setIn([String(n),"encode","update",t.payload,"_disabled"],!0);if(t.type===r.getType(l.resetMarkVisual)){const a=e.getIn([String(n),"type"]),r=t.payload;return e.setIn([String(n),"encode","update",r],{signal:u.propSg(n,a,r)})}if(t.type===r.getType(l.setMarkExtent))return e.setIn([String(n),"encode","update",t.payload.oldExtent,"_disabled"],!0).setIn([String(n),"encode","update",t.payload.newExtent,"_disabled"],!1);if(t.type===r.getType(l.setVlUnit))return e.setIn([String(n),"_vlUnit"],t.payload);if(t.type===r.getType(l.bindScale))return e.setIn([String(n),"encode","update",t.payload.property,"scale"],t.payload.scaleId);const f=t.meta;if(t.type===r.getType(s.addScaleToGroup))return d(e,[String(f),"scales"],t.payload);if(t.type===r.getType(s.addAxisToGroup))return p(e,[String(f),"axes"],t.payload);if(t.type===r.getType(s.addLegendToGroup))return p(e,[String(f),"legends"],t.payload);if(t.type===r.getType(s.addInteractionToGroup))return p(e,[String(f),"_interactions"],t.payload);const y=t.meta;return t.type===r.getType(i.deleteGuide)?(e=m(e,[String(t.payload.groupId),"axes"],y),m(e,[String(t.payload.groupId),"legends"],y)):t.type===r.getType(c.deleteInteraction)?m(e,[String(t.payload.groupId),"_interactions"],y):e}},1159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(265),i=n(39).str;t.pipelinesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===r.getType(s.baseAddPipeline))return e.set(i(n),t.payload);if(t.type===r.getType(s.updatePipelineProperty)){const a=t.payload;return e.setIn([i(n),a.property],a.value)}if(t.type===r.getType(s.baseAggregatePipeline)){const a=t.payload;return e.setIn([i(n),"_aggregates",a.key],a.dsId)}return e}},1160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(266);t.scalesReducer=function(e,t){const n=t.meta;if(void 0===e)return a.Map();if(t.type===r.getType(s.addScale))return e.set(String(n),t.payload);if(t.type===r.getType(s.updateScaleProperty)){const a=t.payload;return e.setIn([String(n),a.property],a.value)}if(t.type===r.getType(s.amendDataRef)){const a=t.payload,r=e.getIn([String(n),a.property]);return e.setIn([String(n),a.property],r.push(a.ref))}return t.type===r.getType(s.deleteScale)?e.remove(String(n)):e}},1161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(220);t.sceneReducer=function(e,t){return void 0===e?a.Map():t.type===r.getType(s.createScene)?e.set("_id",t.meta):e}},1162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(54),s=n(165),i=n(76),l=n(262),o=n(99),c=n(166),u=n(219);function d(e,t,n){return e.set(t,o.Signal({name:u(t),value:n,_idx:e.size}))}function p(e,t,n){return e.setIn([t,"on"],n)}function m(e,t,n,a){return n?Object.keys(n).reduce(function(e,l){if(void 0===n[l]||void 0===n[l].value)return e;if(t.type===r.getType(s.addGuide)){const r="guide",s=a+"_"+l;return d(e,c.propSg(t.meta,r,s),n[l].value)}if(t.type===r.getType(i.addMark)){const a=t.payload.props.type,r=l,s=c.propSg(t.meta,a,r),i=t.payload.streams,o=d(e,s,n[l].value);return i&&i[s]?p(o,s,i[s]):o}},e):e}t.signalsReducer=function(e,t){if(void 0===e)return a.Map();if(t.type===r.getType(l.initSignal))return d(e,t.meta,t.payload);if(t.type===r.getType(l.setSignal))return e.setIn([t.meta,"value"],t.payload);if(t.type===r.getType(l.setSignalStreams))return p(e,t.meta,t.payload);if(t.type===r.getType(l.unsetSignal))return e.remove(t.meta);if(t.type===r.getType(i.addMark))return m(e,t,t.payload.props.encode&&t.payload.props.encode.update);if(t.type===r.getType(s.addGuide)){const n=t.payload.encode;return Object.keys(n).forEach(function(a){e=m(e,t,n[a],a)}),e}return t.type===r.getType(i.baseDeleteMark)||t.type===r.getType(s.deleteGuide)?function(e,t){const n=t.type===r.getType(i.baseDeleteMark)?t.payload:"guide",a=new RegExp("^"+u(n+"_"+t.meta));return e.filter(function(e,t){return!a.test(t)})}(e,t):e}},1164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(867),s=n(873);t.walkthroughReducer=function(e,t){return void 0===e?s.Walkthrough():t.type===a.getType(r.setActiveStep)?e.set("activeStep",t.payload):t.type===a.getType(r.setActiveWalkthrough)?e.set("activeWalkthrough",t.payload):e}},1165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.data={example:n(1166),barChart:n(1167)}},1166:function(e){e.exports={title:"Example Walkthrough",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a RECT",text:"Click on the RECT button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change Color",text:"Select the RECT mark and then change it's color to #000000 in the property inspector",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 2: Change color",text:"Select the RECT mark and then change it's stroke color to #ffffff",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"rect",properties:{update:{fill:{value:"#000000"},stroke:{value:"#ffffff"}}}}]}}]}},1167:function(e){e.exports={title:"Cool times",image:"https://placeholdit.imgix.net/~text?txtsize=33&txt=150%C3%97150&w=150&h=150",alt_text:"an image",steps:[{id:1,title:"Step 1: Add a SYMBOL",text:"Click on the SYMBOL button in the toolbar to add a new Rect to the canvas",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{},help:"If you are stuck, try clearing the scene."},{id:2,title:"Step 2: Change symbol shape",text:"Select the SYMBOL and change it's SHAPE to CROSS",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol"}]},help:"If you are stuck, try clearing the scene."},{id:3,title:"Step 3: Change color and add RECT",text:"Select the SYMBOL mark and then change it's stroke color to #ffffff, then add a RECT mark and change it's fill to #000000",image:"http://fillmurray.com/g/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"}}}}]},help:"If you are stuck, try clearing the scene."},{id:4,title:"Walkthrough complete!",text:"You did it!",image:"http://fillmurray.com/150/150",alt_text:"an image",lyra_state:{marks:[{type:"symbol",properties:{update:{shape:{value:"cross"},stroke:{value:"#ffffff"}}}},{type:"rect",properties:{update:{fill:{value:"#000000"}}}}]}}]}},1169:function(e,t,n){"use strict";n.r(t);var a=n(1060),r=n(1061),s=n(656),i=n(1062),l=n(1063),o=n(1064),c=n(28);const u=n(219),d=u("manipulators_"),p={[`${d}area`]:a.a,[`${d}group`]:s.a,[`${d}line`]:r.a,[`${d}rect`]:s.a,[`${d}symbol`]:i.a,[`${d}text`]:l.a,[u("bubble_cursor")]:o.a};Object.keys(p).forEach(e=>p[e].Definition.type=e),c.extend(c.transforms,p),t.default=p},1170:function(e,t,n){"use strict";var a=n(99),r=n(589),s=n(39),i=s.getIn,l=s.getInVis,o=n(590).parseVega;function c(e,t){var n=e.getState(),a=i(n,"vega.invalid"),r=l(n,"scene._id");if(a){if(!r)return!0;t.view&&(t.view.finalize(),t.view=null),e.dispatch(o(!0)),t.parse().then(function(){e.dispatch(o(!1))})}return a}function u(e,t){if(e){var n=t.signal(a.SELECTED).mark.role,s=n&&+n.split("lyra_")[1],i=e.get("_id");if(i!==s){var l=[i].concat(r.getParentGroupIds(i)),o=r.findInItemTree(t.scenegraph().root.items[0],l);(t._running||Promise.resolve(!0)).then(function(){null!==o&&(t.signal(a.SELECTED,o),t.runAsync())})}}}e.exports={createStoreListener:function(e,t){return function(){var n=c(e,t),a=e.getState(),r=i(a,"vega.isParsing");if(!n&&!r&&t.view&&t.view.signal&&"function"==typeof t.view.signal){var s=i(a,"inspector.encodings.selectedId"),o=l(a,"marks."+s);s&&o&&u(o,t.view)}}},_recreateVegaIfNecessary:c,_updateSelectedMarkInVega:u}},1171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(372),s=n(40),i=n(267),l=n(199),o=n(1175),c=n(1228),u=n(1247),d=n(1248),p=n(1276);e.exports=r.render(a.createElement(s.Provider,{store:l.store},a.createElement("div",{className:"lyra-container"},a.createElement("div",{className:"sidebar-container"},a.createElement(o.EncodingsSidebar,null),a.createElement(c.InspectorSidebar,null)),a.createElement("div",{className:"main-container"},a.createElement(d.PipelinesToolbar,null),a.createElement("div",{className:"tools-container"},a.createElement("div",{className:"vis-container"},a.createElement("div",{id:"vis"}),a.createElement("div",{className:"interaction-preview-container"})),a.createElement(p.Toolbar,null))),a.createElement(i.default,{effect:"solid",delayShow:375,class:"tooltip",html:!0}))),document.querySelector(".app-container")),r.render(a.createElement(s.Provider,{store:l.store},a.createElement(u.default,null)),document.querySelector(".interaction-preview-container"))},1175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(1176),s=n(1227);t.EncodingsSidebar=class extends a.Component{constructor(){super(...arguments),this.groupList=a.createRef(),this.scaleList=a.createRef()}render(){return a.createElement("div",{className:"sidebar",id:"visual-sidebar"},a.createElement(r.default,{ref:e=>this.groupList=e}),a.createElement(s.default,{ref:e=>this.scaleList=e}))}}},1176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(132),i=n(76),l=n(220),o=n(415),c=n(88),u=n(1177),d=n(39).getInVis,p=n(86);t.default=r.connect(function(e){const t=d(e,"scene._id");return{sceneId:t,selectedId:e.getIn(["inspector","encodings","selectedId"]),selectedType:e.getIn(["inspector","encodings","selectedType"]),marks:d(e,"marks."+t+".marks")}},function(e){return{addMark:function(t,n){e(i.addMark(o.Mark(t,{_parent:n})))},selectMark:function(t){e(s.selectMark(t))},clearScene:function(){e(s.selectMark(null)),e(l.clearScene())}}})(class extends a.Component{render(){const e=this.props,t=e.sceneId,n=e.selectedId===t&&e.selectedType===s.InspectorSelectedType.SELECT_MARK,r=e.marks?e.marks:[];return a.createElement("div",{id:"layer-list",className:"expandingMenu"},a.createElement("h2",null,"Groups",a.createElement("span",{className:"new",onClick:this.props.addMark.bind(null,"group",t)},a.createElement(c.Icon,{glyph:p.plus}))),a.createElement("ul",null,a.createElement("li",{id:"scene"},a.createElement("div",{className:"edit name"+(n?" selected":""),onClick:this.props.selectMark.bind(null,t)}," Edit Scene",a.createElement(c.Icon,{glyph:p.erase,className:"delete",onClick:this.props.clearScene,"data-html":!0,"data-tip":"Clear scene","data-place":"right"})))),a.createElement("ul",null,r.map(function(t){return a.createElement(u.default,Object.assign({key:t,id:t},e))},this)))}})},1177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(132),l=n(76),o=n(88),c=n(1178),u=n(1221),d=n(1225),p=n(310),m=n(39).getInVis,g=n(86);t.default=r.connect(function(e,t){return{expandedLayers:e.getIn(["inspector","encodings","expandedLayers"]),group:m(e,"marks."+t.id)}},function(e,t){return{selectGroup:function(){e(i.selectMark(t.id))},deleteGroup:function(n){const a=t.id;t.selectedId===a&&e(i.selectMark(t.sceneId)),e(l.deleteMark(a)),n.preventDefault(),n.stopPropagation(),s.default.hide()},updateName:function(n){e(l.updateMarkProperty({property:"name",value:n},t.id))},toggleGroup:function(){e(i.toggleLayers([t.id]))}}})(class extends a.Component{componentDidUpdate(){s.default.rebuild()}render(){const e=this.props,t=e.id,n=e.group,r=n.name,s=e.expandedLayers[t],l=s?"expanded":"contracted";return a.createElement("li",{className:l},a.createElement("div",{className:"name"+(e.selectedId===t&&e.selectedType===i.InspectorSelectedType.SELECT_MARK?" selected":""),onClick:e.selectGroup},a.createElement(o.Icon,{glyph:g["group-"+l],onClick:e.toggleGroup}),a.createElement(p,{value:r,save:e.updateName,onClick:e.selectGroup}),a.createElement(o.Icon,{glyph:g.trash,className:"delete",onClick:e.deleteGroup,"data-html":!0,"data-place":"right","data-tip":"Delete "+r+" and <br> everything inside it"})),s&&n.get("marks")?a.createElement("ul",{className:"group"},a.createElement(c.default,Object.assign({groupId:t},e)),a.createElement(u.default,Object.assign({groupId:t},e)),a.createElement(d.default,Object.assign({groupId:t},e))):null)}})},1178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(165),l=n(132),o=n(264),c=n(88),u=n(366),d=n(39).getInVis,p=n(86);t.default=r.connect(function(e,t){const n=t.groupId,a=d(e,"marks."+n+".axes"),r=d(e,"marks."+n+".legends");return{scales:d(e,"scales"),guides:a.concat(r).map(function(t){return d(e,"guides."+t)}).filter(function(e){return!!e})}},function(e,t){return{selectGuide:function(t){e(l.selectGuide(t))},deleteGuide:function(n,a,r){const o=t.groupId;n===a&&e(l.selectMark(o)),e(i.deleteGuide({groupId:o},a)),r.preventDefault(),r.stopPropagation(),s.default.hide()}}})(class extends a.Component{componentDidUpdate(){s.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",null,a.createElement("li",{className:"header"},"Guides "),e.guides.map(function(r){const s=r._id;let i;r._gtype===o.GuideType.Axis?i=(r=r).scale:r._gtype===o.GuideType.Legend&&(i=(r=r)[r._type]);const d=u(e.scales.getIn([i,"name"])),m=u(r._gtype);return a.createElement("li",{key:s},a.createElement("div",{style:{paddingLeft:"26px"},className:"name"+(t===s&&n===l.InspectorSelectedType.SELECT_GUIDE?" selected":""),onClick:e.selectGuide.bind(null,s)},d+" "+m,a.createElement(c.Icon,{glyph:p.trash,className:"delete",onClick:e.deleteGuide.bind(null,t,s),"data-tip":"Delete "+d+" "+m,"data-place":"right"})))}))}})},1179:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-group-open",use:"mark-group-open-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="mark-group-open"><g transform="rotate(90 50 50)"><polygon points="14.019,14.02 85.981,50.004 14.019,85.98" /></g></symbol>'});r.add(s);e.exports=s},1180:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-group-closed",use:"mark-group-closed-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="mark-group-closed"><g><polygon points="14.019,14.02 85.981,50.004 14.019,85.98" /></g></symbol>'});r.add(s);e.exports=s},1181:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-rect",use:"mark-rect-usage",viewBox:"0 0 14 17.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 14 17.5" id="mark-rect"><path fill-rule="evenodd" clip-rule="evenodd" d="M10,6v7c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V6c0-0.55-0.45-1-1-1h-2  C10.45,5,10,5.45,10,6z M5,1v12c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V1c0-0.55-0.45-1-1-1H6C5.45,0,5,0.45,5,1z M0,9v4  c0,0.55,0.45,1,1,1h2c0.55,0,1-0.45,1-1V9c0-0.55-0.45-1-1-1H1C0.45,8,0,8.45,0,9z" />\r\n\x3c!-- <text x="0" y="29" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Dilon Choudhury</text><text x="0" y="34" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1182:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-line",use:"mark-line-usage",viewBox:"0 0 100 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" id="mark-line"><polygon stroke-width="2" points="8.744,100 0,97.362 17.2,35.373 60.077,52.269 91.799,0 99.607,4.739 63.892,63.589 23.08,47.506" /></symbol>'});r.add(s);e.exports=s},1183:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-area",use:"mark-area-usage",viewBox:"0 0 111 122.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 111 122.5" id="mark-area"><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 86.0322264L29.5264445 51.6235581 45.3423478 59.340291 61.8834325 28.2855206 80.0690932 39.7393663 100 10 100 86.0322266 10 86.0322264ZM10 86.0322264" /></g>\r\n\x3c!-- <text x="0" y="113" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Pham Thi Dieu Linh</text><text x="0" y="118" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1184:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-text",use:"mark-text-usage",viewBox:"0 0 24 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 30" id="mark-text"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.905 3.068c-1.076 0-1.903 0.364-2.47 1.091 -0.571 0.729-0.858 1.787-0.858 3.18v0.083H1.686V0h20.629v7.422h-2.863V7.339c0-1.383-0.288-2.438-0.861-3.17 -0.577-0.734-1.408-1.101-2.495-1.101h-0.852v16.47c0 0.75 0.098 1.224 0.298 1.407 0.198 0.186 0.647 0.278 1.338 0.278h1.637V24H5.629v-2.776h1.52c0.658 0 1.089-0.076 1.296-0.233 0.211-0.158 0.313-0.644 0.313-1.452V3.068H7.905z" />\r\n\x3c!-- <text x="0" y="39" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Plainicon</text><text x="0" y="44" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1185:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"mark-symbol",use:"mark-symbol-usage",viewBox:"0 0 100 125",content:'<symbol xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" id="mark-symbol"><title>Bars plot</title><g transform="translate(0,-952.36217)"><circle cx="39.75" cy="1028.3622" r="25" fill-opacity="1" stroke="none" /><circle cx="57.5" cy="982.86218" r="18" fill-opacity="1" stroke="none" /></g>\r\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Gonzalo Bravo</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1186:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"trash",use:"trash-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="trash"><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z" /></symbol>'});r.add(s);e.exports=s},1187:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"plus",use:"plus-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="plus"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z" /></symbol>'});r.add(s);e.exports=s},1188:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"undo",use:"undo-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="undo"><path d="M1664 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z" /></symbol>'});r.add(s);e.exports=s},1189:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"redo",use:"redo-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="redo"><path d="M1664 256v448q0 26-19 45t-45 19h-448q-42 0-59-40-17-39 14-69l138-138q-148-137-349-137-104 0-198.5 40.5t-163.5 109.5-109.5 163.5-40.5 198.5 40.5 198.5 109.5 163.5 163.5 109.5 198.5 40.5q119 0 225-52t179-147q7-10 23-12 14 0 25 9l137 138q9 8 9.5 20.5t-7.5 22.5q-109 132-264 204.5t-327 72.5q-156 0-298-61t-245-164-164-245-61-298 61-298 164-245 245-164 298-61q147 0 284.5 55.5t244.5 156.5l130-129q29-31 70-14 39 17 39 59z" /></symbol>'});r.add(s);e.exports=s},1190:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"type-nominal",use:"type-nominal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-nominal"><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" /></symbol>'});r.add(s);e.exports=s},1191:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"type-ordinal",use:"type-ordinal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-ordinal"><path d="M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zm-725 1105l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5t-50.5 162.5q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10t-174.5-10q-8 0-26.5 4t-21.5 4q-80 14-188 14z" /></symbol>'});r.add(s);e.exports=s},1192:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"type-quantitative",use:"type-quantitative-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-quantitative"><path d="M991 1024l64-256h-254l-64 256h254zm768-504l-56 224q-7 24-31 24h-327l-64 256h311q15 0 25 12 10 14 6 28l-56 224q-5 24-31 24h-327l-81 328q-7 24-31 24h-224q-16 0-26-12-9-12-6-28l78-312h-254l-81 328q-7 24-31 24h-225q-15 0-25-12-9-12-6-28l78-312h-311q-15 0-25-12-9-12-6-28l56-224q7-24 31-24h327l64-256h-311q-15 0-25-12-10-14-6-28l56-224q5-24 31-24h327l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h254l81-328q7-24 32-24h224q15 0 25 12 9 12 6 28l-78 312h311q15 0 25 12 9 12 6 28z" /></symbol>'});r.add(s);e.exports=s},1193:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"type-temporal",use:"type-temporal-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="type-temporal"><path d="M192 1664h288v-288h-288v288zm352 0h320v-288h-320v288zm-352-352h288v-320h-288v320zm352 0h320v-320h-320v320zm-352-384h288v-288h-288v288zm736 736h320v-288h-320v288zm-384-736h320v-288h-320v288zm768 736h288v-288h-288v288zm-384-352h320v-320h-320v320zm-352-864v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm736 864h288v-320h-288v320zm-384-384h320v-288h-320v288zm384 0h288v-288h-288v288zm32-480v-288q0-13-9.5-22.5t-22.5-9.5h-64q-13 0-22.5 9.5t-9.5 22.5v288q0 13 9.5 22.5t22.5 9.5h64q13 0 22.5-9.5t9.5-22.5zm384-64v1280q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1280q0-52 38-90t90-38h128v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h384v-96q0-66 47-113t113-47h64q66 0 113 47t47 113v96h128q52 0 90 38t38 90z" /></symbol>'});r.add(s);e.exports=s},1194:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"prev",use:"prev-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="prev"><path d="M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z" /></symbol>'});r.add(s);e.exports=s},1195:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"next",use:"next-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="next"><path d="M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z" /></symbol>'});r.add(s);e.exports=s},1196:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"close",use:"close-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="close"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z" /></symbol>'});r.add(s);e.exports=s},1197:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"hamburger",use:"hamburger-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="hamburger"><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z" /></symbol>'});r.add(s);e.exports=s},1198:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"erase",use:"erase-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="erase"><path d="M13.2,3.5L8,8.7l7.2,7.2l5.2-5.2c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6C15.1,2.8,13.9,2.8,13.2,3.5z" /><path fill="none" stroke="#000000" stroke-width="2" stroke-linejoin="round" stroke-miterlimit="10" d="M11.3,20l9.2-9.2  c0.7-0.7,0.7-1.9,0-2.6l-4.6-4.6c-0.7-0.7-1.9-0.7-2.6,0l-9.7,9.7c-0.7,0.7-0.7,1.9,0,2.6L7.7,20l0,0H22" /></symbol>'});r.add(s);e.exports=s},1199:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"export",use:"export-usage",viewBox:"0 0 16 20",content:'<symbol xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:a="http://ns.adobe.com/AdobeSVGViewerExtensions/3.0/" viewBox="0 0 16 20" overflow="visible" id="export"><switch><foreignObject requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" x="0" y="0" width="1" height="1"></foreignObject><g i:extraneous="self"><g i:layer="yes" i:dimmedPercent="50" i:rgbTrio="#4F008000FFFF"><path i:knockout="Off" d="M9,0v2h3L7,7l2,2l5-5v3h2V0H9z M14,14H2V2h4V0H0v16h16v-6h-2V14z" /></g></g></switch>\r\n\x3c!-- <text x="0" y="31" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Tahsin Tahil</text><text x="0" y="36" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1200:function(e,t){e.exports='<html>\r\n  <head>\r\n    <title>Vega Scaffold</title>\r\n    <script src="https://vega.github.io/vega-editor/vendor/d3.min.js"><\/script>\r\n    <script src="https://vega.github.io/vega/vega.min.js"><\/script>\r\n  </head>\r\n  <body>\r\n    <div id="vis"></div>\r\n  </body>\r\n  <script type="text/javascript">\r\n  // parse a spec and create a visualization view\r\n  function parse(spec) {\r\n    vg.parse.spec(spec, function(error, chart) {\r\n      chart({el:"#vis"}).update();\r\n    });\r\n  }\r\n  parse(INJECT_SPEC);\r\n  <\/script>\r\n</html>'},1201:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"select",use:"select-usage",viewBox:"0 0 512 512",content:'<symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="select"><g><path d="m106 120c8.284 0 15-6.716 15-15 0-41.355 33.645-75 75-75s75 33.645 75 75c0 8.284 6.716 15 15 15s15-6.716 15-15c0-57.897-47.103-105-105-105s-105 47.103-105 105c0 8.284 6.716 15 15 15z" /><path d="m159.292 510.417c2.083 1.041 4.379 1.583 6.708 1.583h210c3.979 0 7.793-1.58 10.607-4.394 22.179-22.179 34.393-51.667 34.393-83.032v-137.574c0-24.813-20.187-45-45-45-5.857 0-11.449 1.137-16.586 3.181-5.205-19.096-22.691-33.181-43.414-33.181-5.857 0-11.449 1.137-16.586 3.181-5.205-19.096-22.691-33.181-43.414-33.181-5.258 0-10.305.915-15 2.58v-79.58c0-24.813-20.187-45-45-45s-45 20.187-45 45v167h-15c-24.813 0-45 20.187-45 45v82.918c0 22.96 6.38 45.419 18.451 64.949 12.07 19.531 29.305 35.281 49.841 45.55zm-38.292-193.417c0-8.271 6.729-15 15-15h15v64.486c0 8.284 6.716 15 15 15s15-6.716 15-15v-261.486c0-8.271 6.729-15 15-15s15 6.729 15 15v212c0 8.284 6.716 15 15 15s15-6.716 15-15v-90c0-8.271 6.729-15 15-15s15 6.729 15 15v90c0 8.284 6.716 15 15 15s15-6.716 15-15v-60c0-8.271 6.729-15 15-15s15 6.729 15 15v60c0 8.284 6.716 15 15 15s15-6.716 15-15v-30c0-8.271 6.729-15 15-15s15 6.729 15 15v137.574c0 21.337-7.593 41.508-21.499 57.426h-199.824c-30.115-16.423-48.677-47.565-48.677-82.082z" /></g></symbol>'});r.add(s);e.exports=s},1202:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"sort",use:"sort-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort"><path d="M1408 1088q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45zm0-384q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z" /></symbol>'});r.add(s);e.exports=s},1203:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"sort-alpha-asc",use:"sort-alpha-asc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-alpha-asc"><path d="M1255 408h177l-72-218-12-47q-2-16-2-20h-4l-3 20q0 1-3.5 18t-7.5 29zm-455 1032q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm836 119v233h-584v-90l369-529q12-18 21-27l11-9v-3q-2 0-6.5.5t-7.5.5q-12 3-30 3h-232v115h-120v-229h567v89l-369 530q-6 8-21 26l-11 11v2l14-2q9-2 30-2h248v-119h121zm89-897v106h-288v-106h75l-47-144h-243l-47 144h75v106h-287v-106h70l230-662h162l230 662h70z" /></symbol>'});r.add(s);e.exports=s},1204:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"sort-alpha-desc",use:"sort-alpha-desc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-alpha-desc"><path d="M1255 1432h177l-72-218-12-47q-2-16-2-20h-4l-3 20q0 1-3.5 18t-7.5 29zm-455 8q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm925 246v106h-288v-106h75l-47-144h-243l-47 144h75v106h-287v-106h70l230-662h162l230 662h70zm-89-1151v233h-584v-90l369-529q12-18 21-27l11-9v-3q-2 0-6.5.5t-7.5.5q-12 3-30 3h-232v115h-120v-229h567v89l-369 530q-6 8-21 26l-11 10v3l14-3q9-1 30-1h248v-119h121z" /></symbol>'});r.add(s);e.exports=s},1205:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"sort-numeric-asc",use:"sort-numeric-asc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-numeric-asc"><path d="M1474 1313q0-63-44-116t-103-53q-52 0-83 37t-31 94 36.5 95 104.5 38q50 0 85-27t35-68zm-610 127q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm750-69q0 62-13 121.5t-41 114-68 95.5-98.5 65.5-127.5 24.5q-62 0-108-16-24-8-42-15l39-113q15 7 31 11 37 13 75 13 84 0 134.5-58.5t66.5-145.5h-2q-21 23-61.5 37t-84.5 14q-106 0-173-71.5t-67-172.5q0-105 72-178t181-73q123 0 205 94.5t82 252.5zm-30-717v114h-469v-114h167v-432q0-7 .5-19t.5-17v-16h-2l-7 12q-8 13-26 31l-62 58-82-86 192-185h123v654h165z" /></symbol>'});r.add(s);e.exports=s},1206:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"sort-numeric-desc",use:"sort-numeric-desc-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="sort-numeric-desc"><path d="M1474 289q0-63-44-116t-103-53q-52 0-83 37t-31 94 36.5 95 104.5 38q50 0 85-27t35-68zm-610 1151q0 12-10 24l-319 319q-10 9-23 9-12 0-23-9l-320-320q-15-16-7-35 8-20 30-20h192v-1376q0-14 9-23t23-9h192q14 0 23 9t9 23v1376h192q14 0 23 9t9 23zm720 238v114h-469v-114h167v-432q0-7 .5-19t.5-17v-16h-2l-7 12q-8 13-26 31l-62 58-82-86 192-185h123v654h165zm30-1331q0 62-13 121.5t-41 114-68 95.5-98.5 65.5-127.5 24.5q-62 0-108-16-24-8-42-15l39-113q15 7 31 11 37 13 75 13 84 0 134.5-58.5t66.5-145.5h-2q-21 23-61.5 37t-84.5 14q-106 0-173-71.5t-67-172.5q0-105 72-178t181-73q123 0 205 94.5t82 252.5z" /></symbol>'});r.add(s);e.exports=s},1207:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"filter",use:"filter-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="filter"><path d="M1595 295q17 41-14 70l-493 493v742q0 42-39 59-13 5-25 5-27 0-45-19l-256-256q-19-19-19-45v-486l-493-493q-31-29-14-70 17-39 59-39h1280q42 0 59 39z" /></symbol>'});r.add(s);e.exports=s},1208:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"formula",use:"formula-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="formula"><path d="M384 1536q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm384 0q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm-384-384q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm768 768v-384q0-52-38-90t-90-38-90 38-38 90v384q0 52 38 90t90 38 90-38 38-90zm-384-768q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm384-320v-256q0-26-19-45t-45-19h-1280q-26 0-45 19t-19 45v256q0 26 19 45t45 19h1280q26 0 45-19t19-45zm0 320q0-53-37.5-90.5t-90.5-37.5-90.5 37.5-37.5 90.5 37.5 90.5 90.5 37.5 90.5-37.5 37.5-90.5zm128-640v1536q0 52-38 90t-90 38h-1408q-52 0-90-38t-38-90v-1536q0-52 38-90t90-38h1408q52 0 90 38t38 90z" /></symbol>'});r.add(s);e.exports=s},1209:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"aggregate",use:"aggregate-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="aggregate"><path d="M576 736v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm512 0v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zm512 0v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68z" /></symbol>'});r.add(s);e.exports=s},1210:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"download",use:"download-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="download"><path d="M1344 1344q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h465l135 136q58 56 136 56t136-56l136-136h464q40 0 68 28t28 68zm-325-569q17 41-14 70l-448 448q-18 19-45 19t-45-19l-448-448q-31-29-14-70 17-39 59-39h256v-448q0-26 19-45t45-19h256q26 0 45 19t19 45v448h256q42 0 59 39z" /></symbol>'});r.add(s);e.exports=s},1211:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"bold",use:"bold-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="bold"><path d="M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82-108-43.5-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34v-65.5q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68.5.5t67.5.5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72-64.5 57.5-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5-163.5 48.5-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z" /></symbol>'});r.add(s);e.exports=s},1212:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"italic",use:"italic-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="italic"><path d="M384 1662l17-85q6-2 81.5-21.5t111.5-37.5q28-35 41-101 1-7 62-289t114-543.5 52-296.5v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7 120.5 2.5q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5t-108.5 33.5q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5t-77.5 355.5q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z" /></symbol>'});r.add(s);e.exports=s},1213:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"open",use:"open-usage",viewBox:"10 25 80 50",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="10 25 80 50" id="open"><title>12.5</title><desc>Created with Sketch.</desc><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><path d="M84.3765045,45.2316481 L77.2336539,75.2316205 L77.2336539,75.2316205 C77.1263996,75.6820886 76.7239081,76 76.2608477,76 L17.8061496,76 C17.2538649,76 16.8061496,75.5522847 16.8061496,75 C16.8061496,74.9118841 16.817796,74.8241548 16.8407862,74.739091 L24.7487983,45.4794461 C24.9845522,44.607157 25.7758952,44.0012839 26.6794815,44.0012642 L83.4036764,44.0000276 L83.4036764,44.0000276 C83.9559612,44.0000156 84.4036862,44.4477211 84.4036982,45.0000058 C84.4036999,45.0780163 84.3945733,45.155759 84.3765045,45.2316481 L84.3765045,45.2316481 Z M15,24 L26.8277004,24 L26.8277004,24 C27.0616369,24 27.2881698,24.0820162 27.4678848,24.2317787 L31.799078,27.8411064 L31.799078,27.8411064 C32.697653,28.5899189 33.8303175,29 35,29 L75,29 C75.5522847,29 76,29.4477153 76,30 L76,38 L76,38 C76,38.5522847 75.5522847,39 75,39 L25.3280454,39 L25.3280454,39 C23.0690391,39 21.0906235,40.5146929 20.5012284,42.6954549 L14.7844016,63.8477139 L14.7844016,63.8477139 C14.7267632,64.0609761 14.5071549,64.1871341 14.2938927,64.1294957 C14.1194254,64.0823423 13.9982484,63.9240598 13.9982563,63.7433327 L13.9999561,25 L14,25 C14.0000242,24.4477324 14.4477324,24.0000439 15,24.0000439 L15,24 Z" /></g></g>\r\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Landan Lloyd</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1214:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"save",use:"save-usage",viewBox:"0 0 362 372.5",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 362 372.5" fill-rule="evenodd" id="save"><g><path class="fil0" d="M24 0l54 0 0 114 206 0 0 -114 27 0 51 55 0 284c0,13 -10,23 -23,23l-315 0c-13,0 -24,-10 -24,-23l0 -315c0,-13 11,-24 24,-24zm24 152l266 0 0 189 -266 0 0 -189z" /><rect class="fil0" x="208" y="1" width="50.8754" height="78.352" /><rect class="fil0" x="79" y="181" width="204.238" height="22.2849" /><rect class="fil0" x="79" y="238" width="204.238" height="22.2849" /><rect class="fil0" x="79" y="294" width="204.238" height="22.2849" /></g>\r\n\x3c!-- <text x="0" y="377" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Ghiyats Mujtaba</text><text x="0" y="382" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1215:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"align-left",use:"align-left-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-left"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z" /></symbol>'});r.add(s);e.exports=s},1216:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"align-center",use:"align-center-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-center"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19h-640q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h640q26 0 45 19t19 45z" /></symbol>'});r.add(s);e.exports=s},1217:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"align-right",use:"align-right-usage",viewBox:"0 0 1792 1792",content:'<symbol viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" id="align-right"><path d="M1792 1344v128q0 26-19 45t-45 19h-1664q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1280q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1536q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19h-1152q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1152q26 0 45 19t19 45z" /></symbol>'});r.add(s);e.exports=s},1218:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"vertical-align-bottom",use:"vertical-align-bottom-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-bottom"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M70.833,58.333L50,83.333l-20.833-25H70.833z M43.75,0h12.5v58.333h-12.5V0z" />\r\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1219:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"vertical-align-center",use:"vertical-align-center-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-center"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M70.833,20.833L50,45.833l-20.833-25H70.833z M70.833,79.167H29.167l20.833-25L70.833,79.167z   M43.75,0h12.5v20.833h-12.5V0z M56.25,100h-12.5V79.167h12.5V100z" />\r\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1220:function(e,t,n){var a=n(36),r=n(37),s=new a({id:"vertical-align-top",use:"vertical-align-top-usage",viewBox:"0 0 100 125",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 125" id="vertical-align-top"><path d="M100,95.833V4.167C100,0,100,0,95.833,0H4.167C0,0,0,0,0,4.167v91.667C0,100,0,100,4.167,100h91.667  C100,100,100,100,100,95.833z M56.25,100h-12.5V41.667h12.5V100z M70.833,41.667H29.167l20.833-25L70.833,41.667z" />\r\n\x3c!-- <text x="0" y="115" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">Created by Thomas Helbig</text><text x="0" y="120" fill="#000000" font-size="5px" font-weight="bold" font-family="\'Helvetica Neue\', Helvetica, Arial-Unicode, Arial, Sans-serif">from the Noun Project</text> --\x3e\r\n</symbol>'});r.add(s);e.exports=s},1221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(132),l=n(76),o=n(88),c=n(39).getInVis,u=n(310),d=n(86);t.default=r.connect(function(e,t){return{marks:c(e,"marks."+t.groupId+".marks").map(function(t){return c(e,"marks."+t)})}},function(e,t){return{selectMark:function(t){e(i.selectMark(t))},deleteMark:function(n,a,r){n===a&&e(i.selectMark(t.groupId)),e(l.deleteMark(a)),r.preventDefault(),r.stopPropagation(),s.default.hide()},updateName:function(t,n){e(l.updateMarkProperty({property:"name",value:n},t))}}})(class extends a.Component{componentDidUpdate(){s.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",null,a.createElement("li",{className:"header"},"Marks "),e.marks.map(function(r,s){const l=r._id,c=r.name;return a.createElement("li",{key:l},a.createElement("div",{className:"name"+(t===l&&n===i.InspectorSelectedType.SELECT_MARK?" selected":""),onClick:e.selectMark.bind(null,l)},a.createElement(o.Icon,{glyph:d[r.type]}),a.createElement(u,{value:c,save:e.updateName.bind(null,l),onClick:e.selectMark.bind(null,l)}),a.createElement(o.Icon,{glyph:d.trash,className:"delete",onClick:e.deleteMark.bind(null,t,l),"data-tip":"Delete "+c,"data-place":"right"})))},this))}})},1225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(132),l=n(88),o=n(222),c=n(1226),u=n(310),d=n(86);t.default=r.connect(function(e,t){const n=e.getIn(["vis","present","marks",String(t.groupId),"_interactions"]);return{interactions:n?n.map(function(t){return e.getIn(["vis","present","interactions",String(t)])}):[]}},function(e){return{selectInteraction:function(t){e(i.selectInteraction(t))},deleteInteraction:function(t,n,a,r){t===a&&e(i.selectInteraction(n)),e(o.deleteInteraction({groupId:n},a)),r.preventDefault(),r.stopPropagation(),s.default.hide()},updateName:function(t,n){e(o.updateInteractionName(n,t))}}})(class extends a.Component{componentDidUpdate(){s.default.rebuild()}render(){const e=this.props,t=e.selectedId,n=e.selectedType;return a.createElement("div",{className:"interaction-list"},a.createElement("li",{className:"header"},"Interactions ",a.createElement(c.default,{groupId:this.props.groupId})),e.interactions.map(function(r){const s=r.id,o=r.name;return a.createElement("li",{key:s},a.createElement("div",{className:"name"+(t===s&&n===i.InspectorSelectedType.SELECT_INTERACTION?" selected":""),onClick:e.selectInteraction.bind(null,s)},a.createElement(l.Icon,{glyph:d.select}),a.createElement(u,{value:o,save:e.updateName.bind(null,s),onClick:e.selectInteraction.bind(null,s)}),a.createElement(l.Icon,{glyph:d.trash,className:"delete",onClick:e.deleteInteraction.bind(null,t,s),"data-tip":"Delete "+o,"data-place":"right"})))},this))}})},1226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(419),i=n(578),l=n(222),o=n(309),c=n(132),u=n(88),d=n(263),p=n(155),m=n(370),g=n(86);t.default=r.connect(function(e,t){const n=s.getScaleInfoForGroup(e,t.groupId),a=e.getIn(["vega","isParsing"]),r=Boolean(!a&&p.view&&(n.xScaleName&&n.xFieldName||n.yScaleName&&n.yFieldName)),i=e.getIn(["vis","present","marks",String(t.groupId)]),l=e.getIn(["inspector","encodings"]),o=l.get("selectedId");let u=null;return l.get("selectedType")===c.InspectorSelectedType.SELECT_INTERACTION&&(u=i.get("_interactions").find(e=>e===o)),u||(u=i.get("_interactions").find(t=>{const n=e.getIn(["vis","present","interactions",String(t)]);return!Boolean(n.selection&&n.application)})),{canDemonstrate:r,interaction:u?e.getIn(["vis","present","interactions",String(u)]):null,isInteractionSelected:!!u&&u===o,groupName:d.default(i.name)}},function(e){return{addInteraction:t=>{const n=i.Interaction({groupId:t}),a=l.addInteraction(n);return e(a),e(o.addInteractionToGroup(a.meta,t)),a.meta},selectInteraction:t=>{e(c.selectInteraction(t))}}})(class extends a.Component{constructor(e){super(e),this.mainViewSignalValues={}}componentDidUpdate(e,t){!e.canDemonstrate&&this.props.canDemonstrate&&(this.restoreSignalValues(this.props.groupName),this.onSignal(this.props.groupName,"grid_translate_anchor",(e,t)=>this.onMainViewGridSignal(e,t)),this.onSignal(this.props.groupName,"grid_translate_delta",(e,t)=>this.onMainViewGridSignal(e,t)),this.onSignal(this.props.groupName,"brush_x",(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,"brush_y",(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,"points_tuple",(e,t)=>this.onMainViewPointSignal(e,t)),this.onSignal(this.props.groupName,"points_toggle",(e,t)=>this.onMainViewPointSignal(e,t)))}updateIsDemonstrating(){const e=this.mainViewSignalValues.brush_x&&this.mainViewSignalValues.brush_y&&this.mainViewSignalValues.brush_x[0]!==this.mainViewSignalValues.brush_x[1]&&this.mainViewSignalValues.brush_y[0]!==this.mainViewSignalValues.brush_y[1],t=Boolean(this.mainViewSignalValues.points_tuple),n=e||t;if(this.props.canDemonstrate&&n&&!this.props.isInteractionSelected)if(this.props.interaction)this.props.selectInteraction(this.props.interaction.id);else{const e=this.props.addInteraction(this.props.groupId);this.props.selectInteraction(e)}}onMainViewPointSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating())}onMainViewIntervalSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating())}onMainViewGridSignal(e,t){this.mainViewSignalValues[e]=t}restoreSignalValues(e){for(let t of["brush_x","brush_y","points_tuple","points_toggle"])this.mainViewSignalValues[t]&&m.setSignalInGroup(p.view,e,t,this.mainViewSignalValues[t])}onSignal(e,t,n){m.onSignalInGroup(p.view,e,t,n)}render(){return this.props.canDemonstrate?a.createElement(u.Icon,{glyph:g.plus,onClick:()=>this.props.addInteraction(this.props.groupId)}):null}})},1227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(132),i=n(310),l=n(39),o=(l.getIn,l.getInVis);t.default=r.connect(function(e,t){return{selectedId:e.getIn(["inspector","encodings","selectedId"]),scales:o(e,"scales")}},function(e){return{selectScale:function(t){e(s.selectScale(t))}}})(class extends a.Component{render(){const e=this.props,t=[...e.scales.values()];return a.createElement("div",{id:"scale-list"},a.createElement("h2",null,"Scales"),a.createElement("ul",null,t.map(function(t){const n=t.get("_id"),r=t.get("name");return a.createElement("li",{key:n,onClick:e.selectScale.bind(null,n)},a.createElement("div",{className:e.selectedId===n?"selected scale name":"scale name"},a.createElement(i,{value:r})))},this)))}})},1228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(54),i=n(132),l=n(874),o=n(1229),c=n(1234),u=n(1237),d=n(1238),p=n(1241),m=n(1242),g=n(1245),h=n(1246),f={AreaInspector:o.AreaInspector,GuideInspector:c.GuideInspector,LineInspector:u.LineInspector,RectInspector:d.RectInspector,ScaleInspector:p.ScaleInspector,SymbolInspector:g.SymbolInspector,TextInspector:h.TextInspector,InteractionInspector:m.InteractionInspector,GroupInspector:d.RectInspector},y=n(366),v=n(39).getInVis;t.InspectorSidebar=r.connect(function(e,t){const n=e.getIn(["inspector","encodings"]),a=n.get("selectedId"),r=n.get("selectedType"),l=r===s.getType(i.baseSelectMark),o=r===s.getType(i.selectGuide),c=r===s.getType(i.selectScale),u=r===s.getType(i.selectInteraction),d=l?v(e,`marks.${a}`):o?v(e,`guides.${a}`):c?v(e,`scales.${a}`):u?v(e,`interactions.${a}`):null;let p,m=[];return l&&(m=(m=[...(m=v(e,"interactions")).values()]).filter(e=>d._parent==e.get("groupId")).map(e=>e.get("name"))),d&&d.from&&d.from.data&&(p=v(e,"pipelines."+v(e,"datasets."+d.from.data).get("_parent")).get("name")),{selectedId:a,isMark:l,isGuide:o,isScale:c,isInteraction:u,name:d&&d.get("name"),from:p,markType:d&&d.get("type"),guideType:d&&d.get("_gtype"),interactionList:m}})(class extends a.Component{render(){const e=this.props,t=e.selectedId,n=e.from;let r,s,i;t&&(e.isMark&&e.markType?(r=y(e.markType),s=l.PrimType.MARKS):e.isGuide?(r="Guide",s=l.PrimType.GUIDES):e.isScale?(r="Scale",s=l.PrimType.SCALES):e.isInteraction&&(r="Interaction",s=l.PrimType.INTERACTIONS),i=f[r+"Inspector"]);const o=e.isMark?a.createElement("div",{className:"property-group property"},a.createElement("h3",{className:"label-long"},"Pipeline"),a.createElement("div",{className:"control"},n||"None")):null,c=this.props.interactionList.length&&e.isMark?a.createElement("div",{className:"property-group"},a.createElement("h3",{className:"label-long"},"Interactions"),a.createElement("div",{className:"property"},this.props.interactionList.length?this.props.interactionList.map(e=>a.createElement("span",{key:e,className:"interaction name"},e)):null)):null,u=i?a.createElement("div",{className:"inner"},o,a.createElement(i,{primId:t,primType:s,guideType:e.guideType}),c):null,d=e.name||"Properties";return a.createElement("div",{className:"sidebar",id:"inspector"},a.createElement("h2",null,d),u)}})},1229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(875),r=n(19),s=n(40),i=n(156);t.AreaInspector=s.connect()(class extends r.Component{render(){const e=this.props;return r.createElement("div",null,r.createElement(i.Property,Object.assign({name:"x",type:"number",canDrop:!0},e),r.createElement("h3",{className:"label"},"X Position")),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Y Position"),r.createElement(i.Property,Object.assign({name:"y",label:"Start",type:"number",canDrop:!0},e)),r.createElement(i.Property,Object.assign({name:"y2",label:"End",type:"number",canDrop:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Fill"),r.createElement(i.Property,Object.assign({name:"fill",label:"Color",type:"color",canDrop:!0},e)),r.createElement(i.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",canDrop:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Stroke"),r.createElement(i.Property,Object.assign({name:"stroke",label:"Color",type:"color",canDrop:!0},e)),r.createElement(i.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",canDrop:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Line Strength"),r.createElement(i.Property,Object.assign({name:"interpolate",label:"Interpolate",type:"select",opts:a,canDrop:!0},e)),r.createElement(i.Property,Object.assign({name:"tension",label:"Tension",type:"number",canDrop:!0},e))))}})},1230:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39).getInVis,r='<span class="field source" contenteditable="false">',s="</span>",i="datum.",l="{{",o="}}",c=new RegExp(l+i+"*"+o),u=n(19),d=n(1231),p=n(372),m=n(40);t.AutoComplete=m.connect(function(e,t){const n=a(e,"datasets."+t.dsId+"._schema");return{fields:n?n.keySeq().toJS():[]}})(class extends u.Component{constructor(e){super(e),this.handleChange=(e=>{const t=e.target.value||e.target.innerHTML||"";this.props.updateFn(this.fromHtml(t)),this.setState({html:t})}),this.handleDragOver=(e=>(e.preventDefault&&e.preventDefault(),!1)),this.handleDrop=(e=>{const t=e.dataTransfer,n=(t.getData("dsId"),JSON.parse(t.getData("fieldDef"))),a=this.state.html+r+n.name+s;this.props.updateFn(this.fromHtml(a)),this.setState({html:a})}),this.state={html:this.toHtml(e.value||"")}}componentDidMount(){p.findDOMNode(this),this.handleChange,this.props.fields}toHtml(e){return"expr"===this.props.type?this.exprToHtml(e):this.tmplToHtml(e)}fromHtml(e){return"expr"===this.props.type?this.htmlToExpr(e):this.htmlToTmpl(e)}exprToHtml(e){return e=e.split(i).join(""),this.wrapStr(e,r,s)}htmlToExpr(e){return e=(e=e.split(r).join("")).split(s).join(""),this.htmlDecode(this.wrapStr(e,i,""))}tmplToHtml(e){let t,n,a,o=e.search(c);for(;-1!==o;)t=o+l.length+i.length,a=(n=e.substring(t)).search("}}"),o=(e=e.substring(0,o)+n.substring(0,a)+n.substring(a+2)).search(c);return e=this.wrapStr(e,r,s)}htmlToTmpl(e){return e=(e=e.split(r).join("")).split(s).join(""),this.htmlDecode(this.wrapStr(e,l+i,o))}wrapStr(e,t,n){const a=this.props.fields,r=t.length+n.length;let s,i,l;for(const o of a)for(s=e.search(o),i=0;-1!==s;)s+=i,e=e.substring(0,s)+t+e.substring(s,s+o.length)+n+e.substring(s+o.length),i=s+o.length+r,s=(l=e.substring(i)).search(o);return e}htmlDecode(e){const t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}render(){return u.createElement("div",{onDragOver:this.handleDragOver,onDrop:this.handleDrop},u.createElement(d.default,{className:"autocomplete",html:this.state.html,disabled:!1,onChange:this.handleChange}))}})},1233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(310),r=n(39).getInVis,s=n(155),i=n(19),l=n(40),o=n(262),c=n(370),u=n(420),d=n(88);t.FormInputProperty=l.connect(function(e,t){const n=t.signal;return n?{value:r(e,"signals."+n+".value")}:{value:t.value}},function(e,t){const n=t.signal;return{setSignal:function(t){n&&e(o.setSignal(t,n))}}})(class extends i.Component{constructor(e){super(e),this.signal=((e,t)=>{this.props.setSignal(t),this.setState({value:t})}),this.state={value:e.value}}componentWillMount(){this.onSignal(!1)}componentWillReceiveProps(e){const t=this.props,n=t.signal,a=e.signal;n!==a&&(this.offSignal(n),a&&this.onSignal(a)),(a||e.value!==t.value)&&this.setState({value:a?u.default.get(a):e.value})}componentWillUnmount(){this.offSignal(!1)}onSignal(e){(e=e||this.props.signal)&&c.onSignal(e,this.signal)}offSignal(e){(e=e||this.props.signal)&&c.offSignal(e,this.signal)}handleChange(e){const t=this.props,n=t.type,a=t.signal;let r=e.target?e.target.value:e;"number"!==n&&"range"!==n||(r=+r),a&&(u.default.set(a,r,!1),s.update()),this.setState({value:r})}colorSupport(){const e=document.createElement("input");return e.setAttribute("type","color"),"text"!==e.type}render(){const e=this.props,t=e.name,n=e.id,r=e.min,s=e.max,l=e.disabled||e.group,o=l?"":this.state.value,c=e.onChange||this.handleChange.bind(this),u=e.onBlur,p=this.colorSupport();switch(e.type){case"checkbox":return i.createElement("input",{id:n,name:t,type:"checkbox",checked:o,disabled:l,onChange:c,onBlur:u});case"text":return i.createElement("input",{id:n,name:t,type:"text",value:o,disabled:l,onChange:c,onBlur:u});case"number":return i.createElement("input",{id:n,name:t,type:"number",value:o,min:r,max:s,disabled:l,onChange:c,onBlur:u});case"range":return i.createElement("div",null,i.createElement("input",{id:n,name:t,type:"range",value:o,min:r,max:s,step:e.step,disabled:l,onChange:c,onBlur:u}),i.createElement(a,{value:o,save:c}));case"color":return i.createElement("div",null,i.createElement("input",{id:n,name:t,type:p?"color":"text",value:o,disabled:l,onChange:c,onBlur:u}),p?i.createElement(a,{value:o,save:c}):null);case"select":return i.createElement("select",{id:n,name:t,value:o,disabled:l,onChange:c,onBlur:u},e.opts.map(function(e){return i.createElement("option",{key:e,value:e},e)},this));case"toggle":const m=e.opts.find(function(e){return e!==o});return i.createElement("div",null,i.createElement("button",{type:"button",id:n,className:(o===e.opts[0]?"":"button-secondary ")+"button",onClick:c.bind(this,m)},i.createElement(d.Icon,{glyph:e.glyph})));case"selection":return i.createElement("div",null,e.opts.map(function(t,a){return i.createElement("button",{key:t,type:"button",id:n,className:(o===t?"button-secondary ":"")+"button",onClick:c.bind(this,t)},i.createElement(d.Icon,{glyph:e.glyphs[a]}))},this));default:return null}}})},1234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(1235),i=n(1236),l=n(264),o=n(165);t.GuideInspector=r.connect(function(e,t){return{}},function(e){return{updateGuideProperty:function(t,n,a){e(o.updateGuideProperty({property:n,value:a},t))}}})(class extends a.Component{handleChange(e){const t=this.props.primId,n=e.target,a=n.name;let r="checkbox"===n.type?n.checked:n.value;r=""===r||isNaN(+r)?r:+r,this.props.updateGuideProperty(t,a,r)}render(){const e=this.props,t=e.guideType;return t===l.GuideType.Axis?a.createElement(s.AxisInspector,Object.assign({},e,{handleChange:this.handleChange})):t===l.GuideType.Legend?a.createElement(i.LegendInspector,Object.assign({},e,{handleChange:this.handleChange})):null}})},1235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(876),i=n(156);t.AxisInspector=r.connect()(class extends a.Component{render(){const e=this.props,t=e.handleChange,n="properties.axis.",r="properties.title.",l="properties.labels.",o="properties.grid.",c="properties.ticks.";return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Axis"),a.createElement(i.Property,Object.assign({name:"orient",label:"Orient",type:"select",opts:["top","bottom","left","right"],onChange:t},e)),a.createElement(s.MoreProperties,{label:"Axis"},a.createElement(i.Property,Object.assign({name:n+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:n+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Title"),a.createElement(i.Property,Object.assign({name:"title",label:"Text",type:"text",onChange:t},e)),a.createElement(i.Property,Object.assign({name:r+"fontSize",label:"Font Size",type:"number"},e)),a.createElement(s.MoreProperties,{label:"Title"},a.createElement(i.Property,Object.assign({name:r+"fill",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:"titleOffset",label:"Offset",type:"number",onChange:t},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Labels"),a.createElement(i.Property,Object.assign({name:l+"fontSize",label:"Font Size",type:"number"},e)),a.createElement(i.Property,Object.assign({name:l+"angle",label:"Angle",type:"number",min:"0",max:"360"},e)),a.createElement(s.MoreProperties,{label:"Label"},a.createElement(i.Property,Object.assign({name:l+"fill",label:"Fill",type:"color"},e)))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Grid"),a.createElement(i.Property,Object.assign({name:"grid",label:"Grid",type:"checkbox",onChange:t},e)),a.createElement(i.Property,Object.assign({name:"layer",label:"Layer",type:"select",opts:["back","front"],onChange:t},e)),a.createElement(s.MoreProperties,{label:"Grid"},a.createElement(i.Property,Object.assign({name:o+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:o+"strokeOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05"},e)),a.createElement(i.Property,Object.assign({name:o+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),a.createElement("div",{className:"property-group last"},a.createElement(s.MoreProperties,{label:"Ticks",header:"true"},a.createElement(i.Property,Object.assign({name:"ticks",label:"Number of Ticks",type:"number",onChange:t},e)),a.createElement(i.Property,Object.assign({name:c+"stroke",label:"Color",type:"color"},e)),a.createElement(i.Property,Object.assign({name:c+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)),a.createElement(i.Property,Object.assign({name:"tickPadding",label:"Padding",type:"range",onChange:t},e)),a.createElement(i.Property,Object.assign({name:"tickSize",label:"Size",type:"number",onChange:t},e)))))}})},1236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39).getInVis,r=n(19),s=n(40),i=n(876),l=n(156),o=n(416);t.LegendInspector=s.connect(function(e,t){const n=a(e,"guides."+t.primId),r=n.get("_type");return{legendType:r,scaleType:a(e,"scales."+n.get(r)).get("type")}})(class extends r.Component{render(){const e=this.props,t=e.handleChange,n=e.legendType,a=e.scaleType,s="properties.title.",c="properties.gradient.",u="properties.symbols.",d=r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Labels"),r.createElement(l.Property,Object.assign({name:"properties.labels.fontSize",label:"Font Size",type:"number"},e)),r.createElement(i.MoreProperties,{label:"Label"},r.createElement(l.Property,Object.assign({name:"properties.labels.fill",label:"Fill",type:"color"},e))));return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Legend"),r.createElement(l.Property,Object.assign({name:"orient",label:"Orient",type:"select",opts:["left","right"],onChange:t},e)),r.createElement(i.MoreProperties,{label:"Legend"},r.createElement(l.Property,Object.assign({name:"properties.legend.stroke",label:"Color",type:"color"},e)),r.createElement(l.Property,Object.assign({name:"properties.legend.strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Title"),r.createElement(l.Property,Object.assign({name:"title",label:"Text",type:"text",onChange:t},e)),r.createElement(l.Property,Object.assign({name:s+"fontSize",label:"Font Size",type:"number"},e)),r.createElement(i.MoreProperties,{label:"Title"},r.createElement(l.Property,Object.assign({name:s+"fill",label:"Color",type:"color"},e)))),"fill"!==n&&"stroke"!==n||"ordinal"===a?r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Symbols"),"shape"!==n?r.createElement(l.Property,Object.assign({name:u+"shape",label:"Shape",type:"select",opts:o.SymbolShapes},e)):null,"size"!==n?r.createElement(l.Property,Object.assign({name:u+"size",label:"Size",type:"number"},e)):null,"fill"!==n?r.createElement(l.Property,Object.assign({name:u+"fill",label:"Fill",type:"color"},e)):null,"stroke"!==n?r.createElement(l.Property,Object.assign({name:u+"stroke",label:"Stroke",type:"color"},e)):null,r.createElement(i.MoreProperties,{label:"Symbol"},r.createElement(l.Property,Object.assign({name:u+"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05"},e)),r.createElement(l.Property,Object.assign({name:u+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e)))),d):r.createElement("div",null,d,r.createElement("div",{className:"property-group"},r.createElement(i.MoreProperties,{label:"Gradient",header:"true"},r.createElement(l.Property,Object.assign({name:c+"stroke",label:"Color",type:"color"},e)),r.createElement(l.Property,Object.assign({name:c+"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25"},e))))))}})},1237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(875),r=n(19),s=n(156);t.LineInspector=class extends r.Component{render(){const e=this.props;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Position"),r.createElement(s.Property,Object.assign({name:"x",label:"X",type:"number",canDrop:!0},e)),r.createElement(s.Property,Object.assign({name:"y",label:"Y",type:"number",canDrop:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Stroke"),r.createElement(s.Property,Object.assign({name:"stroke",label:"Color",type:"color",canDrop:!0},e)),r.createElement(s.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",canDrop:!0},e))),r.createElement("div",{className:"property-group"},r.createElement("h3",null,"Line Strength"),r.createElement(s.Property,Object.assign({name:"interpolate",label:"Interpolate",type:"select",opts:a,canDrop:!0},e)),r.createElement(s.Property,Object.assign({name:"tension",label:"Tension",type:"number",canDrop:!0},e))))}}},1238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(1239),s=n(156);t.RectInspector=class extends a.Component{render(){const e=this.props;return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"X Position"),a.createElement(r.ExtentProperty,Object.assign({exType:"x"},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Y Position"),a.createElement(r.ExtentProperty,Object.assign({exType:"y"},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Fill"),a.createElement(s.Property,Object.assign({name:"fill",label:"Color",type:"color",canDrop:!0},e)),a.createElement(s.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",canDrop:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Stroke"),a.createElement(s.Property,Object.assign({name:"stroke",label:"Color",type:"color",canDrop:!0},e)),a.createElement(s.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",canDrop:!0},e))))}}},1239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39),r=(a.getIn,a.getInVis),s=n(19),i=n(40),l=n(76),o=n(588),c=n(156),u=n(1240);t.ExtentProperty=i.connect(function(e,t){const n=t.exType,a=t.primId,s=r(e,"marks."+a+".encode.update");let i,l;return Object.values(o.default[n]).forEach(function(e){const t=e.name;s[t]._disabled||(i?i!==t&&(l=t):i=t)}),{start:i,end:l,startDisabled:s[i].band||s[i].group,endDisabled:s[l].band||s[l].group}},function(e,t){return{setExtent:function(n,a){const r=t.primId;e(l.setMarkExtent({oldExtent:n,newExtent:a},r)),e(l.resetMarkVisual(a,r))}}})(class extends s.Component{handleChange(e){const t=this.props,n=t.exType,a=e.target,r=a.name,s=a.value,i=t[r],l=o.default[n],c=l.CENTER.name,u=l.SPAN.name,d=t.end;t.setExtent(i,s),s===c&&d!==u&&t.setExtent(d,u)}render(){const e=this.props,t=e.exType,n=o.default[t],a=n.CENTER.name,r=n.SPAN.label,i=Object.values(n),l=e.start,d=e.end;return s.createElement("div",null,s.createElement(c.Property,Object.assign({name:l,type:"number",canDrop:!0,firstChild:!0,disabled:e.startDisabled},e),s.createElement("div",{className:"label-long label"},s.createElement("select",{name:"start",value:l,onChange:this.handleChange},i.filter(function(e){return e.name!==d}).map(function(e){return s.createElement("option",{key:e.name,value:e.name},e.label)}))),s.createElement(u.SpatialPreset,Object.assign({className:"extra",name:l},e))),s.createElement(c.Property,Object.assign({name:d,type:"number",canDrop:!0,firstChild:!0,disabled:e.endDisabled},e),s.createElement("br",null),s.createElement("div",{className:"label-long label"},l===a?s.createElement("label",{htmlFor:"end"},r):s.createElement("select",{name:"end",value:d,onChange:this.handleChange},i.filter(function(e){return e.name!==l&&e.name!==a}).map(function(e){return s.createElement("option",{key:e.name,value:e.name},e.label)}))),s.createElement(u.SpatialPreset,Object.assign({className:"extra",name:d},e))))}})},1240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39).getInVis,r=n(19),s=n(40),i=n(76);t.SpatialPreset=s.connect(function(e,t){const n=t.primId,r=t.name,s=a(e,"marks."+n+".encode.update."+r);return{field:s.field,band:s.band,group:s.group,scale:a(e,"scales."+s.scale)}},function(e,t){const n=t.primId;return{setPreset:function(t,a){e(i.setMarkVisual({property:t,def:a},n))},reset:function(t){e(i.resetMarkVisual(t,n))}}})(class extends r.Component{handleChange(e){const t=this.props,n=t.name,a=t.scale,r=n.indexOf("x")>=0?"width":"height";e.target.checked?t.setPreset(n,"width"===n||"height"===n?{scale:a.get("_id"),band:!0}:{group:r}):t.reset(n)}render(){const e=this.props,t=e.name,n=e.scale,a=t.indexOf("x")>=0?"width":"height";return e.field?null:"width"===t||"height"===t?n&&"ordinal"===n.get("type")&&!n.get("points")?r.createElement("label",null,r.createElement("input",{type:"checkbox",name:t,checked:e.band,onChange:this.handleChange})," Automatic"):null:r.createElement("label",null,r.createElement("input",{type:"checkbox",name:t,checked:e.group,onChange:this.handleChange})," Set to group ",a)}})},1241:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39).getInVis,r=n(19),s=n(40);t.ScaleInspector=s.connect(function(e,t){return{scale:a(e,"scales."+t.primId)}})(class extends r.Component{render(){const e=this.props.scale;return r.createElement("div",null,r.createElement("div",{className:"property-group"},r.createElement("h3",{className:"label"},"Placeholder"),r.createElement("ul",null,r.createElement("li",null,"name: ",e.get("name")),r.createElement("li",null,"type: ",e.get("type")))))}})},1242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(578),i=n(222),l=n(419),o=n(1243),c=n(263),u=n(1244),d=n(155),p=n(370);function m(e,t,n,a,r){if(r){const n=[],a=s.IntervalSelection({id:"brush",label:"Brush",field:"xy"}),r=s.IntervalSelection({id:"brush_y",label:"Brush (y-axis)",field:"y"}),i=s.IntervalSelection({id:"brush_x",label:"Brush (x-axis)",field:"x"}),o=new Set(e.map(e=>e.type));if(o.has("symbol")&&(t.xScaleType&&t.yScaleType&&n.push(a),t.yScaleType&&n.push(r),t.xScaleType&&n.push(i)),o.has("rect")&&(t.xScaleType===l.ScaleSimpleType.DISCRETE&&n.push(i),t.yScaleType===l.ScaleSimpleType.DISCRETE&&n.push(r)),o.has("area")){const a=e.find(e=>"area"===e.type).toJS();a.encode&&a.encode.update&&a.encode.update.orient&&a.encode.update.orient.value&&("vertical"===a.encode.update.orient.value&&t.xScaleType?n.push(i):"horizontal"===a.encode.update.orient.value&&t.yScaleType&&n.push(r))}return o.has("line"),[...new Set(n)]}return[s.PointSelection({ptype:"single",id:"single",label:"Single point",field:"_vgsid_"}),s.PointSelection({ptype:"multi",id:"multi",label:"Multi point",field:"_vgsid_"}),s.PointSelection({ptype:"single",id:"single_project",label:"Single point (by field)",field:a&&a.selection&&a.selection.field&&"_vgsid_"!==a.selection.field?a.selection.field:n[0]}),s.PointSelection({ptype:"multi",id:"multi_project",label:"Multi point (by field)",field:a&&a.selection&&a.selection.field&&"_vgsid_"!==a.selection.field?a.selection.field:n[0]})]}function g(e,t,n,a,r,i,l){const o=[];return t.forEach(e=>{o.push(s.MarkApplication({id:"color_"+l,label:"Color",targetMarkName:c.default(e.name),isDemonstratingInterval:l,propertyName:"fill",defaultValue:"#797979"})),o.push(s.MarkApplication({id:"opacity_"+l,label:"Opacity",targetMarkName:c.default(e.name),isDemonstratingInterval:l,propertyName:"opacity",defaultValue:"0.2"})),"symbol"===e.type&&o.push(s.MarkApplication({id:"size_"+l,label:"Size",targetMarkName:c.default(e.name),isDemonstratingInterval:l,propertyName:"size",defaultValue:30}))}),l&&o.push(s.ScaleApplication({id:"panzoom",label:"Pan and zoom",scaleInfo:n})),a.filter(t=>t._id!==e).forEach(e=>{const t=e._id,n=r.get(t).find(e=>e.from&&e.from.data);if(n){const t=c.default(e.name),a=c.default(n.name),r=i.get(String(n.from.data)).name;o.push(s.TransformApplication({id:"filter_"+t+"_"+l,label:"Filter "+e.name,targetGroupName:t,datasetName:r,targetMarkName:a,isDemonstratingInterval:l}))}}),o}t.InteractionInspector=r.connect(function(e,t){const n=e.getIn(["vis","present","interactions",String(t.primId)]),a=n.get("groupId"),r=l.getScaleInfoForGroup(e,a),s=e.getIn(["vis","present","marks",String(a)]),i=c.default(s.name),o=e.getIn(["vis","present","marks"]).filter(e=>"group"===e.type).mapEntries(([e,t])=>[Number(e),t]),u=o.map(t=>t.marks.map(t=>e.getIn(["vis","present","marks",String(t)])).filter(e=>!("group"===e.type||0===e.name.indexOf("lyra")))),p=u.get(a),h=e.getIn(["vis","present","datasets"]);let f=[];if(p.length&&p[0].from&&p[0].from.data){const e=String(p[0].from.data);f=h.get(e).get("_schema").keySeq().toArray()}const y=e.getIn(["vega","isParsing"]),v=Boolean(!y&&d.view&&(r.xScaleName&&r.xFieldName||r.yScaleName&&r.yFieldName)),{selectionPreviewsPoint:b,selectionPreviewsInterval:_,applicationPreviewsPoint:x,applicationPreviewsInterval:E}=function(e,t,n,a,r,s,i){const l=r.get(e);return{selectionPreviewsPoint:m(l,t,n,i,!1),selectionPreviewsInterval:m(l,t,n,i,!0),applicationPreviewsPoint:g(e,l,t,a,r,s,!1),applicationPreviewsInterval:g(e,l,t,a,r,s,!0)}}(a,r,f,o,u,h,n);return{interaction:n,groups:o,scaleInfo:r,group:s,groupName:i,datasets:h,marksOfGroups:u,fieldsOfGroup:f,canDemonstrate:v,selectionPreviewsPoint:b,selectionPreviewsInterval:_,applicationPreviewsPoint:x,applicationPreviewsInterval:E}},function(e){return{setSelection:(t,n)=>{e(i.setSelection(t,n))},setApplication:(t,n)=>{e(i.setApplication(t,n))}}})(class extends a.Component{constructor(e){super(e),this.previewRefs={},this.mainViewSignalValues={},this.state={isDemonstratingInterval:!1,mainViewSignalValues:{}}}componentDidMount(){this.onSignal(this.props.groupName,"grid_translate_anchor",(e,t)=>this.onMainViewGridSignal(e,t)),this.onSignal(this.props.groupName,"grid_translate_delta",(e,t)=>this.onMainViewGridSignal(e,t)),this.onSignal(this.props.groupName,"brush_x",(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,"brush_y",(e,t)=>this.onMainViewIntervalSignal(e,t)),this.onSignal(this.props.groupName,"points_tuple",(e,t)=>this.onMainViewPointSignal(e,t)),this.onSignal(this.props.groupName,"points_toggle",(e,t)=>this.onMainViewPointSignal(e,t))}getSelectionPreviews(){return this.state.isDemonstratingInterval?this.props.selectionPreviewsInterval:this.props.selectionPreviewsPoint}getApplicationPreviews(){return this.state.isDemonstratingInterval?this.props.applicationPreviewsInterval:this.props.applicationPreviewsPoint}updatePreviewSignals(e,t){this.getSelectionPreviews().forEach(n=>{this.previewRefs[n.id]&&this.previewRefs[n.id].current&&this.previewRefs[n.id].current.setPreviewSignal(e,t)}),this.getApplicationPreviews().forEach(n=>{this.previewRefs[n.id]&&this.previewRefs[n.id].current&&this.previewRefs[n.id].current.setPreviewSignal(e,t)})}updateIsDemonstrating(){const e=this.mainViewSignalValues.brush_x&&this.mainViewSignalValues.brush_y&&this.mainViewSignalValues.brush_x[0]!==this.mainViewSignalValues.brush_x[1]&&this.mainViewSignalValues.brush_y[0]!==this.mainViewSignalValues.brush_y[1],t=Boolean(this.mainViewSignalValues.points_tuple),n=e||!t;this.state.isDemonstratingInterval!==n&&this.setState({isDemonstratingInterval:n})}onMainViewPointSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating(),this.updatePreviewSignals(e,t))}onMainViewIntervalSignal(e,t){this.mainViewSignalValues[e]!==t&&(this.mainViewSignalValues[e]=t,this.updateIsDemonstrating(),this.updatePreviewSignals(e,t))}onMainViewGridSignal(e,t){this.mainViewSignalValues[e]=t,this.updatePreviewSignals(e,t)}onSignal(e,t,n){p.onSignalInGroup(d.view,e,t,n)}onClickInteractionPreview(e){switch(e.type){case"point":case"interval":this.props.interaction&&this.props.setSelection(e,this.props.interaction.id);break;case"mark":case"scale":case"transform":this.props.interaction&&this.props.setApplication(e,this.props.interaction.id)}}getFieldOptions(e){const t=this.props.fieldsOfGroup.map(e=>a.createElement("option",{key:e,value:e},e));return a.createElement("div",null,a.createElement("select",{value:e.field,onChange:t=>this.onSelectProjectionField(e,t.target.value)},t))}onSelectProjectionField(e,t){const n=e.set("field",t);this.props.setSelection(n,this.props.interaction.id)}getSignalBubbles(e,t){const n=[],r=e=>{console.log(e.target.dataset.signal),e.dataTransfer.setData("signalName",e.target.dataset.signal)};return t?(e.xScaleName&&n.push(a.createElement("div",{draggable:!0,className:"signal",onDragStart:r,"data-signal":`brush_${e.xScaleName}`},`brush_${e.xScaleName}`)),e.yScaleName&&n.push(a.createElement("div",{draggable:!0,className:"signal",onDragStart:r,"data-signal":`brush_${e.yScaleName}`},`brush_${e.yScaleName}`)),e.xFieldName&&n.push(a.createElement("div",{draggable:!0,className:"signal",onDragStart:r,"data-signal":`brush_${e.xFieldName}`},`brush_${e.xFieldName}`)),e.yFieldName&&n.push(a.createElement("div",{draggable:!0,className:"signal",onDragStart:r,"data-signal":`brush_${e.yFieldName}`},`brush_${e.yFieldName}`))):n.push(a.createElement("div",{draggable:!0,className:"signal",onDragStart:r,"data-signal":"points_tuple"},"points")),n}render(){const e=this.props.interaction,t=e.application;return a.createElement("div",null,a.createElement("div",{className:"preview-controller"},a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Selections"),a.createElement("div",{className:"preview-scroll"},this.getSelectionPreviews().map(t=>(this.previewRefs[t.id]||(this.previewRefs[t.id]=a.createRef()),a.createElement("div",{key:t.id,className:e&&e.selection&&e.selection.id===t.id?"selected":"",onClick:()=>this.onClickInteractionPreview(t)},a.createElement("div",{className:"preview-label"},t.label,t.id.includes("project")?this.getFieldOptions(t):""),a.createElement(u.default,{ref:this.previewRefs[t.id],id:`preview-${t.id}`,groupName:this.props.groupName,preview:t})))))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Applications"),a.createElement("div",{className:"preview-scroll"},this.getApplicationPreviews().map(t=>(this.previewRefs[t.id]||(this.previewRefs[t.id]=a.createRef()),a.createElement("div",{key:t.id,className:e&&e.application&&e.application.id===t.id?"selected":"",onClick:()=>this.onClickInteractionPreview(t)},a.createElement("div",{className:"preview-label"},t.label),a.createElement(u.default,{ref:this.previewRefs[t.id],id:`preview-${t.id}`,groupName:this.props.groupName,preview:t}))))))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Signals"),a.createElement("div",{className:"signals-container"},this.getSignalBubbles(this.props.scaleInfo,this.state.isDemonstratingInterval))),t&&"mark"===t.type?a.createElement(o.InteractionMarkApplicationProperty,{interactionId:e.id,groupId:e.groupId,markApplication:t}):null)}})},1243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(46),s=n(40),i=n(263),l=n(222),o=n(156);t.InteractionMarkApplicationProperty=s.connect(function(e,t){const n=e.getIn(["vis","present","marks",String(t.groupId)]);return{marks:r.Map(n.marks.map(t=>e.getIn(["vis","present","marks",String(t)])).filter(e=>!("group"===e.type||0===e.name.indexOf("lyra"))).map(e=>[i.default(e.name),e]))}},function(e){return{setApplication:(t,n)=>{e(l.setApplication(t,n))}}})(class extends a.Component{constructor(e){super(e)}onDefaultValueChange(e){const t=e.target&&e.target.value;t&&this.props.setApplication(this.props.markApplication.set("defaultValue",t),this.props.interactionId)}render(){const e=this.props.markApplication.propertyName,t=this.props.markApplication.targetMarkName,n=this.props.marks.filter((e,n)=>n===t).valueSeq().first(),r=this.props.markApplication.defaultValue,s={primId:n._id,primType:"marks"};switch(e){case"size":s.type="number",s.min="0",s.max="500";break;case"fill":s.type="color";break;case"opacity":s.type="range",s.min="0",s.max="1",s.step="0.05"}return a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Mark Application"),a.createElement("h5",null,"Selected ",e),a.createElement(o.Property,Object.assign({name:e,label:e,canDrop:!0},s)),a.createElement("h5",null,"Default ",e),a.createElement(o.Property,Object.assign({name:"default"+e,label:e,onChange:e=>this.onDefaultValueChange(e),value:r,disabled:!1},s)))}})},1244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(28),s=n(419),i=n(370),l=n(155);class o extends a.Component{constructor(e){super(e),this.width=60,this.height=60}previewToSpec(e){const t=e.targetGroupName||this.props.groupName,n=s.cleanSpecForPreview(l.export(!1,!0),t);switch(e.type){case"point":case"interval":return s.addSelectionToScene(n,this.props.groupName,e);case"mark":case"scale":case"transform":return s.addApplicationToScene(n,this.props.groupName,e)}return n}componentDidMount(){const e=this.previewToSpec(this.props.preview);this.view=new r.View(r.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}componentDidUpdate(e){if(e.groupName!==this.props.groupName){const e=this.previewToSpec(this.props.preview);this.view=new r.View(r.parse(e),{renderer:"svg",container:`#${this.props.groupName}-${this.props.id}`}),this.view.width(this.width),this.view.height(this.height),this.view.runAsync()}}scaleSignalValues(e,t){const n=this.width/640,a=this.height/360;return"brush_x"===e?t.map(e=>e*n):"brush_y"===e?t.map(e=>e*a):"grid_translate_delta"===e&&t?{x:t.x*n,y:t.y*a}:t}setPreviewSignal(e,t){if(this.view){const n=this.scaleSignalValues(e,t);i.setSignalInGroup(this.view,this.props.groupName,e,n),this.view.runAsync()}}getPreviewSignal(e){if(this.view)return i.getSignalInGroup(this.view,this.props.groupName,e)}render(){return a.createElement("div",{id:`${this.props.groupName}-${this.props.id}`,className:"interaction-preview"})}}t.InteractionPreview=o,t.default=o},1245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(156),s=n(416);t.SymbolInspector=class extends a.Component{render(){const e=this.props;return a.createElement("div",null,a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Position"),a.createElement(r.Property,Object.assign({name:"x",label:"X",type:"number",canDrop:!0},e)),a.createElement(r.Property,Object.assign({name:"y",label:"Y",type:"number",canDrop:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Geometry"),a.createElement(r.Property,Object.assign({name:"shape",label:"Shape",type:"select",opts:s.SymbolShapes,canDrop:!0},e)),a.createElement(r.Property,Object.assign({name:"size",label:"Size",type:"number",canDrop:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Fill"),a.createElement(r.Property,Object.assign({name:"fill",label:"Color",type:"color",canDrop:!0},e)),a.createElement(r.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",canDrop:!0},e))),a.createElement("div",{className:"property-group"},a.createElement("h3",null,"Stroke"),a.createElement(r.Property,Object.assign({name:"stroke",label:"Color",type:"color",canDrop:!0},e)),a.createElement(r.Property,Object.assign({name:"strokeWidth",label:"Width",type:"range",min:"0",max:"10",step:"0.25",canDrop:!0},e))))}}},1246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(577);const a=n(86),r=n(39).getInVis,s=n(19),i=n(40),l=n(76),o=n(577),c=n(156);t.TextInspector=i.connect(function(e,t){return{dsId:r(e,"marks."+t.primId+".from.data")}},function(e,t){return{updateTextAttributes:function(n,a){e(l.setMarkVisual({property:n,def:{signal:a}},t.primId))},updateText:function(n){n.target&&n.target.value,e(l.setMarkVisual({property:"text",def:{signal:n}},t.primId))}}})(class extends s.Component{constructor(e){super(e)}render(){const e=this.props,t=e.dsId;return s.createElement("div",null,s.createElement("div",{className:"property-group"},s.createElement(c.Property,Object.assign({name:"text.signal",type:"autocomplete",autoType:"tmpl",dsId:t,onChange:e.updateText},e),s.createElement("h3",{className:"label"},"Text"))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Font"),s.createElement(c.Property,Object.assign({name:"font",label:"Face",type:"select",opts:o.TextFonts,canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"fontSize",label:"Size",type:"number",canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"fontWeight",label:"Weight",type:"toggle",glyph:a.bold,opts:o.TextFontWeights.map(e=>String(e)),canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"fontStyle",label:"Style",type:"toggle",glyph:a.italic,opts:o.TextFontStyles,canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"fill",label:"Color",type:"color",canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"fillOpacity",label:"Opacity",type:"range",min:"0",max:"1",step:"0.05",canDrop:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Offset"),s.createElement(c.Property,Object.assign({name:"dx",label:"X",type:"number",canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"dy",label:"Y",type:"number",canDrop:!0},e))),s.createElement("div",{className:"property-group"},s.createElement("h3",null,"Align"),s.createElement(c.Property,Object.assign({name:"align",label:"Horizontal",type:"selection",glyphs:[a["align-left"],a["align-center"],a["align-right"]],opts:o.TextAlignments,canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"baseline",label:"Vertical",type:"selection",glyphs:[a["vertical-align-top"],a["vertical-align-center"],a["vertical-align-bottom"]],opts:o.TextBaselines,canDrop:!0},e)),s.createElement(c.Property,Object.assign({name:"angle",label:"Rotation",type:"number",canDrop:!0},e))))}})},1247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40);t.default=r.connect(function(e,t){return{groups:e.getIn(["vis","present","marks"]).filter(e=>"group"===e.type).valueSeq().map(e=>e).toArray()}})(class extends a.Component{constructor(e){super(e),this.state={activeGroupId:null}}setActiveGroup(e){this.setState({activeGroupId:e})}render(){return a.createElement(a.Fragment,null)}})},1248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(1249),s=n(1264);t.PipelinesToolbar=class extends a.PureComponent{constructor(e){super(e),this.openModal=(()=>this.setState({modalIsOpen:!0})),this.closeModal=(()=>this.setState({modalIsOpen:!1})),this.state={modalIsOpen:!1}}render(){return a.createElement("div",{id:"pipeline-toolbar"},a.createElement("h2",null,"Data Pipelines"),a.createElement(r.PipelineList,{openModal:this.openModal}),a.createElement(s.default,{modalIsOpen:this.state.modalIsOpen,closeModal:this.closeModal}))}}},1249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(132),i=n(265),l=n(88),o=n(1250),c=n(39).getInVis,u=n(310),d=n(86);const p={selectPipeline:s.selectPipeline,updatePipeline:i.updatePipelineProperty};t.PipelineList=r.connect(function(e){return{pipelines:c(e,"pipelines"),selectedId:e.getIn(["inspector","pipelines","selectedId"])}},p)(class extends a.Component{render(){const e=this.props.pipelines.keySeq().toArray(),t=this.props.pipelines.valueSeq().toArray(),n=this.props.selectedId?this.props.selectedId:e.length?e[0]:this.props.selectedId;return a.createElement("div",{id:"pipeline-list",style:{marginTop:t.length?-20:-15}},a.createElement("div",{className:"pipeline-tabs"},t.length?t.map(e=>{const t=e._id,r=e.name;return a.createElement(u,{key:t,className:"header "+(n===t?"selected":""),value:r,save:this.props.updatePipeline.bind(this,t,"name"),onClick:()=>this.props.selectPipeline(t)})}):null,a.createElement("span",{className:"new",onClick:this.props.openModal},a.createElement(l.Icon,{glyph:d.plus})," New")),e.length?e.map(e=>a.createElement(o.PipelineInspector,{key:e,id:e,selectedId:n})):a.createElement("div",{id:"pipeline-hint",onClick:this.props.openModal},"Add a new data pipeline to get started."))}})},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(1251),i=n(39).getInVis;n(86);t.PipelineInspector=r.connect(function(e,t){const n=t.id;return{pipeline:i(e,"pipelines."+n)}})(class extends a.Component{render(){const e=this.props,t=e.pipeline,n=e.id;let r;const i=+e.selectedId==+n;return i&&(r=a.createElement("div",null,a.createElement(s.default,{id:t._source,fieldsCount:6}),t._aggregates.entrySeq().map(function(e,t){return a.createElement("div",{key:t},a.createElement("p",{className:"source"},"Group By: ",e[0].split("|").join(", ")),a.createElement(s.default,{id:e[1],fieldsCount:fieldsCount}))}))),a.createElement("div",{className:"pipeline"+(i?" selected":"")},r)}})},1251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1252),r=n(19),s=n(40),i=n(1256),l=n(877),o=n(39).getInVis;t.default=s.connect(function(e,t){const n=t.id;return{dataset:o(e,"datasets."+n)}})(class extends r.Component{constructor(e){super(e),this.onPage=this.onPage.bind(this),this.state={page:0,scroll:0}}onPage(e){this.setState({page:e})}onScroll(e){e!==this.state.scroll&&this.setState({scroll:e})}render(){const e=this.props,t=e.id,n=e.dataset.get("_schema").keySeq().toArray(),s=~~(n.length/e.fieldsCount),o=Math.ceil(n.length/(s+1)),c=[];for(let e=0;e<=s;e++)c.push(r.createElement(l.default,{key:e,id:this.props.id,first:0===e,last:e===s,fieldsIndex:e,fieldsCount:o,limit:20,page:this.state.page,onPage:this.onPage,scroll:this.state.scroll,onScroll:i.throttle(250,e=>this.onScroll(e))}));return c.push(r.createElement("div",{key:"TransformList",className:"datatable-container"},r.createElement(a.default,{dsId:t}))),r.createElement("div",{className:"datatable-multi"},c)}})},1252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(1253),i=n(39).getInVis;t.default=r.connect(function(e,t){return{transforms:i(e,"datasets."+t.dsId+".transform")}})(class extends a.Component{constructor(e){super(e),this.state={expandedIndex:null}}setExpandedIndex(e){this.setState({expandedIndex:e})}render(){const e=this.props,t=e.transforms,n=!!t&&1===t.length&&"aggregate"===t[0].type,r=e.dsId;return t&&!n?a.createElement("div",{className:"transform-list"},t.map(function(e,t){return"aggregate"===e.type||"identifier"===e.type?null:a.createElement(s.default,{key:t,index:t,dsId:r,def:e,expanded:this.state.expandedIndex===t,setExpandedIndex:e=>this.setExpandedIndex(e)})},this)):null}})},1253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(154),i=n(1254),l=n(1255),o=n(366);class c extends a.Component{constructor(){super(...arguments),this.Filter=i.Filter,this.Formula=l.Formula,this.timer=null,this.resetTimer=(()=>{window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.props.setExpandedIndex(null)},1e4)}),this.expand=(()=>{this.props.setExpandedIndex(this.props.index),this.resetTimer()}),this.updateTransform=(e=>{this.props.updateTransform(e),this.resetTimer()})}componentDidMount(){this.resetTimer()}componentWillUnmount(){window.clearTimeout(this.timer)}render(){const e=this.props,t=o(e.def.type),n=this[t];return this.props.expanded?a.createElement("div",{className:"transform-inspector"},a.createElement(n,Object.assign({update:this.updateTransform},e))):a.createElement("div",{className:"transform-button",onClick:this.expand},t)}}t.TransformInspector=c,t.default=r.connect(null,function(e,t){return{updateTransform:function(n){e(s.updateTransform({index:t.index,transform:n},t.dsId))}}})(c)},1254:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(82),s=n(156);t.Filter=class extends a.Component{constructor(){super(...arguments),this.updateFilter=(e=>{const t=e.target?e.target.value:e;try{r.default(t),this.props.update({type:"filter",expr:t})}catch(e){}})}render(){const e=this.props,t=e.dsId;return a.createElement(s.Property,{type:"autocomplete",autoType:"expr",label:"Filter",primType:"datasets",primId:t,name:"transform."+e.index+".expr",dsId:t,onChange:this.updateFilter})}}},1255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(82),s=n(156);t.Formula=class extends a.Component{constructor(){super(...arguments),this.updateFormula=(e=>{const t=this.props,n=t.def,a=e.target?e.target.value:n.as,s=e.target?n.expr:e;try{r.default(s),t.update({type:"formula",as:a,expr:s})}catch(e){}})}render(){const e=this.props,t=this.updateFormula,n=e.dsId;return a.createElement("div",null,a.createElement(s.Property,{type:"autocomplete",label:"Calculate",autoType:"expr",primType:"datasets",primId:n,name:"transform."+e.index+".expr",dsId:n,onChange:t}),a.createElement(s.Property,{type:"text",label:"As",primType:"datasets",primId:n,name:"transform."+e.index+".as",onChange:t}))}}},1257:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(28),l=n(863),o=n(420),c=n(99),u=n(308),d=n(88),p=n(1258),m=n(1260),g=n(1261),h=n(1262),f=n(155),y=n(39).getInVis,v=n(86),b=n(878).QUANTITATIVE,_=i.tupleid;const x={bindChannel:l.default};t.default=r.connect(function(e,t){return{srcId:y(e,"pipelines."+y(e,"datasets."+t.dsId+"._parent")+"._source")}},x)(class extends a.Component{constructor(e){super(e),this.handleDragStart=(e=>{const t=e.target.classList;this.setState(e=>Object.assign(Object.assign({},e),{bindField:u.default(this.state.fieldDef),showAggregates:t.contains("aggregate-field")})),e.dataTransfer.setData("dsId",this.props.dsId),e.dataTransfer.setData("fieldDef",JSON.stringify(this.state.fieldDef.toJS())),e.dataTransfer.effectAllowed="link",o.default.set(c.MODE,"channels"),f.update()}),this.handleDragEnd=((e,t)=>{const n=this.props,a=o.default.get(c.SELECTED),r=o.default.get(c.CELL),s=this.state.bindField,l=_(a)&&_(r),u=s.source?n.srcId:n.dsId;try{if(l){const e=+a.mark.role.split("lyra_")[1];i.extend(s,t),n.bindChannel(u,s,e,r.key)}}catch(e){console.error("Unable to bind primitive"),console.error(e)}o.default.set(c.MODE,"handles"),o.default.set(c.CELL,{}),this.setState({bindField:null}),l||f.update()}),this.toggleTransforms=(e=>{this.setState({showAggregates:!this.state.showAggregates})}),this.state={fieldDef:null,offsetTop:null,bindField:null,showAggregates:!1}}componentWillReceiveProps(e){const t=e.def,n=e.schema;this.setState(e=>t?Object.assign(Object.assign({},e),{fieldDef:n.get(t.name),offsetTop:t.offsetTop,showAggregates:!1}):Object.assign(Object.assign({},e),{fieldDef:null,showAggregates:!1}))}componentDidUpdate(){s.default.rebuild()}render(){const e=this.props.dsId,t=this.state,n=document.querySelector(".field.source"),r=n?n.getBoundingClientRect():{height:1,width:1},s=t.fieldDef,i={top:t.offsetTop,display:s?"block":"none"},l={top:t.offsetTop,display:s&&t.showAggregates?"block":"none"},o={display:i.display,top:t.offsetTop-18,height:r.height+26,width:2*r.width},c={onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},u=s?a.createElement("div",null,a.createElement(m.default,{dsId:e,field:s}),s.mtype===b?a.createElement(d.Icon,{onClick:this.toggleTransforms,glyph:v.aggregate,width:"10",height:"10","data-tip":"Show aggregations"}):null,a.createElement("span",{className:"fieldName"},s.name),a.createElement(g.default,{dsId:e,field:s}),a.createElement(h.default,{dsId:e,field:s})):null;return a.createElement("div",{onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd},a.createElement("div",{className:"buffer full",style:o}),a.createElement("div",{style:i,draggable:!0,className:"full field "+(s&&s.source?"source":"derived")},u),a.createElement(p.AggregateList,Object.assign({handlers:c,style:l,field:s},this.props)))}})},1258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(1259),s=n(592),i=5;t.AggregateList=class extends a.Component{constructor(e){super(e),this.expand=(()=>{this.setState({fullList:!0})}),this.state={fullList:!1}}componentWillReceiveProps(e){e.field!==this.props.field&&this.setState({fullList:!1})}render(){const e=this.props,t=this.state.fullList,n=s.slice(0,t?void 0:i);return a.createElement("div",{className:"aggregates-list",style:e.style},n.map(function(t,n){return a.createElement(r.default,Object.assign({op:t,key:n,field:e.field},e.handlers))}),t?null:a.createElement("div",{className:"more full field derived",onClick:this.expand},"+ More"))}}},1259:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19);n(592);t.default=class extends a.Component{constructor(){super(...arguments),this.onDragEnd=(e=>{const t=this.props;t.onDragEnd(e,{aggregate:t.op})})}render(){const e=this.props,t=e.field,n=t?t.name:null;return a.createElement("div",{className:"full field derived aggregate-field",draggable:!0,onDragStart:e.onDragStart,onDragEnd:this.onDragEnd},a.createElement("strong",null,e.op),"_",n)}}},1260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(267),i=n(154),l=n(88),o=n(366),c=n(878),u=n(86);t.default=r.connect(null,function(e,t){return{changeType:function(){const n=t.field;let a=c.indexOf(n.mtype);a=(a+1)%c.length,e(i.changeFieldMType({field:n.name,mtype:c[a]},t.dsId))}}})(class extends a.Component{componentDidUpdate(){s.default.rebuild()}render(){const e=this.props,t=e.field.mtype;return a.createElement(l.Icon,{onClick:e.changeType,glyph:u[t],width:"10",height:"10","data-tip":o(t)+" field"})}})},1261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(154),i=n(88),l=n(86);class o extends a.Component{render(){return a.createElement(i.Icon,{onClick:this.props.filter,glyph:l.filter,width:"10",height:"10","data-tip":"Filter"})}}t.FilterIcon=o,t.default=r.connect(null,function(e,t){return{filter:function(){e(s.addTransform({type:"filter",expr:"datum."+t.field.name},t.dsId))}}})(o)},1262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(154),i=n(88),l=n(86);class o extends a.Component{render(){return a.createElement(i.Icon,{onClick:this.props.formula,glyph:l.formula,width:"10",height:"10","data-tip":"Calculate a new field"})}}t.FormulaIcon=o,t.default=r.connect(null,function(e,t){return{formula:function(){const n=t.field.name;e(s.addTransform({type:"formula",as:"calc_"+n,expr:"datum."+n},t.dsId))}}})(o)},1263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(421);t.default=class extends a.Component{render(){const e=this.props,t=e.event;if(!t)return null;const n=r.select(t.target),s=n.node(),i=s.parentNode.firstChild,l=i.getBoundingClientRect(),o=i.offsetLeft+l.width,c=n.classed("odd")?"odd":"even",u={display:"block",left:s.offsetLeft-e.scrollLeft+o,top:i.offsetTop};return a.createElement("div",{className:"full value "+c,style:u},n.text())}}},1264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(1265),s=n(40),i=n(265),l=n(307),o=n(579),c=n(221),u=n(597),d=n(877),p=n(1274),m=n(1275),g=/([\w\d_-]*)\.?[^\\\/]*$/i,h={addPipeline:i.addPipeline};class f extends a.Component{constructor(e){super(e),this.initialState={error:null,success:null,showPreview:!1,selectedExample:null,name:null,pipeline:null,dataset:null,values:null},this.state=this.initialState,this.loadURL=this.loadURL.bind(this),this.fopen=this.fopen.bind(this)}createPipeline(e){const t=e.match(g)[1];this.setState({name:t,pipeline:o.Pipeline({name:t})})}createDataset(e){const t=c.parseRaw(e),n=t.values;this.setState({values:n,dataset:l.Dataset({name:this.state.name,format:t.format,_schema:c.schema(n)})})}success(e,t){this.setState({error:null,success:e||null,showPreview:!0,selectedExample:t})}error(e){this.setState({error:e.statusText||e.message||"An error occured!",success:null,selectedExample:null})}done(e){const t=this.state;e&&null===t.error&&this.props.addPipeline(t.pipeline,t.dataset,t.values),this.setState(this.initialState),this.props.closeModal()}loadURL(e,t){this.createPipeline(e),u.get(e,(n,a)=>{a?this.error(a):(this.createDataset(n),this.success(t?null:`Succesfully imported ${e}`),this.setState({selectedExample:e}))})}fopen(e){u.read(e.target.files,(e,t)=>{this.createPipeline(t.name),this.createDataset(e),this.success(`Successfully imported ${t.name}`)})}render(){const e=this.props,t=this.state,n=t.error,s=t.success,i=t.showPreview,l=this.done.bind(this,!1),o={overlay:{display:"flex",alignItems:"center",justifyContent:"center"},content:{overflow:"hidden",top:null,bottom:null,left:null,right:null,width:"550px",height:s||n||i?"auto":"300px",padding:null}};return a.createElement(r,{isOpen:e.modalIsOpen,onRequestClose:l,contentLabel:"Pipeline Modal",style:o},a.createElement("div",{className:"pipelineModal"},a.createElement("span",{className:"closeModal",onClick:l},"close"),a.createElement("div",{className:"examples"},a.createElement("h2",null,"Example Datasets"),a.createElement("ul",null,m.map(function(e){const n=e.name,r=e.description,s=e.url,i=t.selectedExample===s?"selected":null;return a.createElement("li",{key:n,onClick:this.loadURL.bind(this,s,!0),className:i},a.createElement("p",{className:"example-name"},n),a.createElement("p",null,r))},this))),a.createElement("div",{className:"load"},a.createElement("h2",null,"Import a Dataset"),a.createElement("p",null,"Data must be in a tabular form. Supported import formats include ",a.createElement("abbr",{title:"JavaScript Object Notation"},"json"),", ",a.createElement("abbr",{title:"Comma-Separated Values"},"csv")," and ",a.createElement("abbr",{title:"Tab-Separated Values"},"tsv")),a.createElement("p",null,a.createElement("input",{type:"file",accept:".json,.tsv,.csv",onChange:this.fopen})),a.createElement("p",null,"or"),a.createElement(p.default,{loadURL:this.loadURL})),n?a.createElement("div",{className:"error-message"},n):null,s?a.createElement("div",{className:"success-message"},s):null,!i||n?null:a.createElement("div",{className:"preview"},a.createElement("h2",null,"Preview"),a.createElement(d.default,{className:"source",values:t.values,schema:t.dataset._schema,limit:20}),a.createElement("button",{className:"button button-success",onClick:this.done.bind(this,!0)},"Import"))))}}t.PipelineModal=f,t.default=s.connect(null,h)(f)},1274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19);t.default=class extends a.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(e){this.props.loadURL(e.target.url.value),e.preventDefault()}render(){return a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("input",{type:"text",name:"url",placeholder:"Enter url"}),a.createElement("button",{type:"submit",value:"Submit",className:"button"},"Load"))}}},1275:function(e,t,n){"use strict";e.exports=[{name:"Cars",description:"Vehicular data which consists of names, cylinders and displacement",url:"/data/cars.json"},{name:"Jobs",description:"Job demographics such as job type, sex and count",url:"/data/jobs.json"},{name:"Gapminder",description:"Year, country, population, fertility",url:"/data/gapminder.json"},{name:"Climate",description:"Climate attributes such as temperature by lat-long",url:"/data/climate.json"}]},1276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(88),s=n(1277),i=n(1278),l=n(1279),o=n(1280),c=n(86);t.Toolbar=class extends a.PureComponent{render(){return a.createElement("div",{className:"toolbar"},a.createElement("div",{className:"toolbar-menu"},a.createElement("input",{type:"checkbox",id:"nav-trigger",className:"nav-trigger"}),a.createElement("label",{htmlFor:"nav-trigger"},a.createElement(r.Icon,{glyph:c.hamburger})),a.createElement("div",{className:"menu"},a.createElement(s.AddMarks,null),a.createElement(o.UndoRedo,null),a.createElement(l.Persist,null),a.createElement(i.Export,null))))}}},1277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(76),i=n(415),l=n(88),o=n(589),c=n(86);const u=["rect","symbol","text","line","area"];t.AddMarks=r.connect(null,function(e,t){return{addMark:t=>{const n=i.Mark(t,{_parent:o.getClosestGroupId()});e(s.addMark(n))}}})(class extends a.Component{render(){return a.createElement("ul",{className:"add-marks"},u.map(function(e,t){return a.createElement("li",{key:e,onClick:this.props.addMark.bind(null,e)},a.createElement(l.Icon,{glyph:c[e]})," ",e)},this))}})},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(28),s=n(418),i=n(597),l=n(88),o=n(86),c={png:"canvas",svg:"svg"};t.Export=class extends a.Component{toImageURL(e){const t=s.exporter(),n=new r.View(r.parse(t),{renderer:c[e]});n.runAsync().then(()=>n.toImageURL(e).then(t=>i.download(t,e)))}toJSONURL(){const e=JSON.stringify(s.exporter(),null,2);return i.toBlob(e,"json")}toHTMLURL(){const e=JSON.stringify(s.exporter(),null,2),t=o.scaffold.replace("INJECT_SPEC",e);return i.toBlob(t,"html")}render(){return a.createElement("ul",null,a.createElement("li",null,a.createElement(l.Icon,{glyph:o.export})," Export",a.createElement("ul",null,a.createElement("li",{onClick:this.toImageURL.bind(null,"png")},"As PNG"),a.createElement("li",{onClick:this.toImageURL.bind(null,"svg")},"As SVG"),a.createElement("li",{onClick:this.toJSONURL},"As JSON"),a.createElement("li",{onClick:this.toHTMLURL},"As HTML"))))}}},1279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19),r=n(40),s=n(417),i=n(597),l=n(88),o=n(86);t.Persist=r.connect(null,{hydrate:s.hydrate})(class extends a.Component{constructor(e){super(e),this.open=this.open.bind(this)}open(){return i.fopen("json",this.props.hydrate)}save(){const e=s.persist();return i.toBlob(JSON.stringify(e),"json")}render(){return a.createElement("ul",{class:"persist"},a.createElement("li",{onClick:this.open},a.createElement(l.Icon,{glyph:o.open,className:"open",width:"15"})),a.createElement("li",{onClick:this.save},a.createElement(l.Icon,{glyph:o.save,className:"save"})))}})},1280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(86),r=n(19),s=n(40),i=n(302),l=n(88);class o extends r.PureComponent{render(){const e=this.props;return r.createElement("ul",{class:"undo-redo"},r.createElement("li",{onClick:e.undo,className:e.canUndo?"":"grey"},r.createElement(l.Icon,{glyph:a.undo,className:"undo",width:"12",height:"12"})),r.createElement("li",{onClick:e.redo,className:e.canRedo?"":"grey"},r.createElement(l.Icon,{glyph:a.redo,className:"redo",width:"12",height:"12"})))}}t.BaseUndoRedo=o,t.UndoRedo=s.connect(function(e){const t=e.vis;return{canUndo:t.past.length>0,canRedo:t.future.length>0}},i.ActionCreators)(o)},132:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(589);var s;!function(e){e.SELECT_GUIDE="SELECT_GUIDE",e.SELECT_MARK="SELECT_MARK",e.SELECT_PIPELINE="SELECT_PIPELINE",e.SELECT_SCALE="SELECT_SCALE",e.SELECT_INTERACTION="SELECT_INTERACTION"}(s=t.InspectorSelectedType||(t.InspectorSelectedType={})),t.toggleLayers=a.createStandardAction("TOGGLE_LAYERS")(),t.expandLayers=a.createStandardAction("EXPAND_LAYERS")(),t.removeLayers=a.createStandardAction("REMOVE_LAYERS")(),t.selectGuide=a.createStandardAction(s.SELECT_GUIDE)(),t.baseSelectMark=a.createStandardAction(s.SELECT_MARK)(),t.selectMark=function(e){return function(n,a){const s=r.getParentGroupIds(e,a());n(t.baseSelectMark(e,s))}},t.selectPipeline=a.createStandardAction(s.SELECT_PIPELINE)(),t.selectScale=a.createStandardAction(s.SELECT_SCALE)(),t.selectInteraction=a.createStandardAction(s.SELECT_INTERACTION)()},1323:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=n(302),r=n(28),s=n(76),i=n(220),l=n(199),o=n(415),c=n(852),u=n(221);n(1519),n(1168),n(846),n(1169);const d=e.store=l.store,p=e.ctrl=n(155),m=n(1170);d.subscribe(m.createStoreListener(d,p)),d.dispatch(i.createScene(c.Scene())),d.dispatch(s.addMark(o.Mark("group",{_parent:1}))),n(1171);const g=n(579),h=n(307),f=n(265);d.dispatch(a.ActionCreators.clearHistory()),window.location.search.indexOf("record")>-1&&(localStorage.clear(),console.log("clear")),e.vega=r,e.addData=((e,t)=>{const n=u.parseRaw(t),a=n.values,r=g.Pipeline({name:e}),s=h.Dataset({name:e,format:n.format,_schema:u.schema(a)});f.addPipeline(r,s,a)(d.dispatch)}),e.getVegaSpec=(()=>p.export())}).call(this,n(119))},1519:function(e,t){},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(218);t.addDataset=a.createStandardAction("ADD_DATASET").map((e,t)=>{const n=e._id||r.global();return e.transform.filter(e=>"identifier"===e.type).length>0||e.transform.push({type:"identifier",as:"_vgsid_"}),{payload:e.merge({_id:n}),meta:t}}),t.deleteDataset=a.createStandardAction("DELETE_DATASET")(),t.changeFieldMType=a.createStandardAction("CHANGE_FIELD_MTYPE")(),t.sortDataset=a.createStandardAction("SORT_DATASET")(),t.summarizeAggregate=a.createStandardAction("SUMMARIZE_AGGREGATE")(),t.addTransform=a.createStandardAction("ADD_DATA_TRANSFORM")(),t.updateTransform=a.createStandardAction("UPDATE_DATA_TRANSFORM")()},155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(99),s=n(418),i=n(26),l=n(417),o=n(420),c=n(367),u=(n(26),n(219)),d=n(1134),p=e.exports={view:null},m=n(370);let g=null;p.export=s.exporter,p.persist=l.persist,p.hydrate=l.hydrate,p.manipulators=function(){const e=p.export(!0),t=e.data||(e.data=[]),n=e.signals||(e.signals=[]),a=e.marks||(e.marks=[]),s=c.comparator("_idx");return n.push.apply(n,Object.values(o.api()).sort(s)),t.push({name:"bubble_cursor",transform:[{type:u("bubble_cursor"),lyra_cell:{signal:r.CELL},lyra_mouse:{signal:r.MOUSE}}]}),a.push(i.BUBBLE_CURSOR),a.push.apply(a,i.BUBBLE_CURSOR_TIP),t.push({name:"dummy_data",values:[{x:0,y:0},{x:100,y:100}]}),e},p.parse=function(e){return e=e||"#vis",g&&g.cancel(),(g=new d(function(e,t){const n=this;setTimeout(function(){n.cancelled||e(a.parse(p.manipulators()))},10)})).then(function(t){p.view=new a.View(t,{renderer:"svg"}).initialize(e).logLevel(a.Warn).hover(),m.register(),p.update(),g=null})},p.update=function(){p.view&&p.view.runAsync&&"function"==typeof p.view.runAsync&&p.view.runAsync()}},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(39),r=a.getIn,s=a.getInVis,i=n(19),l=n(40),o=n(76),c=n(874),u=n(1230),d=n(1233);t.Property=l.connect(function(e,t){if(!t.primId)return{};const n=s(e,t.primType+"."+t.primId);let a,i;t.name&&(t.primType===c.PrimType.MARKS?(a="encode.update."+t.name,i=r(n,"from.data")):a=t.name);const l=r(n,a+".scale"),o=r(n,a+".field"),u=l&&s(e,"scales."+l+".name");return{group:r(n,a+".group"),signal:r(n,a+".signal"),value:r(n,a),field:o,scale:l,srcField:!(!i||!o)&&s(e,"datasets."+i+"._schema."+o+".source"),scaleName:u}},function(e,t){return{unbind:function(){e(o.resetMarkVisual(t.name,t.primId))}}})(class extends i.Component{render(){const e=this.props,t=e.name,n=e.label,a=e.type,r=e.scale,s=e.field,l=e.unbind;let o,c,p,m;if(i.Children.forEach(e.children,function(e){const t=e&&e.props.className;"extra"===t?m=e:"control"===t?p=e:("label"===a||t&&-1!==t.indexOf("label"))&&(o=e)}),o=o||i.createElement("label",{htmlFor:t},n),c=r?i.createElement("div",{className:"scale",onClick:l},e.scaleName):null,!(p=s?i.createElement("div",{className:"field "+(e.srcField?"source":"derived"),onClick:l},s):p))switch(a){case"autocomplete":p=i.createElement(u.AutoComplete,{type:e.autoType,updateFn:e.onChange,value:e.value,dsId:e.dsId});break;default:p=i.createElement(d.FormInputProperty,Object.assign({},e))}m&&(m=i.createElement("div",{className:"extra"},m));const g="property"+(e.canDrop?" can-drop":"")+(e.firstChild?" first-child":"");return i.createElement("div",{className:g},o,i.createElement("div",{className:"control"},c,p),m)}})},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(218);t.addGuide=a.createStandardAction("ADD_GUIDE").map(e=>{const t=e._id||r.global();return{payload:e.merge({_id:t}),meta:t}}),t.deleteGuide=a.createStandardAction("DELETE_GUIDE")(),t.updateGuideProperty=a.createStandardAction("UPDATE_GUIDE_PROPERTY")()},166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(219);t.propSg=function(e,t,n){return r(t+"_"+e+"_"+n)},t.convertValuesToSignals=function(e,n,r,s){return e?Object.keys(e).reduce(function(e,i){return void 0===e[i]||void 0===e[i].value?e:(e[i]=a.extend({},{signal:t.propSg(r,n,s?s+"_"+i:i)},e[i]._disabled?{_disabled:!0}:{}),e)},e):e}},199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(606),s=n(1090),i=n(1091),l=n(870),o=n(871),c=n(99),u=n(872),d=n(873),p=a.Record({vis:{past:[],present:a.Map({pipelines:a.Map(),datasets:a.Map(),scene:a.Map(),scales:a.Map(),guides:a.Map(),marks:a.Map(),interactions:a.Map(),signals:c.defaultSignalState}),future:[]},vega:u.VegaReparse(),inspector:o.Inspector(),walkthrough:d.Walkthrough(),hints:l.Hints()},"LyraState");var m;t.defaultState=p(),t.store=(m=t.defaultState,r.createStore(i.default,m,r.applyMiddleware(s.default)))},218:function(e,t,n){"use strict";var a=1,r={};e.exports={global:function(){return a++},type:function(e){if(e)return void 0===r[e]&&(r[e]=1),r[e]++},reset:function(){a=1,Object.keys(r).forEach(function(e){r[e]=1})}}},219:function(e,t,n){"use strict";n(846);e.exports=function(e){return e.startsWith("lyra_")?e:"lyra_"+e}},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(414),s=n(76),i=n(218),l=n(39).getInVis;t.createScene=a.createStandardAction("CREATE_SCENE").map(e=>{const t=e._id||i.global();return{payload:{props:e.merge({_id:t}),name:"Scene"},meta:t}}),t.clearScene=function(){return function(e,t){const n=t(),a=l(n,"scene._id"),i=l(n,"marks."+a+".marks");r.batchGroupBy.start(),i.forEach(function(t){e(s.deleteMark(t))}),r.batchGroupBy.end()}}},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(28),s=n(199),i=n(307),l=n(853),o={boolean:l.NOMINAL,number:l.QUANTITATIVE,integer:l.QUANTITATIVE,date:l.TEMPORAL,string:l.NOMINAL},c=n(367),u=(n(1118),n(39).getInVis);let d={};function p(e,t){const n=e._id;if(d[n])return d[n];t?d[n]=t:void 0!==e.source?d[n]=d[e.source]:d[n]=null}function m(){d={}}function g(e){return arguments.length?d=e:d}function h(e){return d[e]||[]}function f(e){const t=n(155),a=function(e){return u(s.store.getState(),"datasets."+e)}(e);return a&&t.view&&t.view.data(a.name)||h(e)||[]}function y(e,t,n){let a=f(t).map(t=>t[e.name]);if(n===l.NOMINAL)return(a=[...new Set(a)]).length>50?{options:a.slice(0,50)}:{options:a};const r=(a=a.sort((e,t)=>e-t)).length;return{max:a[r-1],min:a[0],mid:a[Math.floor(r/2)],quart1:a[Math.floor(r/4)],quart2:a[Math.floor(3*r/4)],length:r}}function v(e){const t={parse:"auto",type:null};let n;try{return t.type="json",{format:t,values:c.read(e,t)}}catch(a){if(t.type="csv",n=c.read(e,t),Object.keys(n[0]).length>1)return{format:t,values:n};if(t.type="tsv",n=c.read(e,t),Object.keys(n[0]).length>1)return{format:t,values:n};throw Error("Raw data is in an unsupported format. Only JSON, CSV, or TSV may be imported.")}}function b(e){if(c.isNumber(e))throw Error("Dataset schemas are now available in the store.");if(c.isArray(e)){const t=c.type.inferAll(e);return c.keys(t).reduce(function(e,n){return e.set(n,i.Column({name:n,type:t[n],mtype:o[t[n]],source:!0}))},a.Map())}throw Error("Expected an array of raw values.")}function _(e,t){const n=t.groupby.reduce((t,n)=>t.set(n,e.get(n)),a.Map());return r.array(t.as).reduce((e,t)=>e.set(t,i.Column({name:t,type:"number",mtype:o.number,source:!1})),n)}t.init=p,t.reset=m,t.persist=g,t.input=h,t.output=f,t.widgetParams=y,t.parseRaw=v,t.schema=b,t.aggregateSchema=_,e.exports={init:p,reset:m,persist:g,input:h,output:f,widgetParams:y,parseRaw:v,schema:b,aggregateSchema:_}},222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(218);t.addInteraction=a.createStandardAction("ADD_INTERACTION").map(e=>{const t=e.id||r.global();return(e=e.merge({id:t})).get("name")&&"New Interaction"!==e.get("name")||(e=e.set("name","Interaction "+t)),{payload:e,meta:t}}),t.setSelection=a.createStandardAction("SET_SELECTION")(),t.setApplication=a.createStandardAction("SET_APPLICATION")(),t.deleteInteraction=a.createStandardAction("DELETE_INTERACTION")(),t.updateInteractionName=a.createStandardAction("UPDATE_INTERACTION_NAME")()},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(99),s=n(308),i=n(263),l=n(219);t.default=function(e,t){const n=`${i.default(e.name)}_manipulators`,a=`peek(data("${n}"))`,s=Object.keys(e.encode.update).filter(e=>"text"!==e).map(t=>e.encode.update[t]).filter(e=>e&&!!e.signal).map(e=>({signal:e.signal}));return[t,{type:"group",data:[{name:n,transform:[{type:l("manipulators_"+e.type),lyra_id:e._id,lyra_selected:{signal:r.SELECTED},lyra_mode:{signal:r.MODE},signals:s},{type:"window",ops:["min","max","min","max"],fields:["x","x","y","y"]}]},{name:"voronoi",source:n,transform:[{type:"voronoi",x:"x",y:"y",as:"lyra_cell_path",extent:[{signal:`data("${n}")[0] ? [${a}.min_x - 100, ${a}.min_y - 50] : [0, 0]`},{signal:`data("${n}")[0] ? [${a}.max_x + 100, ${a}.max_y + 50] : [0, 0]`}]}]},u("handle",n),u("connector",n),u("arrow",n),u("span",n),u("border",n)],marks:[m,g,h("arrow"),h("span"),p(t),d]}]},t.LARGE=40,t.SMALL=20,t.PADDING=7,t.ARROWHEAD=7,t.coords=function(e,t){const n={topLeft:{x:e.x1,y:e.y1,cursor:"nw-resize"},topCenter:{x:e.x1+e.width()/2,y:e.y1,cursor:"n-resize"},topRight:{x:e.x2,y:e.y1,cursor:"ne-resize"},midLeft:{x:e.x1,y:e.y1+e.height()/2,cursor:"w-resize"},midCenter:{x:e.x1+e.width()/2,y:e.y1+e.height()/2,cursor:"move"},midRight:{x:e.x2,y:e.y1+e.height()/2,cursor:"e-resize"},bottomLeft:{x:e.x1,y:e.y2,cursor:"sw-resize"},bottomCenter:{x:e.x1+e.width()/2,y:e.y2,cursor:"s-resize"},bottomRight:{x:e.x2,y:e.y2,cursor:"se-resize"}};if(t)for(const[r,s]of Object.entries(n))n[r]=a.extend({},{size:o(e),key:r,manipulator:t},s);return n};const o=e=>e.width()<t.SMALL||e.height()<t.SMALL?t.SMALL:t.LARGE,c=(e,t)=>[Object.assign({test:`${r.CELL}.key === datum.key`},e),t],u=(e,t)=>({name:e,source:t,transform:[{type:"filter",expr:`datum.manipulator === "${e}"`}]}),d={type:"path",from:{data:"voronoi"},role:r.CELL,encode:{update:{path:{field:"lyra_cell_path"},key:{field:"key"},tooltip:{field:"tooltip"},strokeWidth:{value:.35},stroke:{value:"transparent"},fill:[{test:'datum.manipulator === "handle"',value:null},{value:"transparent"}]},hover:{cursor:[{test:'datum.manipulator === "handle"',field:"cursor"},{value:null}]}}};function p(e){const t=s.default(e.encode.update),n=e.type,a="line"===n||"area"===n;for(const e of Object.keys(t))t[e]={field:e};return delete t.fill,t.stroke=c({value:"lightsalmon"},{value:"cyan"}),t.strokeWidth={value:"text"===n?1:3},a&&(delete t.x,delete t.y,t.path={field:"path"}),{type:a?"path":n,role:"border",from:{data:"border"},encode:{update:t}}}const m={type:"symbol",from:{data:"handle"},role:"handle",encode:{update:{x:{field:"x"},y:{field:"y"},shape:{value:"square"},size:{field:"size"},fill:{value:"white"},stroke:{value:"black"},strokeWidth:{value:.5}},hover:{cursor:{field:"cursor"}}}},g={type:"symbol",from:{data:"connector"},role:"connector",encode:{update:{x:{field:"x"},y:{field:"y"},shape:{value:"diamond"},size:{field:"size"},fill:{value:"white"},stroke:c({value:"lightsalmon"},{value:"cyan"}),strokeWidth:{value:.5}}}},h=e=>({type:"group",role:e,from:{facet:{data:e,name:"facet",groupby:"key"}},marks:[{type:"line",from:{data:"facet"},encode:{update:{x:{field:"x"},y:{field:"y"},fill:c({value:"lightsalmon"},{value:"cyan"}),stroke:c({value:"lightsalmon"},{value:"cyan"}),strokeWidth:{value:3}}}}]});t.BUBBLE_CURSOR={type:"line",from:{data:"bubble_cursor"},interactive:!1,encode:{update:{x:{field:"x"},y:{field:"y"},fill:{value:"lightsalmon"},fillOpacity:{value:.2}}}},t.BUBBLE_CURSOR_TIP=[{type:"text",interactive:!1,encode:{update:{x:{signal:`${r.MOUSE}.x`},y:{signal:`${r.MOUSE}.y`},dy:{value:35},text:{signal:`${r.CELL}.tooltip`},align:{value:"center"},baseline:{value:"bottom"},stroke:{value:"white"},strokeWidth:{value:4},fontSize:{value:12},fontFamily:{value:"Lato"},fontWeight:{value:"bold"}}}},{type:"text",interactive:!1,encode:{update:{x:{signal:`${r.MOUSE}.x`},y:{signal:`${r.MOUSE}.y`},dy:{value:35},text:{signal:`${r.CELL}.tooltip`},align:{value:"center"},baseline:{value:"bottom"},fill:{value:"lightsalmon"},fontSize:{value:12},fontFamily:{value:"Lato"},fontWeight:{value:"bold"}}}}]},262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54);t.initSignal=a.createStandardAction("INIT_SIGNAL")(),t.setSignal=a.createStandardAction("SET_SIGNAL")(),t.setSignalStreams=a.createStandardAction("SET_SIGNAL_STREAMS")(),t.unsetSignal=a.createStandardAction("UNSET_SIGNAL")()},263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/\s/g,"_")}},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r={x:"bottom",y:"left"};var s;!function(e){e.Axis="axis",e.Legend="legend"}(s=t.GuideType||(t.GuideType={})),function(e){e.fill="fill",e.opacity="opacity",e.shape="shape",e.size="size",e.stroke="stroke",e.strokeDash="strokeDash"}(t.LegendForType||(t.LegendForType={})),t.Axis=a.Record({_gtype:s.Axis,_id:null,orient:null,scale:null,tickCount:null,tickSize:null,grid:!1,title:null,zindex:0,encode:{}},"LyraAxis"),t.Legend=a.Record({_id:null,_type:null,_gtype:s.Legend,fill:null,opacity:null,shape:null,size:null,stroke:null,strokeWidth:null,strokeDash:null,symbolFillColor:"#ffffff",symbolOpacity:1,strokeColor:"#ffffff",encode:{}},"LyraLegend"),t.Guide=function(e,n,a){const i=a._id?String(a._id):String(a);return e===s.Axis?t.Axis({orient:r[n],scale:i}):e===s.Legend?t.Legend({_type:n,[n]:i,encode:{}}):void 0},t.isAxis=function(e){return e&&e._gtype===s.Axis},t.isLegend=function(e){return e&&e._gtype===s.Legend}},265:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(218),r=n(39).getInVis,s=n(54),i=n(307),l=n(221),o=n(154),c=n(132);t.addPipeline=function(e,n,r){return function(s){const i=e._id||a.global(),l=o.addDataset(n.merge({name:e.name+"_source",_parent:i}),r);s(l),s(t.baseAddPipeline(e.merge({_id:i,_source:l.payload._id}),i)),s(c.selectPipeline(i))}},t.aggregatePipeline=function(e,n){return function(a,s){const c=s(),u=r(c,"pipelines."+e),d=u._source,p=r(c,"datasets."+d+"._schema"),m=l.aggregateSchema(p,n),g=n.groupby.join("|"),h=o.addDataset(i.Dataset({name:u.get("name")+"_groupby_"+g,source:String(d),transform:[n],_schema:m,_parent:e}),null);a(h),a(t.baseAggregatePipeline({dsId:n._id=h.payload._id,key:g},e))}},t.baseAddPipeline=s.createStandardAction("ADD_PIPELINE")(),t.baseAggregatePipeline=s.createStandardAction("AGGREGATE_PIPELINE")(),t.updatePipelineProperty=s.createStandardAction("UPDATE_PIPELINE_PROPERTY")()},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(218);t.addScale=a.createStandardAction("ADD_SCALE").map(e=>{const t=e._id||r.global();return{payload:e.merge({_id:t}),meta:t}}),t.updateScaleProperty=a.createStandardAction("UPDATE_SCALE_PROPERTY")(),t.amendDataRef=a.createStandardAction("AMEND_DATA_REF")(),t.deleteScale=a.createStandardAction("DELETE_SCALE")()},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.Column=a.Record({name:null,type:null,mtype:null,source:null},"ColumnDescription"),t.Dataset=a.Record({_id:null,_parent:null,_schema:null,name:null,source:null,transform:[]},"LyraDataset")},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return JSON.parse(JSON.stringify(e))}},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54);t.addScaleToGroup=a.createStandardAction("ADD_SCALE_TO_GROUP")(),t.addAxisToGroup=a.createStandardAction("ADD_AXIS_TO_GROUP")(),t.addLegendToGroup=a.createStandardAction("ADD_LEGEND_TO_GROUP")(),t.addInteractionToGroup=a.createStandardAction("ADD_INTERACTION_TO_GROUP")()},310:function(e,t,n){"use strict";var a=n(19),r=n(372),s=n(114),i=n(596)({displayName:"ContentEditable",propTypes:{value:s.oneOfType([s.string,s.number]),save:s.func},getInitialState:function(){return{edit:!1}},componentDidMount:function(){this._el=r.findDOMNode(this)},componentDidUpdate:function(){this.state.edit&&this._el.focus()},componentWillUnmount:function(){this._el=null},start:function(){this.setState({edit:!0})},stop:function(){this.setState({edit:!1}),this.props.save&&this.props.save(this._el.textContent.trim())},handleEnter:function(e){(!e.keyCode||e.keyCode&&13===e.keyCode)&&this._el.blur()},render:function(){var e=this.props;return a.createElement("div",{style:e.style,className:(e.className||"")+" content-editable",contentEditable:this.state.edit,onClick:e.onClick||this.start,onDoubleClick:e.onDoubleClick||this.start,onBlur:this.stop,onKeyDown:this.handleEnter},e.value)}});e.exports=i},364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(99),s=n(263);t.default=function(e,t,n){const i=`${r.ANCHOR}.target`;let l=`(${r.ANCHOR} && ${i} && ${i}.datum && `;return`${l+=n?`${i}.datum.mode === ${a.stringValue(t)}  && `+`${i}.datum.lyra_id === ${e._id} && `+`test(regexp(${a.stringValue(n)}, "i"), ${i}.datum.key)`:`${i}.mark && ${i}.mark.name === ${a.stringValue(s.default(e.name))}`})`}},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return"if("+e+","+t+","+n+")"}},370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(421),r=n(302),s=n(54),i=n(132),l=n(76),o=n(199),c=n(99),u=n(420),d=(n(1135),n(155));e.exports={onSignal:g,offSignal:h,onSignalInGroup:y,offSignalInGroup:v,setSignalInGroup:b,getSignalInGroup:_,register:x};const p={},m={};function g(e,t){return p[e]=p[e]||[],p[e].push(t),d.view&&d.view.addSignalListener(e,t),d}function h(e,t){p[e]=p[e]||[];const n=p[e];for(let e=n.length;--e>=0;)t&&n[e]!==t||n.splice(e,1);return d.view&&d.view.removeSignalListener(e,t),d}function f(e,t,n){const a=e._scenegraph.root.items[0];for(const e of a.items)if(e.name&&"group"===e.marktype&&e.name===t&&e.items&&e.items.length){const t=e.items[0].context.signals;for(const e of Object.keys(t))if(e===n)return t[e]}return null}function y(e,t,n,a){const r=f(e,t,n);if(r){const s=function(){a(n,r.value)};s.handler=a,m[t]=m[t]||{},m[t][n]=m[t][n]||[],m[t][n].push({operator:r,handler:s}),e.on(r,null,s)}}function v(e,t,n,a){if(f(e,t,n)){m[t]=m[t]||{},m[t][n]=m[t][n]||[];const e=m[t][n];for(let t=e.length;--t>=0;)a&&e[t].handler!==a||(e[t].operator._targets.remove(a),e.splice(t,1))}}function b(e,t,n,a){const r=f(e,t,n);e.update(r,a),e.runAsync()}function _(e,t,n){const a=f(e,t,n);return a?a.value:null}function x(){const e=a.select(window);e.on("dragover.altchan")||e.on("dragover.altchan",function(){const e=u.default.get(c.MODE),t=a.event.shiftKey,n="channels"===e,r="altchannels"===e;(n||r)&&(n&&t?(u.default.set(c.MODE,"altchannels"),d.update()):r&&!t&&(u.default.set(c.MODE,"channels"),d.update()))}),d.view&&(Object.keys(p).forEach(function(e){d.view._signals[e]?p[e].forEach(function(t){d.view.addSignalListener(e,t)}):p[e]=[]}),Object.keys(m).forEach(function(e){Object.keys(m[e]).forEach(function(t){f(d.view,e,t)?m[e][t].forEach(function(e){d.view.on(e.operator,null,e.handler)}):m[e][t]=[]})}))}function E(e){const t=e.srcElement||e.target,n=t.tagName.toUpperCase();return("INPUT"===n||"TEXTAREA"===n||"true"===t.contentEditable)&&(!t.readOnly&&!t.disabled)}a.select(window).on("keydown",function(){const e=a.event;!function(e){const t=e.keyCode;if(!E(e)&&!0===e.metaKey||!0===e.ctrlKey){if(89===t)return o.store.dispatch(r.ActionCreators.redo()),e.preventDefault(),!1;if(90===t)o.store.dispatch(e.shiftKey?r.ActionCreators.redo():r.ActionCreators.undo()),e.preventDefault()}}(e),function(e){if(!E(e)&&8===e.keyCode){const t=o.store.getState(),n=t.getIn(["inspector","encodings"]),a=n.get("selectedType"),r=n.get("selectedId"),c=t.getIn(["vis","present","marks",String(r),"_parent"]);if(a===s.getType(i.baseSelectMark))e.preventDefault(),o.store.dispatch(i.selectMark(c)),o.store.dispatch(l.deleteMark(r))}}(e)}).on("beforeunload",function(){{const e="You have unsaved changed in Lyra.";return a.event.returnValue=e,e}}),t.onSignal=g,t.offSignal=h,t.onSignalInGroup=y,t.offSignalInGroup=v,t.setSignalInGroup=b,t.getSignalInGroup=_,t.registerSignalListeners=x},39:function(e,t,n){"use strict";var a=n(46);function r(e){return""+e}function s(e){return e.split(".")}function i(e,t){if(e)return e.getIn(s(t))}function l(e,t,n){return e.setIn(s(t),n)}e.exports={get:function(e,t){if(e)return e.get(r(t))},set:function(e,t,n){return e.set(r(t),n)},getIn:i,getInVis:function(e,t){return i(e.get("vis").present,t)},setIn:l,deleteKeyFromMap:function(e,t){return e.delete(r(t))},ensureValuePresent:function(e,t,n){var r=i(e,t);return r&&a.List.isList(r)&&r.indexOf(n)<0?l(e,t,r.push(n)):e},ensureValueAbsent:function(e,t,n){var r=i(e,t);return r&&a.List.isList(r)&&r.indexOf(n)>=0?l(e,t,r.filter(function(e){return e!==n})):e},str:r}},414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(302),r=n(54),s=n(154),i=n(165),l=n(262),o=n(99);t.batchGroupBy={_group:0,start:()=>++this._group,end:()=>--this._group,init(e){const t=a.groupByActionTypes(e);return e=>this._group||t(e)}},t.default={limit:15,filter:function(e){return e.type!==r.getType(s.addDataset)&&(e.type!==r.getType(l.setSignal)||Object.values(o.signalNames).indexOf(e.meta)<0)},groupBy:t.batchGroupBy.init([r.getType(l.setSignal),r.getType(i.updateGuideProperty)])}},415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(847),r=n(848),s=n(849),i=n(850),l=n(416),o=n(577),c=n(366),u=n(218);function d(e){return c(e)+" "+u.type("marks")}const p={encode:{update:{x:{value:100},y:{value:100},fill:{value:"#4682b4"},fillOpacity:{value:1},stroke:{value:"#000000"},strokeWidth:{value:0}}}};function m(e,t){switch(t?t.name=t.name||d(e):t={name:d(e)},e){case"symbol":return l.Symbol(t).mergeDeepWith(g,p);case"area":return a.Area(t).mergeDeepWith(g,p);case"line":return s.Line(t).mergeDeepWith(g,p);case"rect":return i.Rect(t).mergeDeepWith(g,p);case"text":return o.Text(t).mergeDeepWith(g,p);case"group":return r.Group(t).mergeDeepWith(g,p)}}t.Mark=m;const g=(e,t)=>void 0!==e?null===e?void 0:e:t;m.getHandleStreams=function(e){switch(e.type){case"symbol":return l.getHandleStreams(e);case"area":return a.getHandleStreams(e);case"line":return s.getHandleStreams(e);case"text":return o.getHandleStreams(e);case"group":case"rect":return i.getHandleStreams(e)}}},416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(364),s=n(166),i=n(365),l=n(99);t.Symbol=a.Record({_id:null,_parent:null,_vlUnit:null,type:"symbol",name:null,from:null,encode:{update:{size:{value:200},shape:{value:"circle"}}}},"LyraSymbolMark"),t.SymbolShapes=["circle","square","cross","diamond","triangle-up","triangle-down"],t.getHandleStreams=function(e){const t=r.default.bind(null,e,"handles"),n=e._id,a=s.propSg(n,"symbol","x"),o=s.propSg(n,"symbol","y"),c=s.propSg(n,"symbol","size"),u=`${l.DELTA}.x`,d=`${l.DELTA}.y`;return{[a]:[{events:{signal:l.DELTA},update:i.default(t(),`${a} + ${u}`,a)}],[o]:[{events:{signal:l.DELTA},update:i.default(t(),`${o} + ${d}`,o)}],[c]:[{events:{signal:l.DELTA},update:i.default(t("top"),`${c} - (${d} << 5)`,c)},{events:{signal:l.DELTA},update:i.default(t("bottom"),`${c} + (${d} << 5)`,c)}]}}},417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1097),r=n(54),s=n(199),i=n(307),l=n(264),o=n(578),c=n(847),u=n(848),d=n(849),p=n(850),m=n(852),g=n(416),h=n(579),f=n(580),y=n(99),v=n(221),b=a.withRecords([g.Symbol,c.Area,d.Line,p.Rect,Text,u.Group,m.Scene,i.Column,i.Dataset,l.Axis,l.Legend,h.Pipeline,y.Signal,o.Interaction],(e,t)=>{switch(e){case"LyraScale":return f.Scale(t);default:return null}});t.persist=function(){const e=s.store.getState();return{store:b.toJSON(e.vis.present),values:v.persist()}},t.hydrate=r.createStandardAction("HYDRATE").map(e=>{const t=JSON.parse(e);return v.persist(t.values),{payload:b.fromJSON(t.store)}}),t.hydrator=function(e){return(n,a)=>a.type===r.getType(t.hydrate)?a.payload:e(n,a)}},418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(588),s=n(199),i=n(264),l=n(221),o=n(308),c=n(263),u=n(166),d=n(1122),p=n(419),m=n(26),g=n(263),h=n(1123),f=n(39),y=f.getIn,v=f.getInVis,b=n(1133),_={data:{},scales:{},_totaled:!1},x={marks:{},scales:{}},E={marks:{},guides:{}};let S=o.default(_);function w(e=!1,t=!1){const n=s.store.getState(),a=!0===e,r=!0===t;S=o.default(_);const i=w.scene(n,a,r);return i.data=w.pipelines(n,a,r),p.demonstrationDatasets(i),i.signals=w.signals(n,a,r),w.interactions(n,i)}function k(e,t){const n=e.encode.update,a=r.default[t];if(!n[a.SPAN.name]._disabled)return d.signalLookup(n[a.SPAN.name].signal)}function I(e,t){let n;for(const[r,s]of Object.entries(e))(n=(n=r.startsWith("_"))||null==s||s._disabled)?delete e[r]:"name"===r&&a.isString(s)?e[r]=c.default(s):a.isObject(s)&&(s.signal&&!t?s.signal.startsWith("lyra")&&(e[r]=d.signalLookup(s.signal)):e[r]=I(e[r],t));return e}function T(e){let t,n;if(e)w();else if(S._totaled)return S;for(t in S.data)(n=S.data[t]).total=Object.keys(n.marks).length+Object.keys(n.scales).length;for(t in S.scales)(n=S.scales[t]).markTotal=Object.keys(n.marks).length,n.guideTotal=Object.keys(n.guides).length,n.total=n.markTotal+n.guideTotal;return S._totaled=!0,S}function O(e,t,n){let a,r,s,i,l,o,c={};if(1===n.length)return n=n[0],P(a=v(e,"datasets."+n.data),t,n.field);for(i=0,l=n.length;i<l;++i)a=v(e,"datasets."+n[i].data),s=n[i].field,c[r=a.get("_id")]=c[r]||(c[r]=[]),c[r].push(s);if(1===(o=Object.keys(c)).length)return P(a,t,c[r]);for(n={fields:[]},i=0,l=o.length;i<l;++i)a=v(e,"datasets."+o[i]),n.fields.push(P(a,t,c[o[i]]));return n}function P(e,t,n){const r={data:c.default(e.get("name")),field:n};if("ordinal"===t.type&&e.get("_sort")){const t=y(e,"_sort.field");return a.extend({},r,{sort:t===r.field||{field:t,op:"min"},_sortOrder:y(e,"_sort.order")})}const s=e.get("_id");return(S.data[s]||(S.data[s]=o.default(x))).scales[t._id]=!0,r}t.exporter=w,w.interactions=function(e,t){return e.getIn(["vis","present","interactions"]).forEach(n=>{if(n.selection&&n.application){const a=e.getIn(["vis","present","marks",String(n.groupId)]),r=g.default(a.name);t=p.addSelectionToScene(t,r,n.selection),t=p.addApplicationToScene(t,r,n.application)}}),t},w.signals=function(e,t,n){return e.getIn(["vis","present","interactions"]).valueSeq().toJS().reduce((e,t)=>(t.selectionDef&&"Widget"===t.selectionDef.label&&(e=[...e,...t.selectionDef.signals]),e),[])},w.pipelines=function(e,t,n){return v(e,"pipelines").valueSeq().toJS().reduce(function(a,r){a.push(w.dataset(e,t,n,r._source));const s=r._aggregates;for(const r in s)a.push(w.dataset(e,t,n,s[r]));return a},[])},w.dataset=function(e,t,n,a){const r=v(e,"datasets."+a).toJS(),s=I(o.default(r),t),i=l.input(a),u=s.format&&s.format.type,d=w.sort(r);return S.data[a]=S.data[a]||o.default(x),s.source?s.source=c.default(v(e,"datasets."+s.source+".name")):t?(s.values=i,delete s.url,delete s.format):s.url||(s.values=u&&"json"!==u?h({data:i,del:"tsv"===u?"\t":","}):i),void 0!==d&&(s.transform=s.transform||[],s.transform.push(d)),s},w.sort=function(e){const t=e._sort;if(t)return{type:"sort",by:(t.order===b.DESC?"-":"")+t.field}},w.scene=function(e,t,n){const a=e.getIn(["vis","present","scene","_id"]);let r=w.group(e,t,n,a);return t&&(r=r[0]),delete r.from,delete r.encode,r},w.mark=function(e,t,n,r){const s=v(e,"marks."+r).toJS(),i=I(o.default(s),t),l=s.encode.update,u=i.encode.update;let d,p;if(i.from&&((d=i.from.data)?(i.from.data=c.default(v(e,"datasets."+d+".name")),(p=S.data[d]||(S.data[d]=o.default(x))).marks[r]=!0):(d=i.from.mark)&&(i.from.mark=c.default(v(e,"marks."+d+".name")))),Object.keys(u).forEach(function(t){let n=u[t],s=l[t],i=s.scale;a.isObject(n)||(n=u[t]={value:n}),i&&(n.scale=c.default(v(e,"scales."+i+".name")),(p=S.scales[i]||(S.scales[i]=o.default(E))).marks[r]=!0),s.group&&(n.field={group:s.group},delete n.group)}),"text"===i.type){let e=i.encode.update.text.signal;e&&!e.startsWith("brush")&&(e=e.split(RegExp("{{(.*?)}}")).map(e=>e.indexOf("datum")<0?`"${e}"`:`+ ${e} + `).join(""),i.encode.update.text.signal=e)}return t?(i.role=`lyra_${s._id}`,m.default(s,i)):i},w.group=function(e,t,n,r){const s=v(e,`marks.${r}`);let i=w.mark(e,t,n,r);const l=t?i[0]:i;return["scale","mark","axe","legend"].forEach(function(r){const i=r+"s",c="axes"===i||"legends"===i?"guides":i;l[i]=s[i].map(a=>{const s=v(e,`${c}.${a}`);return s?w[s.type]?w[s.type](e,t,n,a):w[r]?w[r](e,t,n,a):I(o.default(s.toJS()),t):null}).reduce((e,t)=>(a.isArray(t)?e.push.apply(e,t):t&&e.push(t),e),[])}),"Scene"!==s.name&&(l.signals=l.signals||[],l.signals.push({name:"width",value:k(s,"x")},{name:"height",value:k(s,"y")}),p.demonstrations(l,r,e)),i},w.area=function(e,t,n,a){const r=w.mark(e,t,n,a),s=t?r[0]:r,i=s.encode.update;return s.from||(s.from={data:"dummy_data"},i.x={signal:`datum.x + ${u.propSg(a,"area","x")}`},i.y={signal:`datum.y + ${u.propSg(a,"area","y")}`}),"horizontal"===i.orient.value?delete i.y2:delete i.x2,r},w.line=function(e,t,n,a){const r=w.mark(e,t,n,a),s=t?r[0]:r,i=s.encode.update;return s.from||(s.from={data:"dummy_data"},i.x={signal:`datum.x + ${u.propSg(a,"line","x")}`},i.y={signal:`datum.y + ${u.propSg(a,"line","y")}`}),r},w.scale=function(e,t,n,r){const s=v(e,"scales."+r).toJS(),i=I(o.default(s),t);S.scales[r]=S.scales[r]||o.default(E),!s.domain&&s._domain&&s._domain.length&&(i.domain=O(e,s,s._domain)),!s.range&&s._range&&s._range.length&&(i.range=O(e,s,s._range));const l=a.isObject(i.domain)&&i.domain._sortOrder;return l&&(i.reverse=l===b.DESC?!i.reverse:!!i.reserve),i},w.axe=w.legend=function(e,t,n,r){const s=v(e,"guides."+r).toJS(),l=I(o.default(s),t),u=s._gtype,d=s._type;return u===i.GuideType.Axis?(S.scales[l.scale].guides[r]=!0,l.scale=c.default(v(e,"scales."+l.scale+".name"))):u===i.GuideType.Legend&&(S.scales[l[d]].guides[r]=!0,l[d]=c.default(v(e,"scales."+l[d]+".name"))),Object.keys(l.encode).forEach(function(e){const t=l.encode[e];Object.keys(t).forEach(function(e){a.isObject(t[e])||(t[e]={value:t[e]})})}),l},t.getCounts=T,e.exports.exportName=c.default,e.exports.counts=T},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(308);function r(e,t,n){const r=a.default(e);return r.marks=r.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.signals=u(e.signals,n)),e)),r}function s(e,t,n,r){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.marks=e.marks.map(e=>{if("group"===e.type||0===e.name.indexOf("lyra"))return e;if(e.name===n){for(let[t,n]of Object.entries(r))"encode"!==t&&(e[t]=n);if(r.encode&&r.encode.update)for(let[t,n]of Object.entries(r.encode.update)){const a=e.encode.update[t];a&&(a.value||a.signal||a.field?(delete n[0].value,n[0]=Object.assign(Object.assign({},n[0]),a)):Array.isArray(a)&&a[0].test&&!n[0].test.includes(a[0].test)&&(n[0].test=n[0].test+" && "+a[0].test,n[0].value=a[0].value)),e.encode.update[t]=n}}return e})),e)),e}function i(e){const{xScaleName:t,yScaleName:n,xFieldName:a,yFieldName:r}=e;return{ifXElse:(e,n)=>t&&a?e:n,ifYElse:(e,t)=>n&&r?e:t,ifXY:e=>t&&a&&n&&r?e:""}}function l(e,t){const{scaleRecordX:n,scaleRecordY:a}=function(e,t){const n={scaleRecordX:null,scaleRecordY:null},a=e.getIn(["vis","present","marks",String(t)]).get("marks").map(t=>e.getIn(["vis","present","marks",String(t)]));if(!a.length)return n;const r=a[0];if(r.encode&&r.encode.update){if(r.encode.update.x){const{scale:t}=r.encode.update.x;n.scaleRecordX=e.getIn(["vis","present","scales",String(t)])}if(r.encode.update.y){const{scale:t}=r.encode.update.y;n.scaleRecordY=e.getIn(["vis","present","scales",String(t)])}}return n}(e,t);return{xScaleName:n?n.get("name"):null,xFieldName:n?n.get("_domain")[0].field:null,xScaleType:n?c(n.get("type")):null,yScaleName:a?a.get("name"):null,yFieldName:a?a.get("_domain")[0].field:null,yScaleType:a?c(a.get("type")):null}}var o;function c(e){switch(e){case"linear":case"log":case"pow":case"sqrt":case"symlog":case"time":case"utc":case"sequential":return o.CONTINUOUS;case"ordinal":case"band":case"point":case"quantile":case"quantize":case"threshold":case"bin-ordinal":return o.DISCRETE}}function u(e,t){return e.map(e=>{const n=t.filter(t=>t.name===e.name);return n.length?n[0]:e}).concat(t.filter(t=>{return 0===e.filter(e=>e.name===t.name).length}))}t.addSelectionToScene=function(e,t,n){switch(n.type){case"point":const a=(n=n).field;switch(n.ptype){case"single":return r(e,t,[{name:"points_tuple",on:[{events:[{source:"scope",type:"click"}],update:`datum && !datum.manipulator && item().mark.marktype !== 'group' ? {unit: "layer_0", fields: points_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)['${a||"_vgsid_"}']]} : null`,force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:"points_tuple_fields",value:[{type:"E",field:a||"_vgsid_"}]}]);case"multi":return r(e,t,[{name:"points_tuple",on:[{events:[{source:"scope",type:"click"}],update:`datum && !datum.manipulator && item().mark.marktype !== 'group' ? {unit: "layer_0", fields: points_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)['${a||"_vgsid_"}']]} : null`,force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:"points_tuple_fields",value:[{type:"E",field:a||"_vgsid_"}]},{name:"points_toggle",value:!1,on:[{events:[{source:"scope",type:"click"}],update:"event.shiftKey"},{events:[{source:"scope",type:"dblclick"}],update:"false"}]}])}break;case"interval":switch((n=n).field){case"x":return r(e,t,[{name:"lyra_brush_is_x_encoding",init:"true"}]);case"y":return r(e,t,[{name:"lyra_brush_is_y_encoding",init:"true"}]);default:return e}}},t.addApplicationToScene=function(e,t,n){let r,i;switch(n.type){case"mark":i=(n=n).targetMarkName,r=n.isDemonstratingInterval;const l=n.defaultValue;return s(e,t,i,{encode:{update:{[n.propertyName]:[{test:r?`!(length(data("brush_store_${t}"))) || (vlSelectionTest("brush_store_${t}", datum))`:`!(length(data("points_store_${t}"))) || (vlSelectionTest("points_store_${t}", datum))`,value:""},{value:l}]}}});case"scale":const o=(n=n).scaleInfo;return function(e,t,n){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&e.scales.forEach(e=>{n.forEach(t=>{if(e.name===t.name)for(let[n,a]of Object.entries(t))"_axis"!==n&&(e[n]=a)})}),e)),e}(e=function(e,t){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.clip={value:!0}),e)),e}(e=function(e,t){return(e=a.default(e)).marks=e.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.marks=e.marks.filter(e=>!(e.name&&0===e.name.indexOf("lyra")))),e)),e}(e,t),t),t,[{_axis:"x",name:o.xScaleName,domainRaw:{signal:`grid["${o.xFieldName}"]`},zero:!1},{_axis:"y",name:o.yScaleName,domainRaw:{signal:`grid["${o.yFieldName}"]`},zero:!1}]);case"transform":const c=(n=n).datasetName,u=n.targetGroupName;i=n.targetMarkName,r=n.isDemonstratingInterval;const d=c+"_filter_"+u;e=s(e,u,i,{from:{data:d}});const{source:p,transform:m}=function e(t,n,a){const r=t.data.filter(e=>e.name===n)[0],s=a.concat(r.transform),i=s.map(e=>JSON.stringify(e)),l=s.filter((e,t)=>i.indexOf(JSON.stringify(e))===t);return r.source?e(t,r.source,l):{source:n,transform:l}}(e,c,[]);return e=function(e,t){const n=(e=a.default(e)).data||(e.data=[]);return e.data=[...n,t],e}(e,{name:d,source:p,transform:[{type:"filter",expr:r?`!(length(data("brush_store_${t}"))) || (vlSelectionTest("brush_store_${t}", datum))`:`!(length(data("points_store_${t}"))) || (vlSelectionTest("points_store_${t}", datum))`},...m]})}},t.demonstrationDatasets=function(e){e.marks.forEach(t=>{if(t.name&&"group"===t.type){const n=t.name,a=e.data||(e.data=[]);e.data=[...a,{name:`brush_store_${n}`},{name:`grid_store_${n}`},{name:`points_store_${n}`}]}})},t.demonstrations=function(e,t,n){if(e.name){const a=l(n,t),{xScaleName:r,xFieldName:s,yScaleName:o,yFieldName:c}=a;return r&&s||o&&c?function(e,t){const{ifXElse:n,ifYElse:a,ifXY:r}=i(t),s=e.marks||(e.marks=[]),l=e.name;return e.marks=[...s,{name:"lyra_brush_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:"#333"},fillOpacity:{value:.125}},update:{x:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},n({signal:"lyra_brush_x[0]"},{value:"0"})),{value:0}],y:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},a({signal:"lyra_brush_y[0]"},{value:"0"})),{value:0}],x2:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},n({signal:"lyra_brush_x[1]"},{signal:"width"})),{value:0}],y2:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},a({signal:"lyra_brush_y[1]"},{signal:"height"})),{value:0}]}}},{name:"lyra_brush_brush",type:"rect",clip:!0,encode:{enter:{fill:{value:"transparent"}},update:{x:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},n({signal:"lyra_brush_x[0]"},{value:"0"})),{value:0}],y:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},a({signal:"lyra_brush_y[0]"},{value:"0"})),{value:0}],x2:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},n({signal:"lyra_brush_x[1]"},{signal:"width"})),{value:0}],y2:[Object.assign({test:`data("brush_store_${l}").length && data("brush_store_${l}")[0].unit === ""`},a({signal:"lyra_brush_y[1]"},{signal:"height"})),{value:0}],stroke:[{test:n("lyra_brush_x[0] !== lyra_brush_x[1]","")+r(" && ")+a("lyra_brush_y[0] !== lyra_brush_y[1]",""),value:"white"},{value:null}]}}}],e}(function(e,t){const{xScaleName:n,yScaleName:a,xFieldName:r,yFieldName:s}=t,{ifXElse:l,ifYElse:o,ifXY:c}=i(t),u=e.name,d=e.signals||(e.signals=[]);return e.signals=[...d,{name:"lyra_brush_is_x_encoding",init:"false"},{name:"lyra_brush_is_y_encoding",init:"false"},{name:"lyra_brush_x",update:"lyra_brush_is_y_encoding ? [width, 0] : brush_x"},{name:"lyra_brush_y",update:"lyra_brush_is_x_encoding ? [0, height] : brush_y"},{name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]},{name:"brush",update:`vlSelectionResolve("brush_store_${u}")`},{name:"grid",update:`vlSelectionResolve("grid_store_${u}")`},{name:"brush_x",value:[],on:[{events:{source:"scope",type:"mousedown",filter:['!event.item || event.item.mark.name !== "lyra_brush_brush"']},update:"[x(unit), x(unit)]"},{events:{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",filter:['!event.item || event.item.mark.name !== "lyra_brush_brush"']},{source:"window",type:"mouseup"}]},update:"[brush_x[0], clamp(x(unit), 0, width)]"},{events:{signal:"brush_scale_trigger"},update:l(`isArray(brush_${r}_${n}) && length(brush_${r}_${n}) == 2 ? [scale("${n}", brush_${r}_${n}[0]), scale("${n}", brush_${r}_${n}[1])] : [0, 0]`,"[width, 0]")},{events:{signal:"brush_translate_delta"},update:"clampRange(panLinear(brush_translate_anchor.extent_x, brush_translate_delta.x / span(brush_translate_anchor.extent_x)), 0, width)"},{events:{signal:"brush_zoom_delta"},update:"clampRange(zoomLinear(brush_x, brush_zoom_anchor.x, brush_zoom_delta), 0, width)"},{events:[{source:"scope",type:"dblclick"}],update:"[0, 0]"}]},{name:l(`brush_${r}_${n}`,"brush_x_field_undefined"),on:l([{events:{signal:"lyra_brush_x"},update:`lyra_brush_x[0] === lyra_brush_x[1] ? null : invert("${n}", lyra_brush_x)`}],[])},{name:"brush_y",value:[],on:[{events:{source:"scope",type:"mousedown",filter:['!event.item || event.item.mark.name !== "lyra_brush_brush"']},update:"[y(unit), y(unit)]"},{events:{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",filter:['!event.item || event.item.mark.name !== "lyra_brush_brush"']},{source:"window",type:"mouseup"}]},update:"[brush_y[0], clamp(y(unit), 0, height)]"},{events:{signal:"brush_scale_trigger"},update:o(`isArray(brush_${s}_${a}) && length(brush_${s}_${a}) == 2 ? [scale("${a}", brush_${s}_${a}[0]), scale("${a}", brush_${s}_${a}[1])] : [0, 0]`,"[0, height]")},{events:{signal:"brush_translate_delta"},update:"clampRange(panLinear(brush_translate_anchor.extent_y, brush_translate_delta.y / span(brush_translate_anchor.extent_y)), 0, height)"},{events:{signal:"brush_zoom_delta"},update:"clampRange(zoomLinear(brush_y, brush_zoom_anchor.y, brush_zoom_delta), 0, height)"},{events:[{source:"scope",type:"dblclick"}],update:"[0, 0]"}]},{name:o(`brush_${s}_${a}`,"brush_y_field_undefined"),on:o([{events:{signal:"lyra_brush_y"},update:`lyra_brush_y[0] === lyra_brush_y[1] ? null : invert("${a}", lyra_brush_y)`}],[])},{name:"brush_scale_trigger",value:{},on:[{events:[].concat(l([{scale:"x"}],[])).concat(o([{scale:"y"}],[])),update:l(`(!isArray(brush_${r}_${n}) || (+invert("${n}", lyra_brush_x)[0] === +brush_${r}_${n}[0] && +invert("${n}", lyra_brush_x)[1] === +brush_${r}_${n}[1]))`,"")+c(" && ")+o(`(!isArray(brush_${s}_${a}) || (+invert("${a}", lyra_brush_y)[0] === +brush_${s}_${a}[0] && +invert("${a}", lyra_brush_y)[1] === +brush_${s}_${a}[1]))`,"")+" ? brush_scale_trigger : {}"}]},{name:"brush_tuple",on:[{events:[{signal:l(`brush_${r}_${n}`,"")+c(" || ")+o(`brush_${s}_${a}`,"")}],update:l(`brush_${r}_${n}`,"")+c(" && ")+o(`brush_${s}_${a}`,"")+' ? {unit: "", fields: tuple_fields, values: ['+l(`brush_${r}_${n}`,"")+c(",")+o(`brush_${s}_${a}`,"")+"]} : null"}]},{name:"tuple_fields",value:[].concat(l([{field:r,channel:"x",type:"R"}],[])).concat(o([{field:s,channel:"y",type:"R"}],[]))},{name:"brush_translate_anchor",value:{},on:[{events:[{source:"scope",type:"mousedown",markname:"lyra_brush_brush"}],update:"{x: x(unit), y: y(unit), extent_x: slice(lyra_brush_x), extent_y: slice(lyra_brush_y)}"}]},{name:"brush_translate_delta",value:{},on:[{events:[{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown",markname:"lyra_brush_brush"},{source:"window",type:"mouseup"}]}],update:"{x: brush_translate_anchor.x - x(unit), y: brush_translate_anchor.y - y(unit)}"}]},{name:"brush_zoom_anchor",on:[{events:[{source:"scope",type:"wheel",consume:!0,markname:"lyra_brush_brush"}],update:"{x: x(unit), y: y(unit)}"}]},{name:"brush_zoom_delta",on:[{events:[{source:"scope",type:"wheel",consume:!0,markname:"lyra_brush_brush"}],force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]},{name:"brush_modify",update:`modify("brush_store_${u}", brush_tuple, true)`},{name:l(`grid_${r}_${n}`,"grid_x_field_undefined"),on:l([{events:{signal:"grid_translate_delta"},update:"panLinear(grid_translate_anchor.extent_x, -grid_translate_delta.x / width)"},{events:{signal:"grid_zoom_delta"},update:`zoomLinear(domain("${n}"), grid_zoom_anchor.x, grid_zoom_delta)`},{events:[{source:"scope",type:"dblclick"}],update:"null"}],[])},{name:o(`grid_${s}_${a}`,"grid_y_field_undefined"),on:o([{events:{signal:"grid_translate_delta"},update:"panLinear(grid_translate_anchor.extent_y, grid_translate_delta.y / height)"},{events:{signal:"grid_zoom_delta"},update:`zoomLinear(domain("${a}"), grid_zoom_anchor.y, grid_zoom_delta)`},{events:[{source:"scope",type:"dblclick"}],update:"null"}],[])},{name:"grid_tuple",on:[{events:[{signal:l(`grid_${r}_${n}`,"")+c(" || ")+o(`grid_${s}_${a}`,"")}],update:l(`grid_${r}_${n}`,"")+c(" && ")+o(`grid_${s}_${a}`,"")+'? {unit: "", fields: tuple_fields, values: ['+l(`grid_${r}_${n}`,"")+c(",")+o(`grid_${s}_${a}`,"")+"]} : null"}]},{name:"grid_translate_anchor",value:{},on:[{events:[{source:"scope",type:"mousedown"}],update:"{x: x(unit), y: y(unit)"+l(`, extent_x: domain("${n}")`,"")+o(`, extent_y: domain("${a}")`,"")+"}"}]},{name:"grid_translate_delta",value:{},on:[{events:[{source:"window",type:"mousemove",consume:!0,between:[{source:"scope",type:"mousedown"},{source:"window",type:"mouseup"}]}],update:"{x: grid_translate_anchor.x - x(unit), y: grid_translate_anchor.y - y(unit)}"}]},{name:"grid_zoom_anchor",on:[{events:[{source:"scope",type:"wheel",consume:!0}],update:"{"+l(`x: invert("${n}", x(unit))`,"")+c(", ")+o(`y: invert("${a}", y(unit))`,"")+"}"}]},{name:"grid_zoom_delta",on:[{events:[{source:"scope",type:"wheel",consume:!0}],force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]},{name:"grid_modify",update:`modify("grid_store_${u}", grid_tuple, true)`},{name:"points",update:`vlSelectionResolve("points_store_${u}")`},{name:"points_tuple",on:[{events:[{source:"scope",type:"click"}],update:'datum && !datum.manipulator && item().mark.marktype !== \'group\' ? {unit: "layer_0", fields: points_tuple_fields, values: [(item().isVoronoi ? datum.datum : datum)["_vgsid_"]]} : null',force:!0},{events:[{source:"scope",type:"dblclick"}],update:"null"}]},{name:"points_tuple_fields",value:[{type:"E",field:"_vgsid_"}]},{name:"points_toggle",init:!1},{name:"points_modify",update:`modify("points_store_${u}", points_toggle ? null : points_tuple, points_toggle ? null : true, points_toggle ? points_tuple : null)`}],e}(e,a),a):e}return e},t.getScaleInfoForGroup=l,function(e){e.CONTINUOUS="CONTINUOUS",e.DISCRETE="DISCRETE"}(o=t.ScaleSimpleType||(t.ScaleSimpleType={})),t.cleanSpecForPreview=function(e,t){const n=a.default(e);return n.marks=n.marks.filter(()=>!0).map(e=>(e.name&&"group"===e.type&&(e.axes=e.axes.map(e=>Object.assign(Object.assign({},e),{title:"",labels:!1,ticks:!1,domain:!1})),e.legends=[],e.encode.update.x={value:0},e.encode.update.y={value:0},e.encode.update.width={signal:"width"},e.encode.update.height={signal:"height"},e.marks.length&&"symbol"===e.marks[0].type&&e.marks[0].encode.update.size.value&&(e.marks[0].encode.update.size={value:"10"}),e.name!==t&&(e.clip=!0,e.encode.update.x={value:-999},e.encode.update.y={value:-999})),e)),function(e,t){const n=a.default(e);return n.marks=n.marks.map(e=>(e.name&&e.name===t&&"group"===e.type&&(e.signals=u(e.signals,d)),e)),n}(n,t)},t.editSignals=u;const d=[{name:"width",init:"60"},{name:"height",init:"60"},{name:"brush_x",init:"[0, 0]"},{name:"brush_y",init:"[0, 0]"},{name:"brush_zoom_anchor",init:"null"},{name:"brush_zoom_delta",init:"null"},{name:"grid_zoom_anchor",init:"null"},{name:"grid_zoom_delta",init:"null"},{name:"points_tuple",init:"null"},{name:"grid_translate_anchor",init:{}},{name:"grid_translate_delta",init:{}}]},420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(262),r=n(199),s=n(99),i=n(219),l=n(39).getInVis;function o(){return l(r.store.getState(),"signals").toJS()}function c(e){return e in s.signalNames}t.api=o,o.init=function(e,t){r.store.dispatch(a.initSignal(t,e))},o.reference=function(e){return{signal:i(e)}},o.isDefault=c,o.get=function(e){let t,a=n(155).view,s=function(e){return l(r.store.getState(),"signals."+i(e))}(e);return a&&"function"==typeof a.signal&&(t=a.signal(i(e))),t||s.get("value")},o.set=function(e,t,s){void 0===s&&(s=!0);const l=n(155).view;c(e)||!1===s||r.store.dispatch(a.setSignal(t,e)),l&&"function"==typeof l.signal&&l.signal(i(e),t)},o.delete=function(e){r.store.dispatch(a.unsetSignal(null,e))},o.streams=function(e,t){r.store.dispatch(a.setSignalStreams(e,t))},t.default=o,window.sg=o},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return function(a){return a.key=e,a.manipulator=t,a.tooltip=n||e,a}}},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(364),s=n(166),i=n(365),l=n(99);t.Text=a.Record({_id:null,_parent:null,_vlUnit:null,type:"text",name:null,from:null,encode:{update:{dx:{value:0,offset:0},dy:{value:0,offset:0},text:{signal:"Text"},align:{value:"center"},baseline:{value:"middle"},font:{value:"Helvetica"},fontSize:{value:12},fontStyle:{value:"normal"},fontWeight:{value:"normal"},angle:{value:0}}}},"LyraTextMark"),t.getHandleStreams=function(e){const t=r.default.bind(null,e,"handles"),n=e._id,a=s.propSg(n,"text","x"),o=s.propSg(n,"text","y"),c=s.propSg(n,"text","fontSize"),u=`${l.DELTA}.x`,d=`${l.DELTA}.y`;return{[a]:[{events:{signal:l.DELTA},update:i.default(t(),`${a} + ${u}`,a)}],[o]:[{events:{signal:l.DELTA},update:i.default(t(),`${o} + ${d}`,o)}],[c]:[{events:{signal:l.DELTA},update:i.default(`${t("left")} && ${t("top")}`,`${c} - ${u}`,c)},{events:{signal:l.DELTA},update:i.default(`${t("right")} && ${t("bottom")}`,`${c} + ${u}`,c)},{events:{signal:l.DELTA},update:i.default(`${t("left")} && ${t("top")}`,`${c} - ${d}`,c)},{events:{signal:l.DELTA},update:i.default(`${t("right")} && ${t("bottom")}`,`${c} + ${d}`,c)}]}},t.TextAlignments=["left","center","right"],t.TextBaselines=["top","middle","bottom"],t.TextFonts=["Helvetica","Verdana","Georgia","Palatino","Garamond","Trebuchet MS"],t.TextFontStyles=["normal","italic"],t.TextFontWeights=["normal","bold"]},578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.PointSelection=a.Record({type:"point",ptype:null,id:null,label:null,field:null},"LyraPointSelection"),t.IntervalSelection=a.Record({type:"interval",id:null,label:null,field:null},"LyraIntervalSelection"),t.MarkApplication=a.Record({type:"mark",id:null,label:null,targetMarkName:null,isDemonstratingInterval:null,propertyName:null,defaultValue:null},"LyraMarkApplication"),t.ScaleApplication=a.Record({type:"scale",id:null,label:null,scaleInfo:null},"LyraScaleApplication"),t.TransformApplication=a.Record({type:"transform",id:null,label:null,targetGroupName:null,datasetName:null,targetMarkName:null,isDemonstratingInterval:null},"LyraTransformApplication"),t.Interaction=a.Record({id:null,name:null,groupId:null,selection:null,application:null},"LyraInteraction")},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.Pipeline=a.Record({_id:null,name:null,_source:null,_aggregates:a.Map()},"LyraPipeline")},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r={};function s(e){let t=1,n=e;for(;r[n];)n=e+""+ ++t;return r[n]=1,n}t.Scale=function(e){return a.Record(Object.assign(Object.assign({_id:null,_origName:e.name,_domain:[],_range:[]},e),{name:s(e.name)}),"LyraScale")()}},588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={x:{START:{name:"x",label:"Left"},CENTER:{name:"xc",label:"Center"},SPAN:{name:"width",label:"Width"},END:{name:"x2",label:"Right"}},y:{START:{name:"y",label:"Top"},CENTER:{name:"yc",label:"Middle"},SPAN:{name:"height",label:"Height"},END:{name:"y2",label:"Bottom"}}}},589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(199),r=n(30).Bounds,s=n(39).getInVis;function i(e,t){return t=t||a.store.getState(),s(t,"marks."+e._parent)||null}function l(e,t){if(!e)return[];let n=e.get("_parent")&&i(e,t);if(!n)return[];const a=[n];for(;n&&n._parent;)(n=i(n,t))&&a.push(n);return a}function o(e){return e.reduce(function(e,t){return"group"===t.get("type")&&e.push(t.get("_id")),e},[])}function c(e,t){return t=t||a.store.getState(),o(l(s(t,"marks."+e),t))}function u(e,t){t=t||a.store.getState();const n=e||t.getIn(["inspector","encodings","selectedId"]),r=s(t,"marks."+n);return r?"group"===r.get("type")||"scene"===r.get("type")?r.get("_id"):u(r.get("_parent"),t):s(t,"scene._id")}t.getParentGroupIds=c,t.getClosestGroupId=u,e.exports={getParent:i,getParentGroupIds:c,getParents:l,getGroupIds:o,getClosestGroupId:u,findInItemTree:function(e,t){const n=document.querySelector(".vis-container"),a={x:0,y:0};let s,i,l,o=+Number.MAX_VALUE,c=+Number.MAX_VALUE;for(let n=t.length-1;n>=0;--n){const r=t[n];a.x+=+e.x||0,a.y+=+e.y||0;for(let t=e.items,n=0,a=t.length;n<a&&null===(e=(l=t[n].role)&&+l.split("lyra_")[1]===r?t[n].items[0]:null);++n);if(null===e)break}const u=new r({x1:n.scrollLeft,x2:300+n.scrollLeft,y1:n.scrollTop,y2:200+n.scrollTop});if(e&&e.mark.items.length>1)for(let t=0,n=e.mark.items,a=n.length;t<a;++t){const a=(e=n[t]).bounds,r=a&&(a.x1<o||a.y1<c);if(!a)break;if(u.encloses(a)){i=s=null;break}u.intersects(a)&&r?(s=e,o=a.x1,c=a.y1):r&&(i=e,o=a.x1,c=a.y1)}return s||i||e}}},592:function(e,t,n){"use strict";e.exports=["count","mean","sum","min","max","variance","variancep","stdev","stdevp","median","q1","q3","modeskew"]},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54);t.hintsOn=a.createStandardAction("HINTS_ON")(),t.clearHints=a.createStandardAction("CLEAR_HINTS")()},597:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=n(28),r=n(421),s=n(367),i={json:"application/json",html:"text/html"};function l(e,t){const n=r.select(document.createElement("a")).attr("href",e).attr("target","_blank").attr("download","lyra."+t).node(),a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,document.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(a)}function o(t,n){for(const a of t){const t=new FileReader;t.onloadend=(t=>a=>{const r=a.target.result;n("string"==typeof r?r:e.from(r).toString("utf-8"),t)})(a),t.readAsText(a)}}t.toBlob=function(e,t){const n=new Blob([e],{type:i[t]});return l(window.URL.createObjectURL(n),t)},t.download=l,t.get=function(e,t){s.load({url:e},(e,n)=>t(n,e))},t.fopen=function(e,t){r.select(document.createElement("input")).attr("type","file").attr("accept",a.array(e).map(e=>`.${e}`).join(",")).on("change",()=>o(r.event.target.files,t)).node().click()},t.read=o}).call(this,n(409).Buffer)},656:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(28),r=n(84),s=n(50),i=n.n(s),l=n(26);const o=2*l.PADDING;function c(e){r.a.call(this,[],e)}c.Definition=Object(a.extend)({},r.a.Definition);const u=Object(a.inherits)(c,r.a);u.handles=function(e){const t=Object(l.coords)(e.bounds,"handle");return Object.values(t).filter(e=>"midCenter"!==e.key)},u.connectors=function(e){return Object.values(Object(l.coords)(e.bounds,"connector"))},u.channels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(l.coords)(t),r=a.topLeft,s=a.topRight,o=a.bottomRight,c=t.width(),u=t.height(),d=Math.max(Math.min(s.x+c,n.x2-l.PADDING),s.x+50),p=Math.max(Math.min(o.y+u,n.y2-l.PADDING),o.y+50);return[].concat([{x:r.x,y:r.y-l.PADDING},{x:s.x,y:s.y-l.PADDING},{x:d,y:s.y-l.PADDING},{x:d-l.ARROWHEAD,y:s.y-2*l.PADDING},{x:d-l.ARROWHEAD,y:s.y},{x:d,y:s.y-l.PADDING+.1}].map(i()("x+","arrow","x position"))).concat([{x:s.x+l.PADDING,y:s.y},{x:o.x+l.PADDING,y:o.y},{x:o.x+l.PADDING,y:p},{x:o.x+2*l.PADDING,y:p-l.ARROWHEAD},{x:o.x,y:p-l.ARROWHEAD},{x:o.x+l.PADDING,y:p+.1}].map(i()("y+","arrow","y position"))).concat([{x:e.x,y:e.y,x2:e.x2,y2:e.y2,width:e.width,height:e.height,shape:e.shape}].map(i()("fill","border")))},u.altchannels=function(e){var t=e.bounds,n=e.mark.group.bounds,a=Object(l.coords)(t),r=a.topLeft,s=a.topCenter,c=a.topRight,u=a.midLeft,d=a.midRight,p=a.bottomLeft,m=a.bottomCenter,g=a.bottomRight;return[].concat([{x:n.x1,y:r.y},{x:r.x-o,y:r.y}].map(i()("x","span","left (x)"))).concat([{x:n.x1,y:g.y+l.PADDING},{x:p.x,y:g.y+l.PADDING},{x:g.x,y:g.y+l.PADDING}].map(i()("x2","span","right (x2)"))).concat([{x:r.x,y:n.y1},{x:r.x,y:r.y-o}].map(i()("y","span","top (y)"))).concat([{x:g.x+l.PADDING,y:n.y1},{x:g.x+l.PADDING,y:c.y},{x:g.x+l.PADDING,y:g.y}].map(i()("y2","span","bottom (y2)"))).concat([{x:u.x,y:c.y-l.PADDING},{x:d.x,y:c.y-l.PADDING}].map(i()("width","span"))).concat([{x:p.x-l.PADDING,y:s.y},{x:p.x-l.PADDING,y:m.y}].map(i()("height","span"))).concat([{x:e.x,y:e.y,x2:e.x2,y2:e.y2,width:e.width,height:e.height,shape:e.shape}].map(i()("stroke","border")))}},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54),r=n(414),s=n(415),i=n(218),l=n(39).getInVis;t.addMark=a.createStandardAction("ADD_MARK").map(e=>{const t=e._id||i.global();return{payload:{name:(e=e.merge({_id:t})).name,streams:s.Mark.getHandleStreams(e),props:e},meta:t}}),t.updateMarkProperty=a.createStandardAction("UPDATE_MARK_PROPERTY")(),t.setParent=a.createStandardAction("SET_PARENT_MARK")(),t.setMarkVisual=a.createStandardAction("SET_MARK_VISUAL")(),t.disableMarkVisual=a.createStandardAction("DISABLE_MARK_VISUAL")(),t.resetMarkVisual=a.createStandardAction("RESET_MARK_VISUAL")(),t.bindScale=a.createStandardAction("BIND_SCALE")(),t.bindField=a.createStandardAction("BIND_FIELD")(),t.setMarkExtent=a.createStandardAction("SET_MARK_EXTENT")(),t.setVlUnit=a.createStandardAction("SET_VL_UNIT")(),t.deleteMark=function e(n){return function(a,s){const i=l(s(),"marks."+n),o=i.get("marks");r.batchGroupBy.start(),o&&o.size&&o.forEach(function(t){a(e(t))}),a(t.baseDeleteMark(i.type,i._id)),r.batchGroupBy.end()}},t.baseDeleteMark=a.createStandardAction("DELETE_MARK")()},84:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(28);function r(e){a.Transform.call(this,[],e)}r.Definition={metadata:{source:!0,changes:!0},params:[{name:"lyra_id",type:"number",required:!0},{name:"lyra_selected",required:!0},{name:"lyra_mode",required:!0},{name:"signals",array:!0}]};const s=Object(a.inherits)(r,a.Transform);s.transform=function(e,t){const n=this.value||[],r=t.fork(t.NO_FIELDS&t.NO_SOURCE),s=e.lyra_id,i=e.lyra_selected,l=e.lyra_mode,o=i.mark.role,c=Object(a.tupleid)(i);if(!n.length||n._id===c&&n._mode===l||(r.rem=n.splice(0)),!o||o&&s!==+o.split("lyra_")[1])return r.source=this.value=n,r;const u=this[l](i).map(function(e){return e.mode=l,e.lyra_id=s,e});return n.length&&n._id===c?(u.forEach((e,t)=>Object(a.extend)(n[t],e)),r.mod=n):(n._id=c,n._mode=l,n.push.apply(n,u.map(a.ingest)),r.add=n),r.source=this.value=n,r},s.handles=function(e){return[]},s.connectors=function(e){return[]},s.channels=function(e){return[]},s.altchannels=function(e){return[]}},847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(364),s=n(166),i=n(365),l=n(99);t.Area=a.Record({_id:null,_parent:null,_vlUnit:null,type:"area",name:null,from:null,encode:{update:{y2:{value:250},tension:{value:13},interpolate:{value:"monotone"},orient:{value:"vertical"}}}},"LyraAreaMark"),t.getHandleStreams=function(e){const t=r.default.bind(null,e,"handles"),n=e._id,a=s.propSg(n,"area","x"),o=s.propSg(n,"area","xc"),c=s.propSg(n,"area","x2"),u=s.propSg(n,"area","y"),d=s.propSg(n,"area","yc"),p=s.propSg(n,"area","y2"),m=s.propSg(n,"area","width"),g=s.propSg(n,"area","height"),h=`${l.DELTA}.x`,f=`${l.DELTA}.y`;return{[a]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("left")}`,`${a} + ${h}`,a)}],[o]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("left")}`,`${o} + ${h}`,o)}],[c]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("right")}`,`${c} + ${h}`,c)}],[u]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("top")}`,`${u} + ${f}`,u)}],[d]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("top")}`,`${d} + ${f}`,d)}],[p]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("bottom")}`,`${p} + ${f}`,p)}],[m]:[{events:{signal:l.DELTA},update:i.default(t("left"),`${m} - ${h}`,m)},{events:{signal:l.DELTA},update:i.default(t("right"),`${m} + ${h}`,m)}],[g]:[{events:{signal:l.DELTA},update:i.default(t("top"),`${g} - ${f}`,g)},{events:{signal:l.DELTA},update:i.default(t("bottom"),`${g} + ${f}`,g)}]}}},848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);n(39).getInVis;t.Group=a.Record({_id:null,_parent:null,_vlUnit:null,_manualLayout:!1,_interactions:[],type:"group",name:null,from:null,scales:[],axes:[],legends:[],marks:[],encode:{update:{fill:{value:"transparent"},stroke:null,x:{value:0},y:{value:0},x2:{value:140,_disabled:!0},y2:{value:140,_disabled:!0},xc:{value:70,_disabled:!0},yc:{value:70,_disabled:!0},width:{value:640},height:{value:360}}}},"LyraGroupMark")},849:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(364),s=n(166),i=n(365),l=n(99);t.Line=a.Record({_id:null,_parent:null,_vlUnit:null,type:"line",name:null,from:null,encode:{update:{fill:void 0,fillOpacity:void 0,strokeWidth:{value:3},tension:{value:13},interpolate:{value:"monotone"}}}},"LyraLineMark"),t.getHandleStreams=function(e){const t=r.default.bind(null,e,"handles"),n=e._id,a=s.propSg(n,"line","x"),o=s.propSg(n,"line","y"),c=`${l.DELTA}.x`,u=`${l.DELTA}.y`;return{[a]:[{events:{signal:l.DELTA},update:i.default(t(),`${a} + ${c}`,a)}],[o]:[{events:{signal:l.DELTA},update:i.default(t(),`${o} + ${u}`,o)}]}}},850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(364),s=n(166),i=n(365),l=n(99);t.Rect=a.Record({_id:null,_parent:null,_vlUnit:null,type:"rect",name:null,from:null,encode:{update:{x2:{value:140},y2:{value:140},xc:{value:70,_disabled:!0},yc:{value:70,_disabled:!0},width:{value:40,_disabled:!0},height:{value:40,_disabled:!0}}}},"LyraRectMark"),t.getHandleStreams=function(e){const t=r.default.bind(null,e,"handles"),n=e._id,a=e.type,o=s.propSg(n,a,"x"),c=s.propSg(n,a,"xc"),u=s.propSg(n,a,"x2"),d=s.propSg(n,a,"y"),p=s.propSg(n,a,"yc"),m=s.propSg(n,a,"y2"),g=s.propSg(n,a,"width"),h=s.propSg(n,a,"height"),f=`${l.DELTA}.x`,y=`${l.DELTA}.y`;return{[o]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("left")}`,`${o} + ${f}`,o)}],[c]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("left")}`,`${c} + ${f}`,c)}],[u]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("right")}`,`${u} + ${f}`,u)}],[d]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("top")}`,`${d} + ${y}`,d)}],[p]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("top")}`,`${p} + ${y}`,p)}],[m]:[{events:{signal:l.DELTA},update:i.default(`${t()} || ${t("bottom")}`,`${m} + ${y}`,m)}],[g]:[{events:{signal:l.DELTA},update:i.default(t("left"),g+"-"+f,g)},{events:{signal:l.DELTA},update:i.default(t("right"),g+"+"+f,g)}],[h]:[{events:{signal:l.DELTA},update:i.default(t("top"),h+"-"+y,h)},{events:{signal:l.DELTA},update:i.default(t("bottom"),h+"+"+y,h)}]}}},852:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.Scene=a.Record({_id:null,name:"Scene",background:"white",autosize:"pad",padding:5,encode:{update:{}},scales:[],axes:[],legends:[],marks:[]},"LyraScene")},86:function(e,t,n){"use strict";e.exports={"group-expanded":n(1179),"group-contracted":n(1180),rect:n(1181),line:n(1182),area:n(1183),text:n(1184),symbol:n(1185),trash:n(1186),plus:n(1187),undo:n(1188),redo:n(1189),nominal:n(1190),ordinal:n(1191),quantitative:n(1192),temporal:n(1193),prev:n(1194),next:n(1195),close:n(1196),hamburger:n(1197),erase:n(1198),export:n(1199),scaffold:n(1200),select:n(1201),sort:n(1202),sortAlphaAsc:n(1203),sortAlphaDesc:n(1204),sortNumericAsc:n(1205),sortNumericDesc:n(1206),filter:n(1207),formula:n(1208),aggregate:n(1209),download:n(1210),bold:n(1211),italic:n(1212),open:n(1213),save:n(1214),"align-left":n(1215),"align-center":n(1216),"align-right":n(1217),"vertical-align-bottom":n(1218),"vertical-align-center":n(1219),"vertical-align-top":n(1220)}},863:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1137),r=n(414),s=n(308),i=n(76),l=n(1139),o=n(1140),c=n(1141),u=n(1142),d=n(1143),p=n(592),m=n(39).getInVis,g=n(221),h=(n(1144),{rect:"bar",symbol:"circle",text:"text",line:"line",area:"area"});t.CELLW=517,t.CELLH=392,t.default=function(e,n,p,y){return function(v,b){const _=b(),x=m(_,"marks."+p),E=x.type,S=function(e){return e._vlUnit||{mark:h[e.type],data:{values:[]},encoding:{},config:{}}}(x),w=(T=S)._lyraMap||(T._lyraMap={data:{},scales:{},axes:{},legends:{},marks:{}}),k=function(e){switch(e){case"x":case"x+":case"x2":case"width":return"x";case"y":case"y+":case"y2":case"height":return"y";case"fill":case"stroke":return"color"}}(y),I=m(_,"datasets."+e+"._parent");var T;const O=x.from;if(O&&O.data&&m(_,`datasets.${O.data}._parent`)!==I)throw Error("Mark and field must be from the same pipeline.");r.batchGroupBy.start(),S.encoding[k]=function(e){const t=e.name,n=e.aggregate,a=e.bin,r={type:e.mtype};let s;return n||(s=f.agg.exec(t))?r.aggregate=s?s[1]:n:(a||(s=f.bin.exec(t)))&&(r.bin=!0),r.field=s?s[2]:t,r}(n);const P=function(e,n,r){return(e=s.default(e)).data.values=g.output(r),e.config.view={width:t.CELLW,height:t.CELLH},e.config.mark={filled:"fill"===n},{input:e,output:a.compile(e).spec}}(S,y,e);P.map=w,P.mark=x,P.markId=p,P.markType=E,P.property=y,P.channel=k,P.dsId=e,P.plId=I,o.default(v,_,P),d.default(v,_,P),u.default(v,_,P),l.default(v,_),c.default(v,b(),P),v(i.setVlUnit(S,p)),r.batchGroupBy.end()}};const f={agg:new RegExp("^("+p.join("|")+")_(.*?)$"),bin:new RegExp("^(bin)_(.*?)(_start|_mid|_end)$")}},867:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(54);t.setActiveStep=a.createStandardAction("SET_ACTIVE_STEP")(),t.setActiveWalkthrough=a.createStandardAction("SET_ACTIVE_WALKTHROUGH")()},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.Hints=a.Record({display:null,on:!1},"LyraHints")},871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=a.Record({selectedId:null,selectedType:null,expandedLayers:{}},"LyraEncodingState");t.Inspector=a.Record({pipelines:{selectedId:null},encodings:r()},"LyraInspector")},872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46);t.VegaReparse=a.Record({invalid:!1,isParsing:!1},"LyraVegaReparse")},873:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(1165);t.Walkthrough=a.Record({data:r.data,activeStep:1,activeWalkthrough:null},"LyraWalkthrough")},874:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MARKS="marks",e.GUIDES="guides",e.SCALES="scales",e.DATASETS="datasets",e.INTERACTIONS="interactions"}(t.PrimType||(t.PrimType={}))},875:function(e,t,n){"use strict";e.exports=["linear","step-before","step-after","basis","basis-open","cardinal","cardinal-open","monotone"]},876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19);t.MoreProperties=class extends a.Component{constructor(e){super(e),this.state={display:"none"}}toggle(e){return"block"===e?"none":"block"}handleClick(e){this.setState({display:this.toggle(this.state.display)})}render(){const e=this.props,t=this.state.display,n={display:t},r={display:this.toggle(t)};let s,i;return e.header?s=a.createElement("div",null,a.createElement("h3",{className:"show-more-props more-props-label",onClick:this.handleClick,style:r},"+ ",e.label),a.createElement("h3",{className:"hide-more-props more-props-label",onClick:this.handleClick,style:n},"— ",e.label)):(s=a.createElement("a",{className:"show-more-props more-props-label",href:"#",onClick:this.handleClick,style:r},"+ More ",e.label," Properties"),i=a.createElement("a",{className:"hide-more-props more-props-label",href:"#",style:n,onClick:this.handleClick},"– Fewer ",e.label," Properties")),a.createElement("div",null,s,a.createElement("div",{className:"more-props",style:n},e.children),i)}}},877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(1257),r=n(1263),s=n(19),i=n(40),l=n(88),o=(n(421),n(367)),c=n(39).getInVis,u=n(221),d=n(86);t.default=i.connect(function(e,t){const n=t.id;return{dataset:c(e,"datasets."+n),vega:e.get("vega")}})(class extends s.Component{constructor(e){super(e),this.$table=s.createRef(),this.prevPage=(()=>{this.setState({page:this.state.page-1},()=>{this.props.onPage&&this.props.onPage(this.state.page)}),this.$table.current.scrollLeft=0}),this.nextPage=(()=>{this.setState({page:this.state.page+1},()=>{this.props.onPage&&this.props.onPage(this.state.page)}),this.$table.current.scrollLeft=0}),this.showHoverField=(e=>{const t=e.target;this.setState({hoverField:{name:t.textContent,offsetTop:t.offsetTop},hoverValue:null})}),this.showHoverValue=(e=>{this.setState({hoverField:null,hoverValue:(e.persist(),e)})}),this.hideHover=(()=>{this.setState({hoverField:null,hoverValue:null})}),this.onScroll=(()=>{this.hideHover();const e=this.$table.current&&this.$table.current.scrollLeft;this.props.onScroll&&this.props.onScroll(e)}),this.state={page:0,hoverField:null,hoverValue:null}}shouldComponentUpdate(e,t){const n=e.vega;return!n.get("invalid")&&!n.get("isParsing")}componentDidUpdate(e,t){this.props.scroll!==e.scroll&&this.$table&&(this.$table.current.scrollLeft=this.props.scroll)}render(){const e=this.state,t=this.props,n=void 0!==t.page?t.page:e.page,i=t.limit,c=n*i,p=c+i,m=t.id,g=m?t.dataset.get("_schema"):t.schema,h=m?u.output(m):t.values,f=h.slice(c,p),y=g.keySeq().toArray().filter((e,t)=>void 0===this.props.fieldsIndex||void 0===this.props.fieldsCount||t>=this.props.fieldsIndex*this.props.fieldsCount&&t<this.props.fieldsIndex*this.props.fieldsCount+this.props.fieldsCount),v=h.length,b=o.format.auto.number(),_=this.$table.current&&this.$table.current.scrollLeft,x=n>0?s.createElement(l.Icon,{glyph:d.prev,width:"10",height:"10",onClick:this.prevPage}):null,E=n+1<v/i?s.createElement(l.Icon,{glyph:d.next,width:"10",height:"10",onClick:this.nextPage}):null;return s.createElement("div",{className:"datatable-container"},h.length?s.createElement("div",{className:"datatable",ref:this.$table,onMouseLeave:this.hideHover,onScroll:this.onScroll},s.createElement("table",null,s.createElement("tbody",null,y.map(function(e){return s.createElement("tr",{key:e},s.createElement("td",{className:"field "+(g.get(e).source?"source":"derived"),onMouseOver:this.showHoverField},e),f.map(function(t,n){return s.createElement("td",{key:e+n,className:n%2?"even":"odd",onMouseOver:this.showHoverValue},t[e])},this))},this))),m?s.createElement(a.default,{dsId:m,schema:g,def:e.hoverField}):null,s.createElement(r.default,{event:e.hoverValue,scrollLeft:_})):null,s.createElement("div",{className:"paging"},t.first?s.createElement("span",null,b(c+1),"–",b(p>v?v:p)," of ",b(v)):null,t.last?s.createElement("span",{className:"pager"},x," ",E):null))}})},878:function(e,t,n){"use strict";var a=e.exports=["quantitative","nominal","temporal"];a.NOMINAL="nominal",a.ORDINAL="ordinal",a.QUANTITATIVE="quantitative",a.TEMPORAL="temporal"},88:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(19);t.Icon=class extends a.Component{render(){const e=this.props,t=(e.className?e.className+" ":"")+"icon";return a.createElement("svg",{className:t,onClick:e.onClick,width:e.width||13,height:e.height||13,"data-html":e["data-html"],"data-tip":e["data-tip"],"data-place":e["data-place"]},a.createElement("use",{xlinkHref:"#"+e.glyph.id}))}}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=n(46),r=n(28),s=n(219);t.SELECTED=s("selected"),t.MODE=s("mode"),t.ANCHOR=s("anchor"),t.DELTA=s("delta"),t.CURSOR="cursor",t.CELL=s("cell"),t.MOUSE=s("mouse"),t.signalNames={SELECTED:t.SELECTED,MODE:t.MODE,ANCHOR:t.ANCHOR,DELTA:t.DELTA,CURSOR:t.CURSOR,CELL:t.CELL,MOUSE:t.MOUSE},t.Signal=a.Record({_idx:null,value:null,name:null,on:[]},"LyraSignal"),t.defaultSignalState=a.Map({[t.SELECTED]:t.Signal({name:t.SELECTED,value:{mark:{}},on:[{events:"mousedown[item().mark && item().mark.name &&item().mark.name !== "+r.stringValue(t.CELL)+"]",update:"item()"},{events:"mousedown[!item().mark]",update:"{mark: {}}"}],_idx:0}),[t.MODE]:t.Signal({name:t.MODE,value:"handles",_idx:1}),[t.DELTA]:t.Signal({name:t.DELTA,value:0,on:[{events:"[mousedown, window:mouseup] > window:mousemove",update:"{x: x() - lyra_anchor.x, y: y() - lyra_anchor.y}"}],_idx:2}),[t.ANCHOR]:t.Signal({name:t.ANCHOR,value:0,on:[{events:"mousedown",update:"{x: x(), y: y(), target: item()}"},{events:"[mousedown, window:mouseup] > window:mousemove",update:"{x: x(), y: y(), target: lyra_anchor.target}"}],_idx:3}),[t.CELL]:t.Signal({name:t.CELL,value:{},on:[{events:{type:"dragover",filter:[`event.item && event.item.mark.role === "${t.CELL}"`]},update:"item()"},{events:{type:"dragleave",filter:[`event.item && event.item.mark.role === "${t.CELL}"`]},update:"{}"}],_idx:4}),[t.MOUSE]:t.Signal({name:t.MOUSE,value:{},on:[{events:"mousemove, dragover",update:"{x: x(), y: y()}"}],_idx:5})})}}]);
//# sourceMappingURL=default.js.map